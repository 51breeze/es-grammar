/*
 * es-grammar
 * Copyright © 2017 EaseScript All rights reserved.
 * Released under the MIT license
 * https://github.com/51breeze/es-grammar
 * @author Jun Ye <664371281@qq.com>
 * @date 2022-04-30
*/
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var vscode=require("vscode"),path=require("path"),fs=require("fs"),events=require("events");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var vscode__default=_interopDefaultLegacy(vscode),path__default=_interopDefaultLegacy(path),fs__default=_interopDefaultLegacy(fs),events__default=_interopDefaultLegacy(events);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _createSuper(i){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(i);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=_superPropBase(e,t);if(n)return n=Object.getOwnPropertyDescriptor(n,t),n.get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function _readOnlyError(e){throw new TypeError('"'+e+'" is read-only')}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _iterableToArrayLimit(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,s=[],a=!0,o=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(s.push(n.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(o)throw r}}return s}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper(e,t){var i,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}var keySymbol$l=Symbol("keySymbol"),EventDispatcher=(events__default.default.EventEmitter.defaultMaxListeners=1e5,function(){function e(){_classCallCheck(this,e),this[keySymbol$l]=new events__default.default.EventEmitter}return _createClass(e,[{key:"addListener",value:function(e,t){return this[keySymbol$l].addListener(e,t)}},{key:"on",value:function(e,t){return this[keySymbol$l].on(e,t)}},{key:"once",value:function(e,t){return this[keySymbol$l].once(e,t)}},{key:"removeListener",value:function(e,t){return this[keySymbol$l].removeListener(e,t)}},{key:"off",value:function(e,t){return this[keySymbol$l].off(e,t)}},{key:"removeAllListeners",value:function(e,t){return this[keySymbol$l].removeAllListeners(e,t)}},{key:"dispatcher",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return(t=this[keySymbol$l]).emit.apply(t,[e].concat(n))}}]),e}()),EventDispatcher_1=EventDispatcher,Scope_1=function(){_inherits(r,EventDispatcher_1);var i=_createSuper(r);function r(e){var t;return _classCallCheck(this,r),(t=i.call(this)).parent=e,t.children=[],t.level=0,e&&(e.children.push(_assertThisInitialized(t)),t.level=e.level+1,t.asyncParentScopeOf=e.async?e:e.asyncParentScopeOf),e&&e.topDeclarations?t.topDeclarations=e.topDeclarations:t.topDeclarations=new Set,t.declarations=new Map,t.proxyScope=null,t}return _createClass(r,[{key:"removeChild",value:function(e){var t=this.proxyScope;if(t&&t!==this)return t.removeChild(e);t=this.children.indexOf(e);return 0<=t?this.children.splice(t,1):null}},{key:"hasChildDeclared",value:function(i){var e=this.proxyScope;return e&&e!==this?e.hasChildDeclared(i):function e(t){return!!t.isDefine(i)||t.children.some(e)}(this)}},{key:"generateVarName",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=this.proxyScope;if(i&&i!==this)return i.generateVarName(e,t);for(var n=0,r=e;!1===t&&this.topDeclarations.has(r)||!0===t&&this.hasChildDeclared(r);)r=e+ ++n;return this.define(r,this),r}},{key:"type",value:function(e){var t=this.proxyScope;return!(!t||t===this)&&t.type(e)}},{key:"getScopeByType",value:function(e){var t=this.proxyScope;if(t&&t!==this)return t.getScopeByType(e);for(var i=this;i&&i instanceof r&&!i.type(e);)i=i.parent;return i}},{key:"define",value:function(e,t){var i=this.proxyScope;if(i&&i!==this)return i.define(e,t);if(void 0===t){if(this.declarations.has(e))return this.declarations.get(e);for(var n=this.parent;n&&n instanceof r;){if(n.declarations.has(e))return n.declarations.get(e);n=n.parent}return null}this.declarations.set(e,t),this.topDeclarations&&this.topDeclarations.add(e)}},{key:"getDefine",value:function(e,t){var i=this.proxyScope;if(i&&i!==this)return i.getDefine(e,t);if(this.declarations.has(e))return this.declarations.get(e);for(var n=this.parent;n&&n instanceof r;){if(n.declarations.has(e))return n.declarations.get(e);if(t&&(n.type(t)||"block"===t&&n.type("function")))return!1;n=n.parent}return null}},{key:"getKeys",value:function(e){var t=this.proxyScope;if(t&&t!==this)return t.getKeys(e);for(var i=Array.from(this.declarations.keys()),n=this.parent;n;){(!e||e.some(function(e){return!!n.type(e)}))&&(i=i.concat(Array.from(n.declarations.keys())),n=n.parent);break}return i}},{key:"isDefine",value:function(e,t){var i=this.proxyScope;if(i&&i!==this)return this.proxyScope.isDefine(e,t);for(var n=this;n&&n instanceof r;){if(n.declarations.has(e))return!0;if(t&&(n.type(t)||"block"===t&&n.type("function")))return!1;n=n.parent}return!1}}]),r}(),TopScope_1=function(){_inherits(i,Scope_1);var t=_createSuper(i);function i(e){return _classCallCheck(this,i),(e=t.call(this,e)).isTopScope=!0,e}return _createClass(i,[{key:"type",value:function(e){return"top"===e}}]),i}(),reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ecma5AndLessKeywords="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",keywords={5:ecma5AndLessKeywords,"5module":ecma5AndLessKeywords+" export import",6:ecma5AndLessKeywords+" const class extends export import super"},keywordRelationalOperator=/^in(stanceof)?$/,nonASCIIidentifierStartChars="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࣇऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-鿼ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-ꟊꟵ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",nonASCIIidentifierChars="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿᫀᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]"),nonASCIIidentifierStartChars=nonASCIIidentifierChars=null,astralIdentifierStartCodes=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],astralIdentifierCodes=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function isInAstralSet(e,t){for(var i=65536,n=0;n<t.length;n+=2){if(e<(i+=t[n]))return!1;if(e<=(i+=t[n+1]))return!0}}function isIdentifierStart(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?170<=e&&nonASCIIidentifierStart.test(String.fromCharCode(e)):!1!==t&&isInAstralSet(e,astralIdentifierStartCodes)))}function isIdentifierChar(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?170<=e&&nonASCIIidentifier.test(String.fromCharCode(e)):!1!==t&&(isInAstralSet(e,astralIdentifierStartCodes)||isInAstralSet(e,astralIdentifierCodes)))))}var TokenType$1=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function binop(e,t){return new TokenType$1(e,{beforeExpr:!0,binop:t})}var beforeExpr={beforeExpr:!0},startsExpr={startsExpr:!0},keywords$1={};function kw(e,t){return(t=void 0===t?{}:t).keyword=e,keywords$1[e]=new TokenType$1(e,t)}var types={num:new TokenType$1("num",startsExpr),regexp:new TokenType$1("regexp",startsExpr),string:new TokenType$1("string",startsExpr),name:new TokenType$1("name",startsExpr),eof:new TokenType$1("eof"),bracketL:new TokenType$1("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new TokenType$1("]"),braceL:new TokenType$1("{",{beforeExpr:!0,startsExpr:!0}),braceR:new TokenType$1("}"),parenL:new TokenType$1("(",{beforeExpr:!0,startsExpr:!0}),parenR:new TokenType$1(")"),comma:new TokenType$1(",",beforeExpr),semi:new TokenType$1(";",beforeExpr),colon:new TokenType$1(":",beforeExpr),dot:new TokenType$1("."),question:new TokenType$1("?",beforeExpr),questionDot:new TokenType$1("?."),arrow:new TokenType$1("=>",beforeExpr),template:new TokenType$1("template"),invalidTemplate:new TokenType$1("invalidTemplate"),ellipsis:new TokenType$1("...",beforeExpr),backQuote:new TokenType$1("`",startsExpr),dollarBraceL:new TokenType$1("${",{beforeExpr:!0,startsExpr:!0}),eq:new TokenType$1("=",{beforeExpr:!0,isAssign:!0}),assign:new TokenType$1("_=",{beforeExpr:!0,isAssign:!0}),incDec:new TokenType$1("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new TokenType$1("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop("||",1),logicalAND:binop("&&",2),bitwiseOR:binop("|",3),bitwiseXOR:binop("^",4),bitwiseAND:binop("&",5),equality:binop("==/!=/===/!==",6),relational:binop("</>/<=/>=",7),bitShift:binop("<</>>/>>>",8),plusMin:new TokenType$1("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop("%",10),star:binop("*",10),slash:binop("/",10),starstar:new TokenType$1("**",{beforeExpr:!0}),coalesce:binop("??",1),_break:kw("break"),_case:kw("case",beforeExpr),_catch:kw("catch"),_continue:kw("continue"),_debugger:kw("debugger"),_default:kw("default",beforeExpr),_do:kw("do",{isLoop:!0,beforeExpr:!0}),_else:kw("else",beforeExpr),_finally:kw("finally"),_for:kw("for",{isLoop:!0}),_function:kw("function",startsExpr),_if:kw("if"),_return:kw("return",beforeExpr),_switch:kw("switch"),_throw:kw("throw",beforeExpr),_try:kw("try"),_var:kw("var"),_const:kw("const"),_while:kw("while",{isLoop:!0}),_with:kw("with"),_new:kw("new",{beforeExpr:!0,startsExpr:!0}),_this:kw("this",startsExpr),_super:kw("super",startsExpr),_class:kw("class",startsExpr),_extends:kw("extends",beforeExpr),_export:kw("export"),_import:kw("import",startsExpr),_null:kw("null",startsExpr),_true:kw("true",startsExpr),_false:kw("false",startsExpr),_in:kw("in",{beforeExpr:!0,binop:7}),_instanceof:kw("instanceof",{beforeExpr:!0,binop:7}),_typeof:kw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},lineBreak=/\r\n?|\n|\u2028|\u2029/,lineBreakG=new RegExp(lineBreak.source,"g");function isNewLine(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var nonASCIIwhitespace=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ref=Object.prototype,hasOwnProperty=ref.hasOwnProperty,toString=ref.toString;function has(e,t){return hasOwnProperty.call(e,t)}var isArray=Array.isArray||function(e){return"[object Array]"===toString.call(e)};function wordsRegexp(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var Position=function(e,t){this.line=e,this.column=t},SourceLocation=(Position.prototype.offset=function(e){return new Position(this.line,this.column+e)},function(e,t,i){this.start=t,this.end=i,null!==e.sourceFile&&(this.source=e.sourceFile)});function getLineInfo(e,t){for(var i=1,n=0;;){lineBreakG.lastIndex=n;var r=lineBreakG.exec(e);if(!(r&&r.index<t))return new Position(i,t-n);++i,n=r.index+r[0].length}}var defaultOptions$1={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function getOptions$1(e){var t,i,n={};for(t in defaultOptions$1)n[t]=(e&&has(e,t)?e:defaultOptions$1)[t];return 2015<=n.ecmaVersion&&(n.ecmaVersion-=2009),null==n.allowReserved&&(n.allowReserved=n.ecmaVersion<5),isArray(n.onToken)&&(i=n.onToken,n.onToken=function(e){return i.push(e)}),isArray(n.onComment)&&(n.onComment=pushComment(n,n.onComment)),n}function pushComment(a,o){return function(e,t,i,n,r,s){e={type:e?"Block":"Line",value:t,start:i,end:n};a.locations&&(e.loc=new SourceLocation(this,r,s)),a.ranges&&(e.range=[i,n]),o.push(e)}}var SCOPE_TOP=1,SCOPE_FUNCTION$1=2,SCOPE_VAR=SCOPE_TOP|SCOPE_FUNCTION$1,SCOPE_ASYNC$1=4,SCOPE_GENERATOR$1=8,SCOPE_ARROW$1=16,SCOPE_SIMPLE_CATCH=32,SCOPE_SUPER$1=64,SCOPE_DIRECT_SUPER$1=128;function functionFlags$1(e,t){return SCOPE_FUNCTION$1|(e?SCOPE_ASYNC$1:0)|(t?SCOPE_GENERATOR$1:0)}var BIND_NONE$1=0,BIND_VAR=1,BIND_LEXICAL=2,BIND_FUNCTION=3,BIND_SIMPLE_CATCH=4,BIND_OUTSIDE=5,Parser$2=function(e,t,i){this.options=e=getOptions$1(e),this.sourceFile=e.sourceFile,this.keywords=wordsRegexp(keywords[6<=e.ecmaVersion?6:"module"===e.sourceType?"5module":5]);var n="";if(!0!==e.allowReserved){for(var r=e.ecmaVersion;!(n=reservedWords[r]);r--);"module"===e.sourceType&&(n+=" await")}this.reservedWords=wordsRegexp(n);var s=(n?n+" ":"")+reservedWords.strict;this.reservedWordsStrict=wordsRegexp(s),this.reservedWordsStrictBind=wordsRegexp(s+" "+reservedWords.strictBind),this.input=String(t),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=types.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(SCOPE_TOP),this.regexpState=null},prototypeAccessors={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}},pp=(Parser$2.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},prototypeAccessors.inFunction.get=function(){return 0<(this.currentVarScope().flags&SCOPE_FUNCTION$1)},prototypeAccessors.inGenerator.get=function(){return 0<(this.currentVarScope().flags&SCOPE_GENERATOR$1)},prototypeAccessors.inAsync.get=function(){return 0<(this.currentVarScope().flags&SCOPE_ASYNC$1)},prototypeAccessors.allowSuper.get=function(){return 0<(this.currentThisScope().flags&SCOPE_SUPER$1)},prototypeAccessors.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&SCOPE_DIRECT_SUPER$1)},prototypeAccessors.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},Parser$2.prototype.inNonArrowFunction=function(){return 0<(this.currentThisScope().flags&SCOPE_FUNCTION$1)},Parser$2.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var i=this,n=0;n<e.length;n++)i=e[n](i);return i},Parser$2.parse=function(e,t){return new this(t,e).parse()},Parser$2.parseExpressionAt=function(e,t,i){i=new this(i,e,t);return i.nextToken(),i.parseExpression()},Parser$2.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(Parser$2.prototype,prototypeAccessors),Parser$2.prototype),literal=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function DestructuringErrors$1(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}pp.strictDirective=function(e){for(;;){skipWhiteSpace.lastIndex=e,e+=skipWhiteSpace.exec(this.input)[0].length;var t,i,n,r=literal.exec(this.input.slice(e));if(!r)return!1;if("use strict"===(r[1]||r[2]))return skipWhiteSpace.lastIndex=e+r[0].length,i=(t=skipWhiteSpace.exec(this.input)).index+t[0].length,";"===(n=this.input.charAt(i))||"}"===n||lineBreak.test(t[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(n)||"!"===n&&"="===this.input.charAt(i+1));e+=r[0].length,skipWhiteSpace.lastIndex=e,e+=skipWhiteSpace.exec(this.input)[0].length,";"===this.input[e]&&e++}},pp.eat=function(e){return this.type===e&&(this.next(),!0)},pp.isContextual=function(e){return this.type===types.name&&this.value===e&&!this.containsEsc},pp.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},pp.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},pp.canInsertSemicolon=function(){return this.type===types.eof||this.type===types.braceR||lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},pp.semicolon=function(){this.eat(types.semi)||this.insertSemicolon()||this.unexpected()},pp.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},pp.expect=function(e){this.eat(e)||this.unexpected()},pp.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},pp.checkPatternErrors=function(e,t){e&&(-1<e.trailingComma&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element"),-1<(t=t?e.parenthesizedAssign:e.parenthesizedBind)&&this.raiseRecoverable(t,"Parenthesized pattern"))},pp.checkExpressionErrors=function(e,t){return!!e&&(i=e.shorthandAssign,e=e.doubleProto,t?(0<=i&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),void(0<=e&&this.raiseRecoverable(e,"Redefinition of __proto__ property"))):0<=i||0<=e);var i},pp.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},pp.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var pp$1=Parser$2.prototype,loopLabel=(pp$1.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==types.eof;){var i=this.parseStatement(null,!0,t);e.body.push(i)}if(this.inModule)for(var n=0,r=Object.keys(this.undefinedExports);n<r.length;n+=1){var s=r[n];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")},{kind:"loop"}),switchLabel={kind:"switch"},empty=(pp$1.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;skipWhiteSpace.lastIndex=this.pos;var t=skipWhiteSpace.exec(this.input),t=this.pos+t[0].length,i=this.input.charCodeAt(t);if(91===i)return!0;if(e)return!1;if(123===i)return!0;if(isIdentifierStart(i,!0)){for(var n=t+1;isIdentifierChar(this.input.charCodeAt(n),!0);)++n;e=this.input.slice(t,n);if(!keywordRelationalOperator.test(e))return!0}return!1},pp$1.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;skipWhiteSpace.lastIndex=this.pos;var e=skipWhiteSpace.exec(this.input),e=this.pos+e[0].length;return!(lineBreak.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&isIdentifierChar(this.input.charAt(e+8)))},pp$1.parseStatement=function(e,t,i){var n,r=this.type,s=this.startNode();switch(this.isLet(e)&&(r=types._var,n="let"),r){case types._break:case types._continue:return this.parseBreakContinueStatement(s,r.keyword);case types._debugger:return this.parseDebuggerStatement(s);case types._do:return this.parseDoStatement(s);case types._for:return this.parseForStatement(s);case types._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case types._class:return e&&this.unexpected(),this.parseClass(s,!0);case types._if:return this.parseIfStatement(s);case types._return:return this.parseReturnStatement(s);case types._switch:return this.parseSwitchStatement(s);case types._throw:return this.parseThrowStatement(s);case types._try:return this.parseTryStatement(s);case types._const:case types._var:return n=n||this.value,e&&"var"!==n&&this.unexpected(),this.parseVarStatement(s,n);case types._while:return this.parseWhileStatement(s);case types._with:return this.parseWithStatement(s);case types.braceL:return this.parseBlock(!0,s);case types.semi:return this.parseEmptyStatement(s);case types._export:case types._import:if(10<this.options.ecmaVersion&&r===types._import){skipWhiteSpace.lastIndex=this.pos;var a=skipWhiteSpace.exec(this.input),a=this.pos+a[0].length,a=this.input.charCodeAt(a);if(40===a||46===a)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===types._import?this.parseImport(s):this.parseExport(s,i);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var a=this.value,o=this.parseExpression();return r===types.name&&"Identifier"===o.type&&this.eat(types.colon)?this.parseLabeledStatement(s,a,o,e):this.parseExpressionStatement(s,o)}},pp$1.parseBreakContinueStatement=function(e,t){for(var i="break"===t,n=(this.next(),this.eat(types.semi)||this.insertSemicolon()?e.label=null:this.type!==types.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon()),0);n<this.labels.length;++n){var r=this.labels[n];if(null==e.label||r.name===e.label.name){if(null!=r.kind&&(i||"loop"===r.kind))break;if(e.label&&i)break}}return n===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,i?"BreakStatement":"ContinueStatement")},pp$1.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},pp$1.parseDoStatement=function(e){return this.next(),this.labels.push(loopLabel),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(types._while),e.test=this.parseParenExpression(),6<=this.options.ecmaVersion?this.eat(types.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},pp$1.parseForStatement=function(e){this.next();var t=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(loopLabel),this.enterScope(0),this.expect(types.parenL),this.type===types.semi)return-1<t&&this.unexpected(t),this.parseFor(e,null);var i=this.isLet();if(this.type===types._var||this.type===types._const||i)return n=this.startNode(),i=i?"let":this.value,this.next(),this.parseVar(n,!0,i),this.finishNode(n,"VariableDeclaration"),(this.type===types._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===n.declarations.length?(9<=this.options.ecmaVersion&&(this.type===types._in?-1<t&&this.unexpected(t):e.await=-1<t),this.parseForIn(e,n)):(-1<t&&this.unexpected(t),this.parseFor(e,n));var i=new DestructuringErrors$1,n=this.parseExpression(!0,i);return this.type===types._in||6<=this.options.ecmaVersion&&this.isContextual("of")?(9<=this.options.ecmaVersion&&(this.type===types._in?-1<t&&this.unexpected(t):e.await=-1<t),this.toAssignable(n,!1,i),this.checkLVal(n),this.parseForIn(e,n)):(this.checkExpressionErrors(i,!0),-1<t&&this.unexpected(t),this.parseFor(e,n))},pp$1.parseFunctionStatement=function(e,t,i){return this.next(),this.parseFunction(e,FUNC_STATEMENT|(i?0:FUNC_HANGING_STATEMENT),!1,t)},pp$1.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(types._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},pp$1.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(types.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},pp$1.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(types.braceL),this.labels.push(switchLabel),this.enterScope(0);for(var i,n=!1;this.type!==types.braceR;)this.type===types._case||this.type===types._default?(i=this.type===types._case,t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),i?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(types.colon)):(t||this.unexpected(),t.consequent.push(this.parseStatement(null)));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},pp$1.parseThrowStatement=function(e){return this.next(),lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")},[]),FUNC_STATEMENT=(pp$1.parseTryStatement=function(e){var t,i;return this.next(),e.block=this.parseBlock(),e.handler=null,this.type===types._catch&&(t=this.startNode(),this.next(),this.eat(types.parenL)?(t.param=this.parseBindingAtom(),i="Identifier"===t.param.type,this.enterScope(i?SCOPE_SIMPLE_CATCH:0),this.checkLVal(t.param,i?BIND_SIMPLE_CATCH:BIND_LEXICAL),this.expect(types.parenR)):(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")),e.finalizer=this.eat(types._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},pp$1.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},pp$1.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(loopLabel),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},pp$1.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},pp$1.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},pp$1.parseLabeledStatement=function(e,t,i,n){for(var r=0,s=this.labels;r<s.length;r+=1)s[r].name===t&&this.raise(i.start,"Label '"+t+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===types._switch?"switch":null,o=this.labels.length-1;0<=o;o--){var c=this.labels[o];if(c.statementStart!==e.start)break;c.statementStart=this.start,c.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(n?-1===n.indexOf("label")?n+"label":n:"label"),this.labels.pop(),e.label=i,this.finishNode(e,"LabeledStatement")},pp$1.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},pp$1.parseBlock=function(e,t,i){for(void 0===e&&(e=!0),(t=void 0===t?this.startNode():t).body=[],this.expect(types.braceL),e&&this.enterScope(0);this.type!==types.braceR;){var n=this.parseStatement(null);t.body.push(n)}return i&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},pp$1.parseFor=function(e,t){return e.init=t,this.expect(types.semi),e.test=this.type===types.semi?null:this.parseExpression(),this.expect(types.semi),e.update=this.type===types.parenR?null:this.parseExpression(),this.expect(types.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},pp$1.parseForIn=function(e,t){var i=this.type===types._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!i||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)?this.raise(t.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===t.type&&this.raise(t.start,"Invalid left-hand side in for-loop"),e.left=t,e.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(types.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,i?"ForInStatement":"ForOfStatement")},pp$1.parseVar=function(e,t,i){for(e.declarations=[],e.kind=i;;){var n=this.startNode();if(this.parseVarId(n,i),this.eat(types.eq)?n.init=this.parseMaybeAssign(t):"const"!==i||this.type===types._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===n.id.type||t&&(this.type===types._in||this.isContextual("of"))?n.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(n,"VariableDeclarator")),!this.eat(types.comma))break}return e},pp$1.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?BIND_VAR:BIND_LEXICAL,!1)},1),FUNC_HANGING_STATEMENT=2,FUNC_NULLABLE_ID=4,pp$2=(pp$1.parseFunction=function(e,t,i,n){this.initFunction(e),(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!n)&&(this.type===types.star&&t&FUNC_HANGING_STATEMENT&&this.unexpected(),e.generator=this.eat(types.star)),8<=this.options.ecmaVersion&&(e.async=!!n),t&FUNC_STATEMENT&&(e.id=t&FUNC_NULLABLE_ID&&this.type!==types.name?null:this.parseIdent(),!e.id||t&FUNC_HANGING_STATEMENT||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?BIND_VAR:BIND_LEXICAL:BIND_FUNCTION));var n=this.yieldPos,r=this.awaitPos,s=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags$1(e.async,e.generator)),t&FUNC_STATEMENT||(e.id=this.type===types.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,i,!1),this.yieldPos=n,this.awaitPos=r,this.awaitIdentPos=s,this.finishNode(e,t&FUNC_STATEMENT?"FunctionDeclaration":"FunctionExpression")},pp$1.parseFunctionParams=function(e){this.expect(types.parenL),e.params=this.parseBindingList(types.parenR,!1,8<=this.options.ecmaVersion),this.checkYieldAwaitInDefaultParams()},pp$1.parseClass=function(e,t){this.next();var i=this.strict,n=(this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e),this.startNode()),r=!1;for(n.body=[],this.expect(types.braceL);this.type!==types.braceR;){var s=this.parseClassElement(null!==e.superClass);s&&(n.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(r&&this.raise(s.start,"Duplicate constructor in the same class"),r=!0))}return this.strict=i,this.next(),e.body=this.finishNode(n,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},pp$1.parseClassElement=function(e){var r=this;if(this.eat(types.semi))return null;function t(e,t){void 0===t&&(t=!1);var i=r.start,n=r.startLoc;return!!r.eatContextual(e)&&(!(r.type===types.parenL||t&&r.canInsertSemicolon())||(s.key&&r.unexpected(),s.computed=!1,s.key=r.startNodeAt(i,n),s.key.name=e,r.finishNode(s.key,"Identifier"),!1))}var s=this.startNode(),i=(s.kind="method",s.static=t("static"),this.eat(types.star)),n=!1,a=(i||(8<=this.options.ecmaVersion&&t("async",!0)?(n=!0,i=9<=this.options.ecmaVersion&&this.eat(types.star)):t("get")?s.kind="get":t("set")&&(s.kind="set")),s.key||this.parsePropertyName(s),s.key),o=!1;return s.computed||s.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?s.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==s.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),n&&this.raise(a.start,"Constructor can't be an async method"),s.kind="constructor",o=e),this.parseClassMethod(s,i,n,o),"get"===s.kind&&0!==s.value.params.length&&this.raiseRecoverable(s.value.start,"getter should have no params"),"set"===s.kind&&1!==s.value.params.length&&this.raiseRecoverable(s.value.start,"setter should have exactly one param"),"set"===s.kind&&"RestElement"===s.value.params[0].type&&this.raiseRecoverable(s.value.params[0].start,"Setter cannot use rest params"),s},pp$1.parseClassMethod=function(e,t,i,n){return e.value=this.parseMethod(t,i,n),this.finishNode(e,"MethodDefinition")},pp$1.parseClassId=function(e,t){this.type===types.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,BIND_LEXICAL,!1)):(!0===t&&this.unexpected(),e.id=null)},pp$1.parseClassSuper=function(e){e.superClass=this.eat(types._extends)?this.parseExprSubscripts():null},pp$1.parseExport=function(e,t){if(this.next(),this.eat(types.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(e.exported=this.parseIdent(!0),this.checkExport(t,e.exported.name,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==types.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");var i,n;if(this.eat(types._default))return this.checkExport(t,"default",this.lastTokStart),this.type===types._function||(i=this.isAsyncFunction())?(n=this.startNode(),this.next(),i&&this.next(),e.declaration=this.parseFunction(n,FUNC_STATEMENT|FUNC_NULLABLE_ID,!1,i)):this.type===types._class?(n=this.startNode(),e.declaration=this.parseClass(n,"nullableID")):(e.declaration=this.parseMaybeAssign(),this.semicolon()),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==types.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var r=0,s=e.specifiers;r<s.length;r+=1){var a=s[r];this.checkUnreserved(a.local),this.checkLocalExport(a.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},pp$1.checkExport=function(e,t,i){e&&(has(e,t)&&this.raiseRecoverable(i,"Duplicate export '"+t+"'"),e[t]=!0)},pp$1.checkPatternExport=function(e,t){var i=t.type;if("Identifier"===i)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===i)for(var n=0,r=t.properties;n<r.length;n+=1){var s=r[n];this.checkPatternExport(e,s)}else if("ArrayPattern"===i)for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(e,c)}else"Property"===i?this.checkPatternExport(e,t.value):"AssignmentPattern"===i?this.checkPatternExport(e,t.left):"RestElement"===i?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===i&&this.checkPatternExport(e,t.expression)},pp$1.checkVariableExport=function(e,t){if(e)for(var i=0,n=t;i<n.length;i+=1){var r=n[i];this.checkPatternExport(e,r.id)}},pp$1.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},pp$1.parseExportSpecifiers=function(e){var t=[],i=!0;for(this.expect(types.braceL);!this.eat(types.braceR);){if(i)i=!1;else if(this.expect(types.comma),this.afterTrailingComma(types.braceR))break;var n=this.startNode();n.local=this.parseIdent(!0),n.exported=this.eatContextual("as")?this.parseIdent(!0):n.local,this.checkExport(e,n.exported.name,n.exported.start),t.push(this.finishNode(n,"ExportSpecifier"))}return t},pp$1.parseImport=function(e){return this.next(),this.type===types.string?(e.specifiers=empty,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===types.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},pp$1.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===types.name){var i=this.startNode();if(i.local=this.parseIdent(),this.checkLVal(i.local,BIND_LEXICAL),e.push(this.finishNode(i,"ImportDefaultSpecifier")),!this.eat(types.comma))return e}if(this.type===types.star)return i=this.startNode(),this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLVal(i.local,BIND_LEXICAL),e.push(this.finishNode(i,"ImportNamespaceSpecifier")),e;for(this.expect(types.braceL);!this.eat(types.braceR);){if(t)t=!1;else if(this.expect(types.comma),this.afterTrailingComma(types.braceR))break;var n=this.startNode();n.imported=this.parseIdent(!0),this.eatContextual("as")?n.local=this.parseIdent():(this.checkUnreserved(n.imported),n.local=n.imported),this.checkLVal(n.local,BIND_LEXICAL),e.push(this.finishNode(n,"ImportSpecifier"))}return e},pp$1.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},pp$1.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])},Parser$2.prototype),pp$3=(pp$2.toAssignable=function(e,t,i){if(6<=this.options.ecmaVersion&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var n=0,r=e.properties;n<r.length;n+=1){var s=r[n];this.toAssignable(s,t),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,i);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return e},pp$2.toAssignableList=function(e,t){for(var i,n=e.length,r=0;r<n;r++){var s=e[r];s&&this.toAssignable(s,t)}return n&&(i=e[n-1],6===this.options.ecmaVersion&&t&&i&&"RestElement"===i.type&&"Identifier"!==i.argument.type&&this.unexpected(i.argument.start)),e},pp$2.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},pp$2.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==types.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},pp$2.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case types.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(types.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case types.braceL:return this.parseObj(!0)}return this.parseIdent()},pp$2.parseBindingList=function(e,t,i){for(var n=[],r=!0;!this.eat(e);)if(r?r=!1:this.expect(types.comma),t&&this.type===types.comma)n.push(null);else{if(i&&this.afterTrailingComma(e))break;if(this.type===types.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),n.push(s),this.type===types.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}s=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(s),n.push(s)}return n},pp$2.parseBindingListItem=function(e){return e},pp$2.parseMaybeDefault=function(e,t,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(types.eq))return i;e=this.startNodeAt(e,t);return e.left=i,e.right=this.parseMaybeAssign(),this.finishNode(e,"AssignmentPattern")},pp$2.checkLVal=function(e,t,i){switch(void 0===t&&(t=BIND_NONE$1),e.type){case"Identifier":t===BIND_LEXICAL&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),i&&(has(i,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),i[e.name]=!0),t!==BIND_NONE$1&&t!==BIND_OUTSIDE&&this.declareName(e.name,t,e.start);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var n=0,r=e.properties;n<r.length;n+=1){var s=r[n];this.checkLVal(s,t,i)}break;case"Property":this.checkLVal(e.value,t,i);break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLVal(c,t,i)}break;case"AssignmentPattern":this.checkLVal(e.left,t,i);break;case"RestElement":this.checkLVal(e.argument,t,i);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,i);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}},Parser$2.prototype),empty$1=(pp$3.checkPropClash=function(e,t,i){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===e.type||6<=this.options.ecmaVersion&&(e.computed||e.method||e.shorthand))){var n=e.key;switch(n.type){case"Identifier":r=n.name;break;case"Literal":r=String(n.value);break;default:return}var r,e=e.kind;6<=this.options.ecmaVersion?"__proto__"===r&&"init"===e&&(t.proto&&(i?i.doubleProto<0&&(i.doubleProto=n.start):this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),t.proto=!0):((i=t[r="$"+r])?("init"===e?this.strict&&i.init||i.get||i.set:i.init||i[e])&&this.raiseRecoverable(n.start,"Redefinition of property"):i=t[r]={init:!1,get:!1,set:!1},i[e]=!0)}},pp$3.parseExpression=function(e,t){var i=this.start,n=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type!==types.comma)return r;var s=this.startNodeAt(i,n);for(s.expressions=[r];this.eat(types.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")},pp$3.parseMaybeAssign=function(e,t,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var n=!1,r=-1,s=-1,a=(t?(r=t.parenthesizedAssign,s=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new DestructuringErrors$1,n=!0),this.start),o=this.startLoc,c=(this.type!==types.parenL&&this.type!==types.name||(this.potentialArrowAt=this.start),this.parseMaybeConditional(e,t));return i&&(c=i.call(this,c,a,o)),this.type.isAssign?((i=this.startNodeAt(a,o)).operator=this.value,i.left=this.type===types.eq?this.toAssignable(c,!1,t):c,n||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=i.left.start&&(t.shorthandAssign=-1),this.checkLVal(c),this.next(),i.right=this.parseMaybeAssign(e),this.finishNode(i,"AssignmentExpression")):(n&&this.checkExpressionErrors(t,!0),-1<r&&(t.parenthesizedAssign=r),-1<s&&(t.trailingComma=s),c)},pp$3.parseMaybeConditional=function(e,t){var i=this.start,n=this.startLoc,r=this.parseExprOps(e,t);return!this.checkExpressionErrors(t)&&this.eat(types.question)?((t=this.startNodeAt(i,n)).test=r,t.consequent=this.parseMaybeAssign(),this.expect(types.colon),t.alternate=this.parseMaybeAssign(e),this.finishNode(t,"ConditionalExpression")):r},pp$3.parseExprOps=function(e,t){var i=this.start,n=this.startLoc,r=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||r.start===i&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,i,n,-1,e)},pp$3.parseExprOp=function(e,t,i,n,r){var s,a,o,c,l,u=this.type.binop;if(null!=u&&(!r||this.type!==types._in)&&n<u)return s=this.type===types.logicalOR||this.type===types.logicalAND,(a=this.type===types.coalesce)&&(u=types.logicalAND.binop),o=this.value,this.next(),c=this.start,l=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),c,l,u,r),l=this.buildBinary(t,i,e,c,o,s||a),(s&&this.type===types.coalesce||a&&(this.type===types.logicalOR||this.type===types.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(l,t,i,n,r);return e},pp$3.buildBinary=function(e,t,i,n,r,s){e=this.startNodeAt(e,t);return e.left=i,e.operator=r,e.right=n,this.finishNode(e,s?"LogicalExpression":"BinaryExpression")},pp$3.parseMaybeUnary=function(e,t){var i,n=this.start,r=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))i=this.parseAwait(),t=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===types.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,i=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(i=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(n,r);o.operator=this.value,o.prefix=!1,o.argument=i,this.checkLVal(i),this.next(),i=this.finishNode(o,"UpdateExpression")}}return!t&&this.eat(types.starstar)?this.buildBinary(n,r,i,this.parseMaybeUnary(null,!1),"**",!1):i},pp$3.parseExprSubscripts=function(e){var t=this.start,i=this.startLoc,n=this.parseExprAtom(e);if("ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return n;n=this.parseSubscripts(n,t,i);return e&&"MemberExpression"===n.type&&(e.parenthesizedAssign>=n.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=n.start&&(e.parenthesizedBind=-1)),n},pp$3.parseSubscripts=function(e,t,i,n){for(var r=8<=this.options.ecmaVersion&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start==5&&this.potentialArrowAt===e.start,s=!1;;){var a,o=this.parseSubscript(e,t,i,n,r,s);if(o.optional&&(s=!0),o===e||"ArrowFunctionExpression"===o.type)return s&&((a=this.startNodeAt(t,i)).expression=o,o=this.finishNode(a,"ChainExpression")),o;e=o}},pp$3.parseSubscript=function(e,t,i,n,r,s){var a=11<=this.options.ecmaVersion,o=a&&this.eat(types.questionDot),c=(n&&o&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions"),this.eat(types.bracketL));if(c||o&&this.type!==types.parenL&&this.type!==types.backQuote||this.eat(types.dot)){var l=this.startNodeAt(t,i);l.object=e,l.property=c?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),l.computed=!!c,c&&this.expect(types.bracketR),a&&(l.optional=o),e=this.finishNode(l,"MemberExpression")}else if(!n&&this.eat(types.parenL)){var c=new DestructuringErrors$1,l=this.yieldPos,n=this.awaitPos,u=this.awaitIdentPos,p=(this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.parseExprList(types.parenR,8<=this.options.ecmaVersion,!1,c));if(r&&!o&&!this.canInsertSemicolon()&&this.eat(types.arrow))return this.checkPatternErrors(c,!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=n,this.awaitIdentPos=u,this.parseArrowExpression(this.startNodeAt(t,i),p,!0);this.checkExpressionErrors(c,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=n||this.awaitPos,this.awaitIdentPos=u||this.awaitIdentPos;r=this.startNodeAt(t,i);r.callee=e,r.arguments=p,a&&(r.optional=o),e=this.finishNode(r,"CallExpression")}else this.type===types.backQuote&&((o||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),(c=this.startNodeAt(t,i)).tag=e,c.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(c,"TaggedTemplateExpression"));return e},pp$3.parseExprAtom=function(e){this.type===types.slash&&this.readRegexp();var t=this.potentialArrowAt===this.start;switch(this.type){case types._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),a=this.startNode(),this.next(),this.type!==types.parenL||this.allowDirectSuper||this.raise(a.start,"super() call outside constructor of a subclass"),this.type!==types.dot&&this.type!==types.bracketL&&this.type!==types.parenL&&this.unexpected(),this.finishNode(a,"Super");case types._this:return a=this.startNode(),this.next(),this.finishNode(a,"ThisExpression");case types.name:var i=this.start,n=this.startLoc,r=this.containsEsc,s=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!r&&"async"===s.name&&!this.canInsertSemicolon()&&this.eat(types._function))return this.parseFunction(this.startNodeAt(i,n),0,!1,!0);if(t&&!this.canInsertSemicolon()){if(this.eat(types.arrow))return this.parseArrowExpression(this.startNodeAt(i,n),[s],!1);if(8<=this.options.ecmaVersion&&"async"===s.name&&this.type===types.name&&!r)return s=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(types.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,n),[s],!0)}return s;case types.regexp:var a,r=this.value;return(a=this.parseLiteral(r.value)).regex={pattern:r.pattern,flags:r.flags},a;case types.num:case types.string:return this.parseLiteral(this.value);case types._null:case types._true:case types._false:return(a=this.startNode()).value=this.type===types._null?null:this.type===types._true,a.raw=this.type.keyword,this.next(),this.finishNode(a,"Literal");case types.parenL:i=this.start,n=this.parseParenAndDistinguishExpression(t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(n)&&(e.parenthesizedAssign=i),e.parenthesizedBind<0&&(e.parenthesizedBind=i)),n;case types.bracketL:return a=this.startNode(),this.next(),a.elements=this.parseExprList(types.bracketR,!0,!0,e),this.finishNode(a,"ArrayExpression");case types.braceL:return this.parseObj(!1,e);case types._function:return a=this.startNode(),this.next(),this.parseFunction(a,0);case types._class:return this.parseClass(this.startNode(),!1);case types._new:return this.parseNew();case types.backQuote:return this.parseTemplate();case types._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}},pp$3.parseExprImport=function(){var e=this.startNode(),t=(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.parseIdent(!0));switch(this.type){case types.parenL:return this.parseDynamicImport(e);case types.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}},pp$3.parseDynamicImport=function(e){var t;return this.next(),e.source=this.parseMaybeAssign(),this.eat(types.parenR)||(t=this.start,this.eat(types.comma)&&this.eat(types.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)),this.finishNode(e,"ImportExpression")},pp$3.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"!==this.options.sourceType&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},pp$3.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},pp$3.parseParenExpression=function(){this.expect(types.parenL);var e=this.parseExpression();return this.expect(types.parenR),e},pp$3.parseParenAndDistinguishExpression=function(e){var t,i=this.start,n=this.startLoc,r=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var s,a=this.start,o=this.startLoc,c=[],l=!0,u=!1,p=new DestructuringErrors$1,h=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==types.parenR;){if(l?l=!1:this.expect(types.comma),r&&this.afterTrailingComma(types.parenR,!0)){u=!0;break}if(this.type===types.ellipsis){s=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===types.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}c.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var y=this.start,d=this.startLoc;if(this.expect(types.parenR),e&&!this.canInsertSemicolon()&&this.eat(types.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=h,this.awaitPos=f,this.parseParenArrowList(i,n,c);c.length&&!u||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(p,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=f||this.awaitPos,1<c.length?((t=this.startNodeAt(a,o)).expressions=c,this.finishNodeAt(t,"SequenceExpression",y,d)):t=c[0]}else t=this.parseParenExpression();return this.options.preserveParens?((e=this.startNodeAt(i,n)).expression=t,this.finishNode(e,"ParenthesizedExpression")):t},pp$3.parseParenItem=function(e){return e},pp$3.parseParenArrowList=function(e,t,i){return this.parseArrowExpression(this.startNodeAt(e,t),i)},[]),pp$4=(pp$3.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(types.dot))return e.meta=t,t=this.containsEsc,e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),t&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"'new.target' can only be used in functions"),this.finishNode(e,"MetaProperty");var t=this.start,i=this.startLoc,n=this.type===types._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),t,i,!0),n&&"ImportExpression"===e.callee.type&&this.raise(t,"Cannot use new with import()"),this.eat(types.parenL)?e.arguments=this.parseExprList(types.parenR,8<=this.options.ecmaVersion,!1):e.arguments=empty$1,this.finishNode(e,"NewExpression")},pp$3.parseTemplateElement=function(e){var e=e.isTagged,t=this.startNode();return this.type===types.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),t.value={raw:this.value,cooked:null}):t.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),t.tail=this.type===types.backQuote,this.finishNode(t,"TemplateElement")},pp$3.parseTemplate=function(e){var t=(e=void 0===e?{}:e).isTagged,i=(void 0===t&&(t=!1),this.startNode()),n=(this.next(),i.expressions=[],this.parseTemplateElement({isTagged:t}));for(i.quasis=[n];!n.tail;)this.type===types.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(types.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(types.braceR),i.quasis.push(n=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(i,"TemplateLiteral")},pp$3.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===types.name||this.type===types.num||this.type===types.string||this.type===types.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===types.star)&&!lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$3.parseObj=function(e,t){var i=this.startNode(),n=!0,r={};for(i.properties=[],this.next();!this.eat(types.braceR);){if(n)n=!1;else if(this.expect(types.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(types.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,r,t),i.properties.push(s)}return this.finishNode(i,e?"ObjectPattern":"ObjectExpression")},pp$3.parseProperty=function(e,t){var i,n,r,s,a=this.startNode();if(9<=this.options.ecmaVersion&&this.eat(types.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===types.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===types.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===types.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));6<=this.options.ecmaVersion&&(a.method=!1,a.shorthand=!1,(e||t)&&(r=this.start,s=this.startLoc),e||(i=this.eat(types.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&8<=this.options.ecmaVersion&&!i&&this.isAsyncProp(a)?(n=!0,i=9<=this.options.ecmaVersion&&this.eat(types.star),this.parsePropertyName(a,t)):n=!1,this.parsePropertyValue(a,e,i,n,r,s,t,o),this.finishNode(a,"Property")},pp$3.parsePropertyValue=function(e,t,i,n,r,s,a,o){(i||n)&&this.type===types.colon&&this.unexpected(),this.eat(types.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init"):6<=this.options.ecmaVersion&&this.type===types.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(i,n)):t||o||!(5<=this.options.ecmaVersion)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===types.comma||this.type===types.braceR||this.type===types.eq?6<=this.options.ecmaVersion&&!e.computed&&"Identifier"===e.key.type?((i||n)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),e.kind="init",t?e.value=this.parseMaybeDefault(r,s,e.key):this.type===types.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected():((i||n)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1),o="get"===e.kind?0:1,e.value.params.length!==o?(t=e.value.start,"get"===e.kind?this.raiseRecoverable(t,"getter should have no params"):this.raiseRecoverable(t,"setter should have exactly one param")):"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params"))},pp$3.parsePropertyName=function(e){if(6<=this.options.ecmaVersion){if(this.eat(types.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(types.bracketR),e.key;e.computed=!1}return e.key=this.type===types.num||this.type===types.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},pp$3.initFunction=function(e){e.id=null,6<=this.options.ecmaVersion&&(e.generator=e.expression=!1),8<=this.options.ecmaVersion&&(e.async=!1)},pp$3.parseMethod=function(e,t,i){var n=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(n),6<=this.options.ecmaVersion&&(n.generator=e),8<=this.options.ecmaVersion&&(n.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags$1(t,n.generator)|SCOPE_SUPER$1|(i?SCOPE_DIRECT_SUPER$1:0)),this.expect(types.parenL),n.params=this.parseBindingList(types.parenR,!1,8<=this.options.ecmaVersion),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(n,"FunctionExpression")},pp$3.parseArrowExpression=function(e,t,i){var n=this.yieldPos,r=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(functionFlags$1(i,!1)|SCOPE_ARROW$1),this.initFunction(e),8<=this.options.ecmaVersion&&(e.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=n,this.awaitPos=r,this.awaitIdentPos=s,this.finishNode(e,"ArrowFunctionExpression")},pp$3.parseFunctionBody=function(e,t,i){var n=t&&this.type!==types.braceL,r=this.strict,s=!1;n?(e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1)):(n=7<=this.options.ecmaVersion&&!this.isSimpleParamList(e.params),r&&!n||(s=this.strictDirective(this.end))&&n&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"),n=this.labels,this.labels=[],s&&(this.strict=!0),this.checkParams(e,!r&&!s&&!t&&!i&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLVal(e.id,BIND_OUTSIDE),e.body=this.parseBlock(!1,void 0,s&&!r),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=n),this.exitScope()},pp$3.isSimpleParamList=function(e){for(var t=0,i=e;t<i.length;t+=1)if("Identifier"!==i[t].type)return!1;return!0},pp$3.checkParams=function(e,t){for(var i={},n=0,r=e.params;n<r.length;n+=1){var s=r[n];this.checkLVal(s,BIND_VAR,t?null:i)}},pp$3.parseExprList=function(e,t,i,n){for(var r=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(types.comma),t&&this.afterTrailingComma(e))break;var a=void 0;i&&this.type===types.comma?a=null:this.type===types.ellipsis?(a=this.parseSpread(n),n&&this.type===types.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):a=this.parseMaybeAssign(!1,n),r.push(a)}return r},pp$3.checkUnreserved=function(e){var t=e.start,i=e.end,e=e.name;this.inGenerator&&"yield"===e&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===e&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(e)&&this.raise(t,"Unexpected keyword '"+e+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,i).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(e)&&(this.inAsync||"await"!==e||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+e+"' is reserved"))},pp$3.parseIdent=function(e,t){var i=this.startNode();return this.type===types.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,"class"!==i.name&&"function"!==i.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(i,"Identifier"),e||(this.checkUnreserved(i),"await"!==i.name||this.awaitIdentPos||(this.awaitIdentPos=i.start)),i},pp$3.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===types.semi||this.canInsertSemicolon()||this.type!==types.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(types.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},pp$3.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!1),this.finishNode(e,"AwaitExpression")},Parser$2.prototype),pp$5=(pp$4.raise=function(e,t){var i=getLineInfo(this.input,e),t=(t+=" ("+i.line+":"+i.column+")",new SyntaxError(t));throw t.pos=e,t.loc=i,t.raisedAt=this.pos,t},pp$4.raiseRecoverable=pp$4.raise,pp$4.curPosition=function(){if(this.options.locations)return new Position(this.curLine,this.pos-this.lineStart)},Parser$2.prototype),Scope=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]},Node=(pp$5.enterScope=function(e){this.scopeStack.push(new Scope(e))},pp$5.exitScope=function(){this.scopeStack.pop()},pp$5.treatFunctionsAsVarInScope=function(e){return e.flags&SCOPE_FUNCTION$1||!this.inModule&&e.flags&SCOPE_TOP},pp$5.declareName=function(e,t,i){var n=!1;if(t===BIND_LEXICAL){var r=this.currentScope(),n=-1<r.lexical.indexOf(e)||-1<r.functions.indexOf(e)||-1<r.var.indexOf(e);r.lexical.push(e),this.inModule&&r.flags&SCOPE_TOP&&delete this.undefinedExports[e]}else if(t===BIND_SIMPLE_CATCH)this.currentScope().lexical.push(e);else if(t===BIND_FUNCTION){r=this.currentScope();n=this.treatFunctionsAsVar?-1<r.lexical.indexOf(e):-1<r.lexical.indexOf(e)||-1<r.var.indexOf(e),r.functions.push(e)}else for(var s=this.scopeStack.length-1;0<=s;--s){var a=this.scopeStack[s];if(-1<a.lexical.indexOf(e)&&!(a.flags&SCOPE_SIMPLE_CATCH&&a.lexical[0]===e)||!this.treatFunctionsAsVarInScope(a)&&-1<a.functions.indexOf(e)){n=!0;break}if(a.var.push(e),this.inModule&&a.flags&SCOPE_TOP&&delete this.undefinedExports[e],a.flags&SCOPE_VAR)break}n&&this.raiseRecoverable(i,"Identifier '"+e+"' has already been declared")},pp$5.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},pp$5.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},pp$5.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&SCOPE_VAR)return t}},pp$5.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&SCOPE_VAR&&!(t.flags&SCOPE_ARROW$1))return t}},function(e,t,i){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new SourceLocation(e,i)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])}),pp$6=Parser$2.prototype;function finishNodeAt(e,t,i,n){return e.type=t,e.end=i,this.options.locations&&(e.loc.end=n),this.options.ranges&&(e.range[1]=i),e}pp$6.startNode=function(){return new Node(this,this.start,this.startLoc)},pp$6.startNodeAt=function(e,t){return new Node(this,e,t)},pp$6.finishNode=function(e,t){return finishNodeAt.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},pp$6.finishNodeAt=function(e,t,i,n){return finishNodeAt.call(this,e,t,i,n)};var TokContext=function(e,t,i,n,r){this.token=e,this.isExpr=!!t,this.preserveSpace=!!i,this.override=n,this.generator=!!r},types$1={b_stat:new TokContext("{",!1),b_expr:new TokContext("{",!0),b_tmpl:new TokContext("${",!1),p_stat:new TokContext("(",!1),p_expr:new TokContext("(",!0),q_tmpl:new TokContext("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new TokContext("function",!1),f_expr:new TokContext("function",!0),f_expr_gen:new TokContext("function",!0,!1,null,!0),f_gen:new TokContext("function",!1,!1,null,!0)},pp$7=Parser$2.prototype,ecma9BinaryProperties=(pp$7.initialContext=function(){return[types$1.b_stat]},pp$7.braceIsBlock=function(e){var t=this.curContext();return t===types$1.f_expr||t===types$1.f_stat||(e!==types.colon||t!==types$1.b_stat&&t!==types$1.b_expr?e===types._return||e===types.name&&this.exprAllowed?lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):e===types._else||e===types.semi||e===types.eof||e===types.parenR||e===types.arrow||(e===types.braceL?t===types$1.b_stat:e!==types._var&&e!==types._const&&e!==types.name&&!this.exprAllowed):!t.isExpr)},pp$7.inGeneratorContext=function(){for(var e=this.context.length-1;1<=e;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},pp$7.updateContext=function(e){var t,i=this.type;i.keyword&&e===types.dot?this.exprAllowed=!1:(t=i.updateContext)?t.call(this,e):this.exprAllowed=i.beforeExpr},types.parenR.updateContext=types.braceR.updateContext=function(){var e;1===this.context.length?this.exprAllowed=!0:((e=this.context.pop())===types$1.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr)},types.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?types$1.b_stat:types$1.b_expr),this.exprAllowed=!0},types.dollarBraceL.updateContext=function(){this.context.push(types$1.b_tmpl),this.exprAllowed=!0},types.parenL.updateContext=function(e){e=e===types._if||e===types._for||e===types._with||e===types._while;this.context.push(e?types$1.p_stat:types$1.p_expr),this.exprAllowed=!0},types.incDec.updateContext=function(){},types._function.updateContext=types._class.updateContext=function(e){!e.beforeExpr||e===types.semi||e===types._else||e===types._return&&lineBreak.test(this.input.slice(this.lastTokEnd,this.start))||(e===types.colon||e===types.braceL)&&this.curContext()===types$1.b_stat?this.context.push(types$1.f_stat):this.context.push(types$1.f_expr),this.exprAllowed=!1},types.backQuote.updateContext=function(){this.curContext()===types$1.q_tmpl?this.context.pop():this.context.push(types$1.q_tmpl),this.exprAllowed=!1},types.star.updateContext=function(e){e===types._function&&(e=this.context.length-1,this.context[e]===types$1.f_expr?this.context[e]=types$1.f_expr_gen:this.context[e]=types$1.f_gen),this.exprAllowed=!0},types.name.updateContext=function(e){var t=!1;6<=this.options.ecmaVersion&&e!==types.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t},"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS"),ecma10BinaryProperties=ecma9BinaryProperties+" Extended_Pictographic",ecma11BinaryProperties=ecma10BinaryProperties,unicodeBinaryProperties={9:ecma9BinaryProperties,10:ecma10BinaryProperties,11:ecma10BinaryProperties},unicodeGeneralCategoryValues="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ecma9ScriptValues="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ecma10ScriptValues=ecma9ScriptValues+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ecma11ScriptValues=ecma10ScriptValues+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",unicodeScriptValues={9:ecma9ScriptValues,10:ecma10ScriptValues,11:ecma11ScriptValues},data={};function buildUnicodeData(e){e=data[e]={binary:wordsRegexp(unicodeBinaryProperties[e]+" "+unicodeGeneralCategoryValues),nonBinary:{General_Category:wordsRegexp(unicodeGeneralCategoryValues),Script:wordsRegexp(unicodeScriptValues[e])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}buildUnicodeData(9),buildUnicodeData(10),buildUnicodeData(11);var pp$8=Parser$2.prototype,RegExpValidationState=function(e){this.parser=e,this.validFlags="gim"+(6<=e.options.ecmaVersion?"uy":"")+(9<=e.options.ecmaVersion?"s":""),this.unicodeProperties=data[11<=e.options.ecmaVersion?11:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function isSyntaxCharacter(e){return 36===e||40<=e&&e<=43||46===e||63===e||91<=e&&e<=94||123<=e&&e<=125}function isRegExpIdentifierStart(e){return isIdentifierStart(e,!0)||36===e||95===e}function isRegExpIdentifierPart(e){return isIdentifierChar(e,!0)||36===e||95===e||8204===e||8205===e}function isControlLetter(e){return 65<=e&&e<=90||97<=e&&e<=122}function isValidUnicode(e){return 0<=e&&e<=1114111}function isCharacterClassEscape(e){return 100===e||68===e||115===e||83===e||119===e||87===e}function isUnicodePropertyNameCharacter(e){return isControlLetter(e)||95===e}function isUnicodePropertyValueCharacter(e){return isUnicodePropertyNameCharacter(e)||isDecimalDigit(e)}function isDecimalDigit(e){return 48<=e&&e<=57}function isHexDigit(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function hexToInt(e){return 65<=e&&e<=70?e-65+10:97<=e&&e<=102?e-97+10:e-48}function isOctalDigit(e){return 48<=e&&e<=55}RegExpValidationState.prototype.reset=function(e,t,i){var n=-1!==i.indexOf("u");this.start=0|e,this.source=t+"",this.flags=i,this.switchU=n&&6<=this.parser.options.ecmaVersion,this.switchN=n&&9<=this.parser.options.ecmaVersion},RegExpValidationState.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},RegExpValidationState.prototype.at=function(e,t){void 0===t&&(t=!1);var i=this.source,n=i.length;if(n<=e)return-1;var r=i.charCodeAt(e);if(!t&&!this.switchU||r<=55295||57344<=r||n<=e+1)return r;t=i.charCodeAt(e+1);return 56320<=t&&t<=57343?(r<<10)+t-56613888:r},RegExpValidationState.prototype.nextIndex=function(e,t){void 0===t&&(t=!1);var i=this.source,n=i.length;if(n<=e)return n;var r=i.charCodeAt(e);return!t&&!this.switchU||r<=55295||57344<=r||n<=e+1||(t=i.charCodeAt(e+1))<56320||57343<t?e+1:e+2},RegExpValidationState.prototype.current=function(e){return this.at(this.pos,e=void 0===e?!1:e)},RegExpValidationState.prototype.lookahead=function(e){return this.at(this.nextIndex(this.pos,e=void 0===e?!1:e),e)},RegExpValidationState.prototype.advance=function(e){this.pos=this.nextIndex(this.pos,e=void 0===e?!1:e)},RegExpValidationState.prototype.eat=function(e,t){return this.current(t=void 0===t?!1:t)===e&&(this.advance(t),!0)},pp$8.validateRegExpFlags=function(e){for(var t=e.validFlags,i=e.flags,n=0;n<i.length;n++){var r=i.charAt(n);-1===t.indexOf(r)&&this.raise(e.start,"Invalid regular expression flag"),-1<i.indexOf(r,n+1)&&this.raise(e.start,"Duplicate regular expression flag")}},pp$8.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&9<=this.options.ecmaVersion&&0<e.groupNames.length&&(e.switchN=!0,this.regexp_pattern(e))},pp$8.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,i=e.backReferenceNames;t<i.length;t+=1){var n=i[t];-1===e.groupNames.indexOf(n)&&e.raise("Invalid named capture referenced")}},pp$8.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},pp$8.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},pp$8.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},pp$8.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var i=!1;if(9<=this.options.ecmaVersion&&(i=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!i,!0}return e.pos=t,!1},pp$8.regexp_eatQuantifier=function(e,t){return!!this.regexp_eatQuantifierPrefix(e,t=void 0===t?!1:t)&&(e.eat(63),!0)},pp$8.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},pp$8.regexp_eatBracedQuantifier=function(e,t){var i=e.pos;if(e.eat(123)){var n,r=-1;if(this.regexp_eatDecimalDigits(e)&&(n=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue),e.eat(125)))return-1!==r&&r<n&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=i}return!1},pp$8.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},pp$8.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},pp$8.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},pp$8.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(9<=this.options.ecmaVersion?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},pp$8.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},pp$8.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},pp$8.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!isSyntaxCharacter(t)&&(e.lastIntValue=t,e.advance(),!0)},pp$8.regexp_eatPatternCharacters=function(e){for(var t,i=e.pos;-1!==(t=e.current())&&!isSyntaxCharacter(t);)e.advance();return e.pos!==i},pp$8.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||40<=t&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},pp$8.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},pp$8.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},pp$8.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=codePointToString(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=codePointToString(e.lastIntValue);return!0}return!1},pp$8.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,i=11<=this.options.ecmaVersion,n=e.current(i);return e.advance(i),isRegExpIdentifierStart(n=92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e,i)?e.lastIntValue:n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},pp$8.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,i=11<=this.options.ecmaVersion,n=e.current(i);return e.advance(i),isRegExpIdentifierPart(n=92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e,i)?e.lastIntValue:n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},pp$8.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},pp$8.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var i=e.lastIntValue;if(e.switchU)return i>e.maxBackReference&&(e.maxBackReference=i),!0;if(i<=e.numCapturingParens)return!0;e.pos=t}return!1},pp$8.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},pp$8.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},pp$8.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},pp$8.regexp_eatZero=function(e){return 48===e.current()&&!isDecimalDigit(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},pp$8.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},pp$8.regexp_eatControlLetter=function(e){var t=e.current();return!!isControlLetter(t)&&(e.lastIntValue=t%32,e.advance(),!0)},pp$8.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){var i=e.pos,t=(t=void 0===t?!1:t)||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var n=e.lastIntValue;if(t&&55296<=n&&n<=56319){var r=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(56320<=s&&s<=57343)return e.lastIntValue=1024*(n-55296)+(s-56320)+65536,!0}e.pos=r,e.lastIntValue=n}return!0}if(t&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&isValidUnicode(e.lastIntValue))return!0;t&&e.raise("Invalid unicode escape"),e.pos=i}return!1},pp$8.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},pp$8.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(49<=t&&t<=57){for(;e.lastIntValue=10*e.lastIntValue+(t-48),e.advance(),48<=(t=e.current())&&t<=57;);return!0}return!1},pp$8.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(isCharacterClassEscape(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&9<=this.options.ecmaVersion&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},pp$8.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var i,n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e))return i=e.lastStringValue,this.regexp_validateUnicodePropertyNameAndValue(e,n,i),!0}return e.pos=t,!!this.regexp_eatLoneUnicodePropertyNameOrValue(e)&&(n=e.lastStringValue,this.regexp_validateUnicodePropertyNameOrValue(e,n),!0)},pp$8.regexp_validateUnicodePropertyNameAndValue=function(e,t,i){has(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(i)||e.raise("Invalid property value")},pp$8.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},pp$8.regexp_eatUnicodePropertyName=function(e){var t;for(e.lastStringValue="";isUnicodePropertyNameCharacter(t=e.current());)e.lastStringValue+=codePointToString(t),e.advance();return""!==e.lastStringValue},pp$8.regexp_eatUnicodePropertyValue=function(e){var t;for(e.lastStringValue="";isUnicodePropertyValueCharacter(t=e.current());)e.lastStringValue+=codePointToString(t),e.advance();return""!==e.lastStringValue},pp$8.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},pp$8.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},pp$8.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t,i=e.lastIntValue;e.eat(45)&&this.regexp_eatClassAtom(e)&&(t=e.lastIntValue,!e.switchU||-1!==i&&-1!==t||e.raise("Invalid character class"),-1!==i&&-1!==t&&t<i&&e.raise("Range out of order in character class"))}},pp$8.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;e.switchU&&(99!==(i=e.current())&&!isOctalDigit(i)||e.raise("Invalid class escape"),e.raise("Invalid escape")),e.pos=t}var i=e.current();return 93!==i&&(e.lastIntValue=i,e.advance(),!0)},pp$8.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},pp$8.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!isDecimalDigit(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},pp$8.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},pp$8.regexp_eatDecimalDigits=function(e){var t,i=e.pos;for(e.lastIntValue=0;isDecimalDigit(t=e.current());)e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();return e.pos!==i},pp$8.regexp_eatHexDigits=function(e){var t,i=e.pos;for(e.lastIntValue=0;isHexDigit(t=e.current());)e.lastIntValue=16*e.lastIntValue+hexToInt(t),e.advance();return e.pos!==i},pp$8.regexp_eatLegacyOctalEscapeSequence=function(e){var t,i;return!!this.regexp_eatOctalDigit(e)&&(t=e.lastIntValue,this.regexp_eatOctalDigit(e)?(i=e.lastIntValue,t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*i+e.lastIntValue:e.lastIntValue=8*t+i):e.lastIntValue=t,!0)},pp$8.regexp_eatOctalDigit=function(e){var t=e.current();return isOctalDigit(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},pp$8.regexp_eatFixedHexDigits=function(e,t){for(var i=e.pos,n=e.lastIntValue=0;n<t;++n){var r=e.current();if(!isHexDigit(r))return e.pos=i,!1;e.lastIntValue=16*e.lastIntValue+hexToInt(r),e.advance()}return!0};var Token=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new SourceLocation(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},pp$9=Parser$2.prototype;function stringToNumber(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function stringToBigInt(e){return"function"!=typeof BigInt?null:BigInt(e.replace(/_/g,""))}function codePointToString$1(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}pp$9.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Token(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},pp$9.getToken=function(){return this.next(),new Token(this)},"undefined"!=typeof Symbol&&(pp$9[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===types.eof,value:e}}}}),pp$9.curContext=function(){return this.context[this.context.length-1]},pp$9.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(types.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},pp$9.readToken=function(e){return isIdentifierStart(e,6<=this.options.ecmaVersion)||92===e?this.readWord():this.getTokenFromCode(e)},pp$9.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||57344<=e?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},pp$9.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),i=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(lineBreakG.lastIndex=i;(e=lineBreakG.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(i+2,n),i,this.pos,t,this.curPosition())},pp$9.skipLineComment=function(e){for(var t=this.pos,i=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!isNewLine(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,i,this.curPosition())},pp$9.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(8<e&&e<14||5760<=e&&nonASCIIwhitespace.test(String.fromCharCode(e))))break e;++this.pos}}},pp$9.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=e,this.value=t,this.updateContext(i)},pp$9.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(48<=e&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return 6<=this.options.ecmaVersion&&46===e&&46===t?(this.pos+=3,this.finishToken(types.ellipsis)):(++this.pos,this.finishToken(types.dot))},pp$9.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(types.assign,2):this.finishOp(types.slash,1)},pp$9.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),i=1,n=42===e?types.star:types.modulo;return 7<=this.options.ecmaVersion&&42===e&&42===t&&(++i,n=types.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(types.assign,i+1):this.finishOp(n,i)},pp$9.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t!==e)return 61===t?this.finishOp(types.assign,2):this.finishOp(124===e?types.bitwiseOR:types.bitwiseAND,1);if(12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2))return this.finishOp(types.assign,3);return this.finishOp(124===e?types.logicalOR:types.logicalAND,2)},pp$9.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(types.assign,2):this.finishOp(types.bitwiseXOR,1)},pp$9.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!lineBreak.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(types.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(types.assign,2):this.finishOp(types.plusMin,1)},pp$9.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),i=1;return t===e?(i=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(types.assign,i+1):this.finishOp(types.bitShift,i)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?this.finishOp(types.relational,i=61===t?2:i):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},pp$9.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(types.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(types.arrow)):this.finishOp(61===e?types.eq:types.prefix,1)},pp$9.readToken_question=function(){var e=this.options.ecmaVersion;if(11<=e){var t=this.input.charCodeAt(this.pos+1);if(46===t){var i=this.input.charCodeAt(this.pos+2);if(i<48||57<i)return this.finishOp(types.questionDot,2)}if(63===t){if(12<=e)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(types.assign,3);return this.finishOp(types.coalesce,2)}}return this.finishOp(types.question,1)},pp$9.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(types.parenL);case 41:return++this.pos,this.finishToken(types.parenR);case 59:return++this.pos,this.finishToken(types.semi);case 44:return++this.pos,this.finishToken(types.comma);case 91:return++this.pos,this.finishToken(types.bracketL);case 93:return++this.pos,this.finishToken(types.bracketR);case 123:return++this.pos,this.finishToken(types.braceL);case 125:return++this.pos,this.finishToken(types.braceR);case 58:return++this.pos,this.finishToken(types.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(types.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(types.prefix,1)}this.raise(this.pos,"Unexpected character '"+codePointToString$1(e)+"'")},pp$9.finishOp=function(e,t){var i=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,i)},pp$9.readRegexp=function(){for(var e,t,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(lineBreak.test(n)&&this.raise(i,"Unterminated regular expression"),e)e=!1;else{if("["===n)t=!0;else if("]"===n&&t)t=!1;else if("/"===n&&!t)break;e="\\"===n}++this.pos}var r=this.input.slice(i,this.pos),s=(++this.pos,this.pos),a=this.readWord1(),s=(this.containsEsc&&this.unexpected(s),this.regexpState||(this.regexpState=new RegExpValidationState(this))),s=(s.reset(i,r,a),this.validateRegExpFlags(s),this.validateRegExpPattern(s),null);try{s=new RegExp(r,a)}catch(e){}return this.finishToken(types.regexp,{pattern:r,flags:a,value:s})},pp$9.readInt=function(e,t,i){for(var n=12<=this.options.ecmaVersion&&void 0===t,r=i&&48===this.input.charCodeAt(this.pos),i=this.pos,s=0,a=0,o=0,c=null==t?1/0:t;o<c;++o,++this.pos){var l=this.input.charCodeAt(this.pos),u=void 0;if(n&&95===l)r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===a&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===o&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=l;else{if(e<=(u=97<=l?l-97+10:65<=l?l-65+10:48<=l&&l<=57?l-48:1/0))break;a=l,s=s*e+u}}return n&&95===a&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===i||null!=t&&this.pos-i!==t?null:s},pp$9.readRadixNumber=function(e){var t=this.pos,i=(this.pos+=2,this.readInt(e));return null==i&&this.raise(this.start+2,"Expected number in radix "+e),11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(i=stringToBigInt(this.input.slice(t,this.pos)),++this.pos):isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types.num,i)},pp$9.readNumber=function(e){var t=this.pos,i=(e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number"),2<=this.pos-t&&48===this.input.charCodeAt(t)),n=(i&&this.strict&&this.raise(t,"Invalid number"),this.input.charCodeAt(this.pos));if(!i&&!e&&11<=this.options.ecmaVersion&&110===n)return e=stringToBigInt(this.input.slice(t,this.pos)),++this.pos,isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types.num,e);i&&/[89]/.test(this.input.slice(t,this.pos))&&(i=!1),46!==n||i||(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),69!==n&&101!==n||i||(43!==(n=this.input.charCodeAt(++this.pos))&&45!==n||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");e=stringToNumber(this.input.slice(t,this.pos),i);return this.finishToken(types.num,e)},pp$9.readCodePoint=function(){var e,t;return 123===this.input.charCodeAt(this.pos)?(this.options.ecmaVersion<6&&this.unexpected(),e=++this.pos,t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,1114111<t&&this.invalidStringToken(e,"Code point out of bounds")):t=this.readHexChar(4),t},pp$9.readString=function(e){for(var t="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===e)break;92===n?(t=(t+=this.input.slice(i,this.pos))+this.readEscapedChar(!1),i=this.pos):(isNewLine(n,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(i,this.pos++),this.finishToken(types.string,t)};var INVALID_TEMPLATE_ESCAPE_ERROR={},version=(pp$9.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==INVALID_TEMPLATE_ESCAPE_ERROR)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},pp$9.invalidStringToken=function(e,t){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw INVALID_TEMPLATE_ESCAPE_ERROR;this.raise(e,t)},pp$9.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(96===i||36===i&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==types.template&&this.type!==types.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(types.template,e)):36===i?(this.pos+=2,this.finishToken(types.dollarBraceL)):(++this.pos,this.finishToken(types.backQuote));if(92===i)e=(e+=this.input.slice(t,this.pos))+this.readEscapedChar(!0),t=this.pos;else if(isNewLine(i)){switch(e+=this.input.slice(t,this.pos),++this.pos,i){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(i)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},pp$9.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(types.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},pp$9.readEscapedChar=function(e){var t,i,n=this.input.charCodeAt(++this.pos);switch(++this.pos,n){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return codePointToString$1(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(e)return t=this.pos-1,this.invalidStringToken(t,"Invalid escape sequence in template string"),null;default:return 48<=n&&n<=55?(t=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],255<(i=parseInt(t,8))&&(t=t.slice(0,-1),i=parseInt(t,8)),this.pos+=t.length-1,n=this.input.charCodeAt(this.pos),"0"===t&&56!==n&&57!==n||!this.strict&&!e||this.invalidStringToken(this.pos-1-t.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)):isNewLine(n)?"":String.fromCharCode(n)}},pp$9.readHexChar=function(e){var t=this.pos,e=this.readInt(16,e);return null===e&&this.invalidStringToken(t,"Bad character escape sequence"),e},pp$9.readWord1=function(){for(var e="",t=!(this.containsEsc=!1),i=this.pos,n=6<=this.options.ecmaVersion;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(isIdentifierChar(r,n))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,e+=this.input.slice(i,this.pos);var r=this.pos,s=(117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,this.readCodePoint());(t?isIdentifierStart:isIdentifierChar)(s,n)||this.invalidStringToken(r,"Invalid Unicode escape"),e+=codePointToString$1(s),i=this.pos}t=!1}return e+this.input.slice(i,this.pos)},pp$9.readWord=function(){var e=this.readWord1(),t=types.name;return this.keywords.test(e)&&(t=keywords$1[e]),this.finishToken(t,e)},"7.4.1");function parse(e,t){return Parser$2.parse(e,t)}function parseExpressionAt(e,t,i){return Parser$2.parseExpressionAt(e,t,i)}function tokenizer(e,t){return Parser$2.tokenizer(e,t)}Parser$2.acorn={Parser:Parser$2,version:version,defaultOptions:defaultOptions$1,Position:Position,SourceLocation:SourceLocation,getLineInfo:getLineInfo,Node:Node,TokenType:TokenType$1,tokTypes:types,keywordTypes:keywords$1,TokContext:TokContext,tokContexts:types$1,isIdentifierChar:isIdentifierChar,isIdentifierStart:isIdentifierStart,Token:Token,isNewLine:isNewLine,lineBreak:lineBreak,lineBreakG:lineBreakG,nonASCIIwhitespace:nonASCIIwhitespace};var acorn$1=Object.freeze({__proto__:null,Node:Node,Parser:Parser$2,Position:Position,SourceLocation:SourceLocation,TokContext:TokContext,Token:Token,TokenType:TokenType$1,defaultOptions:defaultOptions$1,getLineInfo:getLineInfo,isIdentifierChar:isIdentifierChar,isIdentifierStart:isIdentifierStart,isNewLine:isNewLine,keywordTypes:keywords$1,lineBreak:lineBreak,lineBreakG:lineBreakG,nonASCIIwhitespace:nonASCIIwhitespace,parse:parse,parseExpressionAt:parseExpressionAt,tokContexts:types$1,tokTypes:types,tokenizer:tokenizer,version:version}),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}function getCjsExportFromNamespace(e){return e&&e.default||e}var lodash=createCommonjsModule(function(w,P){!function(){var Gs,Fs="Expected a function",ga="__lodash_hash_undefined__",_a="__lodash_placeholder__",Us=128,$s=9007199254740991,va=NaN,Vs=4294967295,ka=[["ary",Us],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Xs="[object Arguments]",Ta="[object Array]",Js="[object Boolean]",qs="[object Date]",Sa="[object Error]",xa="[object Function]",ba="[object GeneratorFunction]",Ws="[object Map]",Hs="[object Number]",Ks="[object Object]",Ea="[object Promise]",Ys="[object RegExp]",Qs="[object Set]",Zs="[object String]",Ca="[object Symbol]",ea="[object WeakMap]",Ia="[object ArrayBuffer]",ta="[object DataView]",Aa="[object Float32Array]",wa="[object Float64Array]",Pa="[object Int8Array]",Na="[object Int16Array]",Oa="[object Int32Array]",Da="[object Uint8Array]",Ra="[object Uint8ClampedArray]",La="[object Uint16Array]",Ma="[object Uint32Array]",za=/\b__p \+= '';/g,ja=/\b(__p \+=) '' \+/g,Ba=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ga=/&(?:amp|lt|gt|quot|#39);/g,Fa=/[&<>"']/g,Ua=RegExp(Ga.source),$a=RegExp(Fa.source),Va=/<%-([\s\S]+?)%>/g,Xa=/<%([\s\S]+?)%>/g,Ja=/<%=([\s\S]+?)%>/g,qa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wa=/^\w*$/,Ha=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ka=/[\\^$.*+?()[\]{}|]/g,Ya=RegExp(Ka.source),Qa=/^\s+/,s=/\s/,Za=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eo=/\{\n\/\* \[wrapped with (.+)\] \*/,to=/,? & /,io=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,no=/[()=,{}\[\]\/\s]/,ro=/\\(\\)?/g,so=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ao=/\w*$/,oo=/^[-+]0x[0-9a-f]+$/i,co=/^0b[01]+$/i,lo=/^\[object .+?Constructor\]$/,uo=/^0o[0-7]+$/i,po=/^(?:0|[1-9]\d*)$/,ho=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fo=/($^)/,yo=/['\n\r\u2028\u2029\\]/g,a="\\ud800-\\udfff",o="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",c="\\u2700-\\u27bf",e="a-z\\xdf-\\xf6\\xf8-\\xff",t="A-Z\\xc0-\\xd6\\xd8-\\xde",l="\\ufe0e\\ufe0f",u="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",p="['’]",i="["+a+"]",h="["+u+"]",f="["+o+"]",y="["+c+"]",d="["+e+"]",u="[^"+a+u+"\\d+"+c+e+t+"]",c="\\ud83c[\\udffb-\\udfff]",e="[^"+a+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",n="[\\ud800-\\udbff][\\udc00-\\udfff]",t="["+t+"]",g="\\u200d",_="(?:"+d+"|"+u+")",u="(?:"+t+"|"+u+")",v="(?:['’](?:d|ll|m|re|s|t|ve))?",k="(?:['’](?:D|LL|M|RE|S|T|VE))?",T="(?:"+f+"|"+c+")"+"?",S="["+l+"]?",S=S+T+("(?:"+g+"(?:"+[e,m,n].join("|")+")"+S+T+")*"),T="(?:"+[y,m,n].join("|")+")"+S,y="(?:"+[e+f+"?",f,m,n,i].join("|")+")",mo=RegExp(p,"g"),go=RegExp(f,"g"),x=RegExp(c+"(?="+c+")|"+y+S,"g"),_o=RegExp([t+"?"+d+"+"+v+"(?="+[h,t,"$"].join("|")+")",u+"+"+k+"(?="+[h,t+_,"$"].join("|")+")",t+"?"+_+"+"+v,t+"+"+k,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",T].join("|"),"g"),b=RegExp("["+g+a+o+l+"]"),vo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ko=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],To=-1,ia={},na=(ia[Aa]=ia[wa]=ia[Pa]=ia[Na]=ia[Oa]=ia[Da]=ia[Ra]=ia[La]=ia[Ma]=!0,ia[Xs]=ia[Ta]=ia[Ia]=ia[Js]=ia[ta]=ia[qs]=ia[Sa]=ia[xa]=ia[Ws]=ia[Hs]=ia[Ks]=ia[Ys]=ia[Qs]=ia[Zs]=ia[ea]=!1,{}),E=(na[Xs]=na[Ta]=na[Ia]=na[ta]=na[Js]=na[qs]=na[Aa]=na[wa]=na[Pa]=na[Na]=na[Oa]=na[Ws]=na[Hs]=na[Ks]=na[Ys]=na[Qs]=na[Zs]=na[Ca]=na[Da]=na[Ra]=na[La]=na[Ma]=!0,na[Sa]=na[xa]=na[ea]=!1,{"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"}),So=parseFloat,xo=parseInt,e="object"==_typeof(commonjsGlobal)&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,m="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,ra=e||m||Function("return this")(),n=P&&!P.nodeType&&P,r=n&&w&&!w.nodeType&&w,bo=r&&r.exports===n,C=bo&&e.process,i=function(){try{var e=r&&r.require&&r.require("util").types;return e?e:C&&C.binding&&C.binding("util")}catch(e){}}(),Eo=i&&i.isArrayBuffer,Co=i&&i.isDate,Io=i&&i.isMap,Ao=i&&i.isRegExp,wo=i&&i.isSet,Po=i&&i.isTypedArray;function sa(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function No(e,t,i,n){for(var r=-1,s=null==e?0:e.length;++r<s;){var a=e[r];t(n,a,i(a),e)}return n}function aa(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}function Oo(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function Do(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function oa(e,t){for(var i=-1,n=null==e?0:e.length,r=0,s=[];++i<n;){var a=e[i];t(a,i,e)&&(s[r++]=a)}return s}function Ro(e,t){return!!(null==e?0:e.length)&&-1<ua(e,t,0)}function Lo(e,t,i){for(var n=-1,r=null==e?0:e.length;++n<r;)if(i(t,e[n]))return!0;return!1}function ca(e,t){for(var i=-1,n=null==e?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}function la(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e}function Mo(e,t,i,n){var r=-1,s=null==e?0:e.length;for(n&&s&&(i=e[++r]);++r<s;)i=t(i,e[r],r,e);return i}function zo(e,t,i,n){var r=null==e?0:e.length;for(n&&r&&(i=e[--r]);r--;)i=t(i,e[r],r,e);return i}function jo(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}var I=Vo("length");function Bo(e,n,t){var r;return t(e,function(e,t,i){if(n(e,t,i))return r=t,!1}),r}function Go(e,t,i,n){for(var r=e.length,s=i+(n?1:-1);n?s--:++s<r;)if(t(e[s],s,e))return s;return-1}function ua(e,t,i){if(t!=t)return Go(e,Uo,i);for(var n=e,r=t,s=i-1,a=n.length;++s<a;)if(n[s]===r)return s;return-1}function Fo(e,t,i,n){for(var r=i-1,s=e.length;++r<s;)if(n(e[r],t))return r;return-1}function Uo(e){return e!=e}function $o(e,t){var i=null==e?0:e.length;return i?Jo(e,t)/i:va}function Vo(t){return function(e){return null==e?Gs:e[t]}}function A(t){return function(e){return null==t?Gs:t[e]}}function Xo(e,n,r,s,t){return t(e,function(e,t,i){r=s?(s=!1,e):n(r,e,t,i)}),r}function Jo(e,t){for(var i,n=-1,r=e.length;++n<r;){var s=t(e[n]);s!==Gs&&(i=i===Gs?s:i+s)}return i}function qo(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function Wo(e){return e&&e.slice(0,sc(e)+1).replace(Qa,"")}function pa(t){return function(e){return t(e)}}function Ho(t,e){return ca(e,function(e){return t[e]})}function Ko(e,t){return e.has(t)}function Yo(e,t){for(var i=-1,n=e.length;++i<n&&-1<ua(t,e[i],0););return i}function Qo(e,t){for(var i=e.length;i--&&-1<ua(t,e[i],0););return i}var Zo=A({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ec=A({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tc(e){return"\\"+E[e]}function ha(e){return b.test(e)}function ic(e){var i=-1,n=Array(e.size);return e.forEach(function(e,t){n[++i]=[t,e]}),n}function nc(t,i){return function(e){return t(i(e))}}function fa(e,t){for(var i=-1,n=e.length,r=0,s=[];++i<n;){var a=e[i];a!==t&&a!==_a||(e[i]=_a,s[r++]=i)}return s}function rc(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function ya(e){return(ha(e)?function(e){var t=x.lastIndex=0;for(;x.test(e);)++t;return t}:I)(e)}function da(e){return ha(e)?e.match(x)||[]:e.split("")}function sc(e){for(var t=e.length;t--&&s.test(e.charAt(t)););return t}var ac=A({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var ma=function r(e){var S=(e=null==e?ra:ma.defaults(ra.Object(),e,ma.pick(ra,ko))).Array,s=e.Date,O=e.Error,D=e.Function,R=e.Math,d=e.Object,L=e.RegExp,U=e.String,_=e.TypeError,$=S.prototype,V=D.prototype,X=d.prototype,J=e["__core-js_shared__"],q=V.toString,M=X.hasOwnProperty,W=0,H=(V=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"",K=X.toString,Y=q.call(d),Q=ra._,Z=L("^"+q.call(M).replace(Ka,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=bo?e.Buffer:Gs,t=e.Symbol,ee=e.Uint8Array,te=V?V.allocUnsafe:Gs,ie=nc(d.getPrototypeOf,d),ne=d.create,re=X.propertyIsEnumerable,se=$.splice,ae=t?t.isConcatSpreadable:Gs,oe=t?t.iterator:Gs,ce=t?t.toStringTag:Gs,le=function(){try{var e=Yi(d,"defineProperty");return e({},"",{}),e}catch(e){}}(),ue=e.clearTimeout!==ra.clearTimeout&&e.clearTimeout,pe=s&&s.now!==ra.Date.now&&s.now,he=e.setTimeout!==ra.setTimeout&&e.setTimeout,fe=R.ceil,ye=R.floor,de=d.getOwnPropertySymbols,V=V?V.isBuffer:Gs,me=e.isFinite,ge=$.join,_e=nc(d.keys,d),v=R.max,x=R.min,ve=s.now,ke=e.parseInt,Te=R.random,Se=$.reverse,s=Yi(e,"DataView"),xe=Yi(e,"Map"),be=Yi(e,"Promise"),Ee=Yi(e,"Set"),e=Yi(e,"WeakMap"),Ce=Yi(d,"create"),Ie=e&&new e,Ae={},we=xn(s),Pe=xn(xe),Ne=xn(be),Oe=xn(Ee),De=xn(e),t=t?t.prototype:Gs,Re=t?t.valueOf:Gs,Le=t?t.toString:Gs;function y(e){if(F(e)&&!G(e)&&!(e instanceof g)){if(e instanceof m)return e;if(M.call(e,"__wrapped__"))return bn(e)}return new m(e)}var Me=function(e){if(!E(e))return{};if(ne)return ne(e);ze.prototype=e;e=new ze;return ze.prototype=Gs,e};function ze(){}function je(){}function m(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=Gs}function g(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Vs,this.__views__=[]}function Be(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Ge(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Fe(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Ue(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Fe;++t<i;)this.add(e[t])}function z(e){e=this.__data__=new Ge(e);this.size=e.size}function $e(e,t){var i,n=G(e),r=!n&&gr(e),s=!n&&!r&&vr(e),a=!n&&!r&&!s&&Pr(e),o=n||r||s||a,c=o?qo(e.length,U):[],l=c.length;for(i in e)!t&&!M.call(e,i)||o&&("length"==i||s&&("offset"==i||"parent"==i)||a&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||rn(i,l))||c.push(i);return c}function Ve(e){var t=e.length;return t?e[jt(0,t-1)]:Gs}function Xe(e,t){return vn(b(e),et(t,0,e.length))}function Je(e){return vn(b(e))}function qe(e,t,i){(i===Gs||B(e[t],i))&&(i!==Gs||t in e)||Qe(e,t,i)}function We(e,t,i){var n=e[t];M.call(e,t)&&B(n,i)&&(i!==Gs||t in e)||Qe(e,t,i)}function He(e,t){for(var i=e.length;i--;)if(B(e[i][0],t))return i;return-1}function Ke(e,n,r,s){return rt(e,function(e,t,i){n(s,e,r(e),i)}),s}function Ye(e,t){return e&&di(t,w(t),e)}function Qe(e,t,i){"__proto__"==t&&le?le(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Ze(e,t){for(var i=-1,n=t.length,r=S(n),s=null==e;++i<n;)r[i]=s?Gs:Vr(e,t[i]);return r}function et(e,t,i){return e==e&&(i!==Gs&&(e=e<=i?e:i),t!==Gs&&(e=t<=e?e:t)),e}function k(i,n,r,e,t,s){var a,o=1&n,c=2&n,l=4&n;if((a=r?t?r(i,e,t,s):r(i):a)!==Gs)return a;if(!E(i))return i;var u,e=G(i);if(e){if(a=function(e){var t=e.length,i=new e.constructor(t);t&&"string"==typeof e[0]&&M.call(e,"index")&&(i.index=e.index,i.input=e.input);return i}(i),!o)return b(i,a)}else{var p=j(i),h=p==xa||p==ba;if(vr(i))return li(i,o);if(p==Ks||p==Xs||h&&!t){if(a=c||h?{}:tn(i),!o)return c?(f=h=i,f=(u=a)&&di(f,P(f),u),di(h,Zi(h),f)):(h=Ye(a,u=i),di(u,Qi(u),h))}else{if(!na[p])return t?i:{};a=function(e,t,i){var n=e.constructor;switch(t){case Ia:return ui(e);case Js:case qs:return new n(+e);case ta:return function(e,t){t=t?ui(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,i);case Aa:case wa:case Pa:case Na:case Oa:case Da:case Ra:case La:case Ma:return pi(e,i);case Ws:return new n;case Hs:case Zs:return new n(e);case Ys:return function(e){var t=new e.constructor(e.source,ao.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Qs:return new n;case Ca:return function(e){return Re?d(Re.call(e)):{}}(e)}}(i,p,o)}}var f=(s=s||new z).get(i);if(f)return f;s.set(i,a),Ar(i)?i.forEach(function(e){a.add(k(e,n,r,e,i,s))}):br(i)&&i.forEach(function(e,t){a.set(t,k(e,n,r,t,i,s))});var y=e?Gs:(l?c?Xi:Vi:c?P:w)(i);return aa(y||i,function(e,t){y&&(e=i[t=e]),We(a,t,k(e,n,r,t,i,s))}),a}function tt(e,t,i){var n=i.length;if(null==e)return!n;for(e=d(e);n--;){var r=i[n],s=t[r],a=e[r];if(a===Gs&&!(r in e)||!s(a))return!1}return!0}function it(e,t,i){if("function"!=typeof e)throw new _(Fs);return dn(function(){e.apply(Gs,i)},t)}function nt(e,t,i,n){var r=-1,s=Ro,a=!0,o=e.length,c=[],l=t.length;if(!o)return c;i&&(t=ca(t,pa(i))),n?(s=Lo,a=!1):200<=t.length&&(s=Ko,a=!1,t=new Ue(t));e:for(;++r<o;){var u=e[r],p=null==i?u:i(u),u=n||0!==u?u:0;if(a&&p==p){for(var h=l;h--;)if(t[h]===p)continue e;c.push(u)}else s(t,p,n)||c.push(u)}return c}y.templateSettings={escape:Va,evaluate:Xa,interpolate:Ja,variable:"",imports:{_:y}},(y.prototype=je.prototype).constructor=y,(m.prototype=Me(je.prototype)).constructor=m,(g.prototype=Me(je.prototype)).constructor=g,Be.prototype.clear=function(){this.__data__=Ce?Ce(null):{},this.size=0},Be.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Be.prototype.get=function(e){var t,i=this.__data__;return Ce?(t=i[e])===ga?Gs:t:M.call(i,e)?i[e]:Gs},Be.prototype.has=function(e){var t=this.__data__;return Ce?t[e]!==Gs:M.call(t,e)},Be.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Ce&&t===Gs?ga:t,this},Ge.prototype.clear=function(){this.__data__=[],this.size=0},Ge.prototype.delete=function(e){var t=this.__data__;return!((e=He(t,e))<0)&&(e==t.length-1?t.pop():se.call(t,e,1),--this.size,!0)},Ge.prototype.get=function(e){var t=this.__data__;return(e=He(t,e))<0?Gs:t[e][1]},Ge.prototype.has=function(e){return-1<He(this.__data__,e)},Ge.prototype.set=function(e,t){var i=this.__data__,n=He(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this},Fe.prototype.clear=function(){this.size=0,this.__data__={hash:new Be,map:new(xe||Ge),string:new Be}},Fe.prototype.delete=function(e){return e=Hi(this,e).delete(e),this.size-=e?1:0,e},Fe.prototype.get=function(e){return Hi(this,e).get(e)},Fe.prototype.has=function(e){return Hi(this,e).has(e)},Fe.prototype.set=function(e,t){var i=Hi(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},Ue.prototype.add=Ue.prototype.push=function(e){return this.__data__.set(e,ga),this},Ue.prototype.has=function(e){return this.__data__.has(e)},z.prototype.clear=function(){this.__data__=new Ge,this.size=0},z.prototype.delete=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e},z.prototype.get=function(e){return this.__data__.get(e)},z.prototype.has=function(e){return this.__data__.has(e)},z.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Ge){var n=i.__data__;if(!xe||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Fe(n)}return i.set(e,t),this.size=i.size,this};var rt=_i(pt),st=_i(ht,!0);function at(e,n){var r=!0;return rt(e,function(e,t,i){return r=!!n(e,t,i)}),r}function ot(e,t,i){for(var n=-1,r=e.length;++n<r;){var s,a,o=e[n],c=t(o);null!=c&&(s===Gs?c==c&&!C(c):i(c,s))&&(s=c,a=o)}return a}function ct(e,n){var r=[];return rt(e,function(e,t,i){n(e,t,i)&&r.push(e)}),r}function c(e,t,i,n,r){var s=-1,a=e.length;for(i=i||nn,r=r||[];++s<a;){var o=e[s];0<t&&i(o)?1<t?c(o,t-1,i,n,r):la(r,o):n||(r[r.length]=o)}return r}var lt=vi(),ut=vi(!0);function pt(e,t){return e&&lt(e,t,w)}function ht(e,t){return e&&ut(e,t,w)}function ft(t,e){return oa(e,function(e){return Tr(t[e])})}function yt(e,t){for(var i=0,n=(t=si(t,e)).length;null!=e&&i<n;)e=e[Sn(t[i++])];return i&&i==n?e:Gs}function dt(e,t,i){t=t(e);return G(e)?t:la(t,i(e))}function i(e){{if(null==e)return e===Gs?"[object Undefined]":"[object Null]";if(ce&&ce in d(e)){var t=e,i=M.call(t,ce),n=t[ce];try{t[ce]=Gs;var r=!0}catch(e){}var s=K.call(t);return r&&(i?t[ce]=n:delete t[ce]),s}return K.call(e)}}function mt(e,t){return t<e}function gt(e,t){return null!=e&&M.call(e,t)}function _t(e,t){return null!=e&&t in d(e)}function vt(e,t,i){for(var n=i?Lo:Ro,r=e[0].length,s=e.length,a=s,o=S(s),c=1/0,l=[];a--;){var u=e[a];a&&t&&(u=ca(u,pa(t))),c=x(u.length,c),o[a]=!i&&(t||120<=r&&120<=u.length)?new Ue(a&&u):Gs}var u=e[0],p=-1,h=o[0];e:for(;++p<r&&l.length<c;){var f=u[p],y=t?t(f):f,f=i||0!==f?f:0;if(!(h?Ko(h,y):n(l,y,i))){for(a=s;--a;){var d=o[a];if(!(d?Ko(d,y):n(e[a],y,i)))continue e}h&&h.push(y),l.push(f)}}return l}function kt(e,t,i){t=null==(e=hn(e,t=si(t,e)))?e:e[Sn(n(t))];return null==t?Gs:sa(t,e,i)}function Tt(e){return F(e)&&i(e)==Xs}function St(e,t,i,n,r){{if(e===t)return!0;if(null==e||null==t||!F(e)&&!F(t))return e!=e&&t!=t;var s=St,a=G(e),o=G(t),c=a?Ta:j(e),o=o?Ta:j(t),l=(c=c==Xs?Ks:c)==Ks,u=(o=o==Xs?Ks:o)==Ks,o;if((o=c==o)&&vr(e)){if(!vr(t))return!1;l=!(a=!0)}if(o&&!l){r=r||new z;if(a||Pr(e))return Ui(e,t,i,n,s,r);else{var p=e;var h=t;var f=c;var y=i;var d=n;var m=s;var g=r;switch(f){case ta:if(p.byteLength!=h.byteLength||p.byteOffset!=h.byteOffset)return!1;p=p.buffer,h=h.buffer;case Ia:return p.byteLength==h.byteLength&&m(new ee(p),new ee(h))?!0:!1;case Js:case qs:case Hs:return B(+p,+h);case Sa:return p.name==h.name&&p.message==h.message;case Ys:case Zs:return p==h+"";case Ws:var _=ic;case Qs:var v=1&y;if(_=_||rc,p.size!=h.size&&!v)return!1;v=g.get(p);if(v)return v==h;y|=2,g.set(p,h);v=Ui(_(p),_(h),y,d,m,g);return g.delete(p),v;case Ca:if(Re)return Re.call(p)==Re.call(h)}return!1;return}}if(!(1&i)){a=l&&M.call(e,"__wrapped__"),c=u&&M.call(t,"__wrapped__");if(a||c)return l=a?e.value():e,u=c?t.value():t,r=r||new z,s(l,u,i,n,r)}if(o){r=r||new z;var k=e,T=t,S=i,x=n,b=s,E=r,C=1&S,I=Vi(k),A=I.length,a=Vi(T).length;if(A!=a&&!C)return!1;for(var w=A;w--;){var P=I[w];if(!(C?P in T:M.call(T,P)))return!1}a=E.get(k),c=E.get(T);if(a&&c)return a==T&&c==k;for(var N=!0,O=(E.set(k,T),E.set(T,k),C);++w<A;){P=I[w];var D,R=k[P],L=T[P];if(!((D=x?C?x(L,R,P,T,k,E):x(R,L,P,k,T,E):D)===Gs?R===L||b(R,L,S,x,E):D)){N=!1;break}O=O||"constructor"==P}return N&&!O&&(a=k.constructor,c=T.constructor,a!=c&&"constructor"in k&&"constructor"in T&&!("function"==typeof a&&a instanceof a&&"function"==typeof c&&c instanceof c)&&(N=!1)),E.delete(k),E.delete(T),N}return!1}}function xt(e,t,i,n){var r=i.length,s=r,a=!n;if(null==e)return!s;for(e=d(e);r--;){var o=i[r];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++r<s;){var c=(o=i[r])[0],l=e[c],u=o[1];if(a&&o[2]){if(l===Gs&&!(c in e))return!1}else{var p,h=new z;if(!((p=n?n(l,u,c,e,t,h):p)===Gs?St(u,l,3,n,h):p))return!1}}return!0}function bt(e){return!(!E(e)||(t=e,H&&H in t))&&(Tr(e)?Z:lo).test(xn(e));var t}function Et(e){return"function"==typeof e?e:null==e?N:"object"==_typeof(e)?G(e)?Nt(e[0],e[1]):Pt(e):Is(e)}function Ct(e){if(!cn(e))return _e(e);var t,i=[];for(t in d(e))M.call(e,t)&&"constructor"!=t&&i.push(t);return i}function It(e){if(!E(e)){var t=e,i=[];if(null!=t)for(var n in d(t))i.push(n);return i}var r,s=cn(e),a=[];for(r in e)("constructor"!=r||!s&&M.call(e,r))&&a.push(r);return a}function At(e,t){return e<t}function wt(e,n){var r=-1,s=u(e)?S(e.length):[];return rt(e,function(e,t,i){s[++r]=n(e,t,i)}),s}function Pt(t){var i=Ki(t);return 1==i.length&&i[0][2]?un(i[0][0],i[0][1]):function(e){return e===t||xt(e,t,i)}}function Nt(i,n){return sn(i)&&ln(n)?un(Sn(i),n):function(e){var t=Vr(e,i);return t===Gs&&t===n?Xr(e,i):St(n,t,3)}}function Ot(d,m,g,_,v){d!==m&&lt(m,function(e,t){var i,n,r,s,a,o,c,l,u,p,h,f,y;v=v||new z,E(e)?(n=m,s=g,a=Ot,o=_,c=v,h=fn(i=d,r=t),f=fn(n,r),(y=c.get(f))?qe(i,r,y):(y=o?o(h,f,r+"",i,n,c):Gs,(n=y===Gs)&&(l=G(f),u=!l&&vr(f),p=!l&&!u&&Pr(f),y=f,l||u||p?y=G(h)?h:T(h)?b(h):u?li(f,!(n=!1)):p?pi(f,!(n=!1)):[]:Cr(f)||gr(f)?gr(y=h)?y=Mr(h):E(h)&&!Tr(h)||(y=tn(f)):n=!1),n&&(c.set(f,y),a(y,f,s,o,c),c.delete(f)),qe(i,r,y))):(l=_?_(fn(d,t),e,t+"",d,m,v):Gs,qe(d,t,l=l===Gs?e:l))},P)}function Dt(e,t){var i=e.length;if(i)return rn(t+=t<0?i:0,i)?e[t]:Gs}function Rt(e,n,u){n=n.length?ca(n,function(t){return G(t)?function(e){return yt(e,1===t.length?t[0]:t)}:t}):[N];var r=-1;n=ca(n,pa(p()));var t=wt(e,function(t,e,i){return{criteria:ca(n,function(e){return e(t)}),index:++r,value:t}}),e=function(e,t){for(var i=u,n=-1,r=e.criteria,s=t.criteria,a=r.length,o=i.length;++n<a;){var c=hi(r[n],s[n]);if(c){if(o<=n)return c;var l=i[n];return c*("desc"==l?-1:1)}}return e.index-t.index},i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}function Lt(e,t,i){for(var n=-1,r=t.length,s={};++n<r;){var a=t[n],o=yt(e,a);i(o,a)&&Ut(s,si(a,e),o)}return s}function Mt(e,t,i,n){var r=n?Fo:ua,s=-1,a=t.length,o=e;for(e===t&&(t=b(t)),i&&(o=ca(e,pa(i)));++s<a;)for(var c=0,l=t[s],u=i?i(l):l;-1<(c=r(o,u,c,n));)o!==e&&se.call(o,c,1),se.call(e,c,1);return e}function zt(e,t){for(var i=e?t.length:0,n=i-1;i--;){var r,s=t[i];i!=n&&s===r||(rn(r=s)?se.call(e,s,1):Yt(e,s))}}function jt(e,t){return e+ye(Te()*(t-e+1))}function Bt(e,t){var i="";if(!e||t<1||$s<t)return i;for(;t%2&&(i+=e),(t=ye(t/2))&&(e+=e),t;);return i}function a(e,t){return mn(pn(e,t,N),e+"")}function Gt(e){return Ve(is(e))}function Ft(e,t){e=is(e);return vn(e,et(t,0,e.length))}function Ut(e,t,i,n){if(!E(e))return e;for(var r=-1,s=(t=si(t,e)).length,a=s-1,o=e;null!=o&&++r<s;){var c,l=Sn(t[r]),u=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;r!=a&&(c=o[l],(u=n?n(c,l,o):Gs)===Gs&&(u=E(c)?c:rn(t[r+1])?[]:{})),We(o,l,u),o=o[l]}return e}var $t=Ie?function(e,t){return Ie.set(e,t),e}:N,t=le?function(e,t){return le(e,"toString",{configurable:!0,enumerable:!1,value:ms(t),writable:!0})}:N;function Vt(e){return vn(is(e))}function o(e,t,i){for(var n=-1,r=e.length,s=((i=r<i?r:i)<0&&(i+=r),r=i<(t=t<0?r<-t?0:r+t:t)?0:i-t>>>0,t>>>=0,S(r));++n<r;)s[n]=e[n+t];return s}function Xt(e,n){var r;return rt(e,function(e,t,i){return!(r=n(e,t,i))}),!!r}function Jt(e,t,i){var n=0,r=null==e?n:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;n<r;){var s=n+r>>>1,a=e[s];null!==a&&!C(a)&&(i?a<=t:a<t)?n=1+s:r=s}return r}return qt(e,t,N,i)}function qt(e,t,i,n){var r=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=i(t))!=t,o=null===t,c=C(t),l=t===Gs;r<s;){var u=ye((r+s)/2),p=i(e[u]),h=p!==Gs,f=null===p,y=p==p,d=C(p),y=a?n||y:l?y&&(n||h):o?y&&h&&(n||!f):c?y&&h&&!f&&(n||!d):!f&&!d&&(n?p<=t:p<t);y?r=u+1:s=u}return x(s,4294967294)}function Wt(e,t){for(var i=-1,n=e.length,r=0,s=[];++i<n;){var a,o=e[i],c=t?t(o):o;i&&B(c,a)||(a=c,s[r++]=0===o?0:o)}return s}function Ht(e){return"number"==typeof e?e:C(e)?va:+e}function l(e){if("string"==typeof e)return e;if(G(e))return ca(e,l)+"";if(C(e))return Le?Le.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Kt(e,t,i){var n=-1,r=Ro,s=e.length,a=!0,o=[],c=o;if(i)a=!1,r=Lo;else if(200<=s){var l=t?null:Mi(e);if(l)return rc(l);a=!1,r=Ko,c=new Ue}else c=t?[]:o;e:for(;++n<s;){var u=e[n],p=t?t(u):u,u=i||0!==u?u:0;if(a&&p==p){for(var h=c.length;h--;)if(c[h]===p)continue e;t&&c.push(p),o.push(u)}else r(c,p,i)||(c!==o&&c.push(p),o.push(u))}return o}function Yt(e,t){return null==(e=hn(e,t=si(t,e)))||delete e[Sn(n(t))]}function Qt(e,t,i,n){return Ut(e,t,i(yt(e,t)),n)}function Zt(e,t,i,n){for(var r=e.length,s=n?r:-1;(n?s--:++s<r)&&t(e[s],s,e););return i?o(e,n?0:s,n?s+1:r):o(e,n?s+1:0,n?r:s)}function ei(e,t){var i=e;return Mo(t,function(e,t){return t.func.apply(t.thisArg,la([e],t.args))},i=e instanceof g?e.value():i)}function ti(e,t,i){var n=e.length;if(n<2)return n?Kt(e[0]):[];for(var r=-1,s=S(n);++r<n;)for(var a=e[r],o=-1;++o<n;)o!=r&&(s[r]=nt(s[r]||a,e[o],t,i));return Kt(c(s,1),t,i)}function ii(e,t,i){for(var n=-1,r=e.length,s=t.length,a={};++n<r;){var o=n<s?t[n]:Gs;i(a,e[n],o)}return a}function ni(e){return T(e)?e:[]}function ri(e){return"function"==typeof e?e:N}function si(e,t){return G(e)?e:sn(e,t)?[e]:Tn(f(e))}var ai=a;function oi(e,t,i){var n=e.length;return i=i===Gs?n:i,!t&&n<=i?e:o(e,t,i)}var ci=ue||function(e){return ra.clearTimeout(e)};function li(e,t){if(t)return e.slice();t=e.length,t=te?te(t):new e.constructor(t);return e.copy(t),t}function ui(e){var t=new e.constructor(e.byteLength);return new ee(t).set(new ee(e)),t}function pi(e,t){t=t?ui(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function hi(e,t){if(e!==t){var i=e!==Gs,n=null===e,r=e==e,s=C(e),a=t!==Gs,o=null===t,c=t==t,l=C(t);if(!o&&!l&&!s&&t<e||s&&a&&c&&!o&&!l||n&&a&&c||!i&&c||!r)return 1;if(!n&&!s&&!l&&e<t||l&&i&&r&&!n&&!s||o&&i&&r||!a&&r||!c)return-1}return 0}function fi(e,t,i,n){for(var r=-1,s=e.length,a=i.length,o=-1,c=t.length,l=v(s-a,0),u=S(c+l),p=!n;++o<c;)u[o]=t[o];for(;++r<a;)(p||r<s)&&(u[i[r]]=e[r]);for(;l--;)u[o++]=e[r++];return u}function yi(e,t,i,n){for(var r=-1,s=e.length,a=-1,o=i.length,c=-1,l=t.length,u=v(s-o,0),p=S(u+l),h=!n;++r<u;)p[r]=e[r];for(var f=r;++c<l;)p[f+c]=t[c];for(;++a<o;)(h||r<s)&&(p[f+i[a]]=e[r++]);return p}function b(e,t){var i=-1,n=e.length;for(t=t||S(n);++i<n;)t[i]=e[i];return t}function di(e,t,i,n){for(var r=!i,s=(i=i||{},-1),a=t.length;++s<a;){var o=t[s],c=n?n(i[o],e[o],o,i,e):Gs;(r?Qe:We)(i,o,c=c===Gs?e[o]:c)}return i}function mi(r,s){return function(e,t){var i=G(e)?No:Ke,n=s?s():{};return i(e,r,p(t,2),n)}}function gi(o){return a(function(e,t){var i=-1,n=t.length,r=1<n?t[n-1]:Gs,s=2<n?t[2]:Gs,r=3<o.length&&"function"==typeof r?(n--,r):Gs;for(s&&h(t[0],t[1],s)&&(r=n<3?Gs:r,n=1),e=d(e);++i<n;){var a=t[i];a&&o(e,a,i,r)}return e})}function _i(s,a){return function(e,t){if(null==e)return e;if(!u(e))return s(e,t);for(var i=e.length,n=a?i:-1,r=d(e);(a?n--:++n<i)&&!1!==t(r[n],n,r););return e}}function vi(c){return function(e,t,i){for(var n=-1,r=d(e),s=i(e),a=s.length;a--;){var o=s[c?a:++n];if(!1===t(r[o],o,r))break}return e}}function ki(n){return function(e){var t=ha(e=f(e))?da(e):Gs,i=t?t[0]:e.charAt(0),t=t?oi(t,1).join(""):e.slice(1);return i[n]()+t}}function Ti(t){return function(e){return Mo(fs(ss(e).replace(mo,"")),t,"")}}function Si(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=Me(n.prototype),i=n.apply(t,e);return E(i)?i:t}}function xi(s,a,o){var c=Si(s);return function e(){for(var t=arguments.length,i=S(t),n=t,r=Wi(e);n--;)i[n]=arguments[n];r=t<3&&i[0]!==r&&i[t-1]!==r?[]:fa(i,r);return(t-=r.length)<o?Ri(s,a,Ci,e.placeholder,Gs,i,r,Gs,Gs,o-t):sa(this&&this!==ra&&this instanceof e?c:s,this,i)}}function bi(s){return function(e,t,i){var n,r=d(e),t=(u(e)||(n=p(t,3),e=w(e),t=function(e){return n(r[e],e,r)}),s(e,t,i));return-1<t?r[n?e[t]:t]:Gs}}function Ei(c){return $i(function(r){var s=r.length,e=s,t=m.prototype.thru;for(c&&r.reverse();e--;){var i=r[e];if("function"!=typeof i)throw new _(Fs);t&&!o&&"wrapper"==qi(i)&&(o=new m([],!0))}for(e=o?e:s;++e<s;)var n=qi(i=r[e]),a="wrapper"==n?Ji(i):Gs,o=a&&an(a[0])&&424==a[1]&&!a[4].length&&1==a[9]?o[qi(a[0])].apply(o,a[3]):1==i.length&&an(i)?o[n]():o.thru(i);return function(){var e=arguments,t=e[0];if(o&&1==e.length&&G(t))return o.plant(t).value();for(var i=0,n=s?r[i].apply(this,e):t;++i<s;)n=r[i].call(this,n);return n}})}function Ci(a,o,c,l,u,p,h,f,y,d){var m=o&Us,g=1&o,_=2&o,v=24&o,k=512&o,T=_?Gs:Si(a);return function e(){for(var t=S(s=arguments.length),i=s;i--;)t[i]=arguments[i];if(v&&(r=function(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}(t,n=Wi(e))),l&&(t=fi(t,l,u,v)),p&&(t=yi(t,p,h,v)),s-=r,v&&s<d)return r=fa(t,n),Ri(a,o,Ci,e.placeholder,c,t,r,f,y,d-s);var n=g?c:this,r=_?n[a]:a,s=t.length;return f?t=function(e,t){for(var i=e.length,n=x(t.length,i),r=b(e);n--;){var s=t[n];e[n]=rn(s,i)?r[s]:Gs}return e}(t,f):k&&1<s&&t.reverse(),m&&y<s&&(t.length=y),(r=this&&this!==ra&&this instanceof e?T||Si(r):r).apply(n,t)}}function Ii(i,a){return function(e,t){return e=e,n=i,r=a(t),s={},pt(e,function(e,t,i){n(s,r(e),t,i)}),s;var n,r,s}}function Ai(n,r){return function(e,t){var i;if(e===Gs&&t===Gs)return r;if(e!==Gs&&(i=e),t!==Gs){if(i===Gs)return t;t="string"==typeof e||"string"==typeof t?(e=l(e),l(t)):(e=Ht(e),Ht(t)),i=n(e,t)}return i}}function wi(n){return $i(function(e){return e=ca(e,pa(p())),a(function(t){var i=this;return n(e,function(e){return sa(e,i,t)})})})}function Pi(e,t){var i=(t=t===Gs?" ":l(t)).length;if(i<2)return i?Bt(t,e):t;i=Bt(t,fe(e/ya(t)));return ha(t)?oi(da(i),0,e).join(""):i.slice(0,e)}function Ni(o,e,c,l){var u=1&e,p=Si(o);return function e(){for(var t=-1,i=arguments.length,n=-1,r=l.length,s=S(r+i),a=this&&this!==ra&&this instanceof e?p:o;++n<r;)s[n]=l[n];for(;i--;)s[n++]=arguments[++t];return sa(a,u?c:this,s)}}function Oi(l){return function(e,t,i){i&&"number"!=typeof i&&h(e,t,i)&&(t=i=Gs),e=Rr(e),t===Gs?(t=e,e=0):t=Rr(t),i=i===Gs?e<t?1:-1:Rr(i);for(var n=e,r=i,s=l,a=-1,o=v(fe((t-n)/(r||1)),0),c=S(o);o--;)c[s?o:++a]=n,n+=r;return c}}function Di(i){return function(e,t){return"string"==typeof e&&"string"==typeof t||(e=A(e),t=A(t)),i(e,t)}}function Ri(e,t,i,n,r,s,a,o,c,l){var u=8&t,r=(4&(t=(t|(u?32:64))&~(u?64:32))||(t&=-4),[e,t,r,u?s:Gs,u?a:Gs,u?Gs:s,u?Gs:a,o,c,l]),s=i.apply(Gs,r);return an(e)&&yn(s,r),s.placeholder=n,gn(s,e,t)}function Li(e){var n=R[e];return function(e,t){var i;return e=A(e),(t=null==t?0:x(I(t),292))&&me(e)?(i=(f(e)+"e").split("e"),+((i=(f(n(i[0]+"e"+(+i[1]+t)))+"e").split("e"))[0]+"e"+(+i[1]-t))):n(e)}}var Mi=Ee&&1/rc(new Ee([,-0]))[1]==1/0?function(e){return new Ee(e)}:xs;function zi(s){return function(e){var t,i,n,r=j(e);return r==Ws?ic(e):r==Qs?(r=e,t=-1,i=Array(r.size),r.forEach(function(e){i[++t]=[e,e]}),i):ca(s(n=e),function(e){return[e,n[e]]})}}function ji(e,t,i,n,r,s,a,o){var c=2&t;if(!c&&"function"!=typeof e)throw new _(Fs);var l,u,p,h,f,y=n?n.length:0,d=(y||(t&=-97,n=r=Gs),a=a===Gs?a:v(I(a),0),o=o===Gs?o:I(o),y-=r?r.length:0,64&t&&(m=n,l=r,n=r=Gs),c?Gs:Ji(e)),m=[e,t,i,n,r,m,l,s,a,o];return d&&function(e,t){var i=e[1],n=t[1],r=i|n,s=r<131,a=n==Us&&8==i||n==Us&&256==i&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==i;if(!s&&!a)return;1&n&&(e[2]=t[2],r|=1&i?0:4);s=t[3];{var o;s&&(o=e[3],e[3]=o?fi(o,s,t[4]):s,e[4]=o?fa(e[3],_a):t[4])}(s=t[5])&&(o=e[5],e[5]=o?yi(o,s,t[6]):s,e[6]=o?fa(e[5],_a):t[6]);(s=t[7])&&(e[7]=s);n&Us&&(e[8]=null==e[8]?t[8]:x(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(m,d),e=m[0],t=m[1],i=m[2],n=m[3],r=m[4],!(o=m[9]=m[9]===Gs?c?0:e.length:v(m[9]-y,0))&&24&t&&(t&=-25),l=t&&1!=t?8==t||16==t?xi(e,t,o):32!=t&&33!=t||r.length?Ci.apply(Gs,m):Ni(e,t,i,n):(p=i,h=1&t,f=Si(u=e),function e(){return(this&&this!==ra&&this instanceof e?f:u).apply(h?p:this,arguments)}),gn((d?$t:yn)(l,m),e,t)}function Bi(e,t,i,n){return e===Gs||B(e,X[i])&&!M.call(n,i)?t:e}function Gi(e,t,i,n,r,s){return E(e)&&E(t)&&(s.set(t,e),Ot(e,t,Gs,Gi,s),s.delete(t)),e}function Fi(e){return Cr(e)?Gs:e}function Ui(e,t,i,n,r,s){var a=1&i,o=e.length,c=t.length;if(o!=c&&!(a&&o<c))return!1;var c=s.get(e),l=s.get(t);if(c&&l)return c==t&&l==e;var u=-1,p=!0,h=2&i?new Ue:Gs;for(s.set(e,t),s.set(t,e);++u<o;){var f,y=e[u],d=t[u];if((f=n?a?n(d,y,u,t,e,s):n(y,d,u,e,t,s):f)!==Gs){if(f)continue;p=!1;break}if(h){if(!jo(t,function(e,t){return!Ko(h,t)&&(y===e||r(y,e,i,n,s))&&h.push(t)})){p=!1;break}}else if(y!==d&&!r(y,d,i,n,s)){p=!1;break}}return s.delete(e),s.delete(t),p}function $i(e){return mn(pn(e,Gs,In),e+"")}function Vi(e){return dt(e,w,Qi)}function Xi(e){return dt(e,P,Zi)}var Ji=Ie?function(e){return Ie.get(e)}:xs;function qi(e){for(var t=e.name+"",i=Ae[t],n=M.call(Ae,t)?i.length:0;n--;){var r=i[n],s=r.func;if(null==s||s==e)return r.name}return t}function Wi(e){return(M.call(y,"placeholder")?y:e).placeholder}function p(){var e=(e=y.iteratee||vs)===vs?Et:e;return arguments.length?e(arguments[0],arguments[1]):e}function Hi(e,t){var i,n,e=e.__data__;return("string"==(n=_typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?e["string"==typeof t?"string":"hash"]:e.map}function Ki(e){for(var t=w(e),i=t.length;i--;){var n=t[i],r=e[n];t[i]=[n,r,ln(r)]}return t}function Yi(e,t){t=t;e=null==(e=e)?Gs:e[t];return bt(e)?e:Gs}var Qi=de?function(t){return null==t?[]:(t=d(t),oa(de(t),function(e){return re.call(t,e)}))}:Ps,Zi=de?function(e){for(var t=[];e;)la(t,Qi(e)),e=ie(e);return t}:Ps,j=i;function en(e,t,i){for(var n=-1,r=(t=si(t,e)).length,s=!1;++n<r;){var a=Sn(t[n]);if(!(s=null!=e&&i(e,a)))break;e=e[a]}return s||++n!=r?s:!!(r=null==e?0:e.length)&&xr(r)&&rn(a,r)&&(G(e)||gr(e))}function tn(e){return"function"!=typeof e.constructor||cn(e)?{}:Me(ie(e))}function nn(e){return G(e)||gr(e)||!!(ae&&e&&e[ae])}function rn(e,t){var i=_typeof(e);return!!(t=null==t?$s:t)&&("number"==i||"symbol"!=i&&po.test(e))&&-1<e&&e%1==0&&e<t}function h(e,t,i){var n;if(E(i))return n=_typeof(t),("number"==n?u(i)&&rn(t,i.length):"string"==n&&t in i)&&B(i[t],e)}function sn(e,t){var i;if(!G(e))return i=_typeof(e),"number"==i||"symbol"==i||"boolean"==i||null==e||C(e)||(Wa.test(e)||!qa.test(e)||null!=t&&e in d(t))}function an(e){var t=qi(e),i=y[t];if("function"==typeof i&&t in g.prototype){if(e===i)return 1;t=Ji(i);return t&&e===t[0]}}(s&&j(new s(new ArrayBuffer(1)))!=ta||xe&&j(new xe)!=Ws||be&&j(be.resolve())!=Ea||Ee&&j(new Ee)!=Qs||e&&j(new e)!=ea)&&(j=function(e){var t=i(e),e=t==Ks?e.constructor:Gs,e=e?xn(e):"";if(e)switch(e){case we:return ta;case Pe:return Ws;case Ne:return Ea;case Oe:return Qs;case De:return ea}return t});var on=J?Tr:Ns;function cn(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||X)}function ln(e){return e==e&&!E(e)}function un(t,i){return function(e){return null!=e&&(e[t]===i&&(i!==Gs||t in d(e)))}}function pn(s,a,o){return a=v(a===Gs?s.length-1:a,0),function(){for(var e=arguments,t=-1,i=v(e.length-a,0),n=S(i);++t<i;)n[t]=e[a+t];for(var t=-1,r=S(a+1);++t<a;)r[t]=e[t];return r[a]=o(n),sa(s,this,r)}}function hn(e,t){return t.length<2?e:yt(e,o(t,0,-1))}function fn(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var yn=_n($t),dn=he||function(e,t){return ra.setTimeout(e,t)},mn=_n(t);function gn(e,t,i){var n,r,t=t+"";return mn(e,function(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(1<i?"& ":"")+t[n],t=t.join(2<i?", ":" "),e.replace(Za,"{\n/* [wrapped with "+t+"] */\n")}(t,(n=(e=(e=t).match(eo))?e[1].split(to):[],r=i,aa(ka,function(e){var t="_."+e[0];r&e[1]&&!Ro(n,t)&&n.push(t)}),n.sort())))}function _n(i){var n=0,r=0;return function(){var e=ve(),t=16-(e-r);if(r=e,0<t){if(800<=++n)return arguments[0]}else n=0;return i.apply(Gs,arguments)}}function vn(e,t){var i=-1,n=e.length,r=n-1;for(t=t===Gs?n:t;++i<t;){var s=jt(i,r),a=e[s];e[s]=e[i],e[i]=a}return e.length=t,e}kn=(ue=ur(ue=function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(Ha,function(e,t,i,n){r.push(i?n.replace(ro,"$1"):t||e)}),r},function(e){return 500===kn.size&&kn.clear(),e})).cache;var kn,Tn=ue;function Sn(e){if("string"==typeof e||C(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function xn(e){if(null!=e){try{return q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function bn(e){if(e instanceof g)return e.clone();var t=new m(e.__wrapped__,e.__chain__);return t.__actions__=b(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}s=a(function(e,t){return T(e)?nt(e,c(t,1,T,!0)):[]}),be=a(function(e,t){var i=n(t);return T(i)&&(i=Gs),T(e)?nt(e,c(t,1,T,!0),p(i,2)):[]}),e=a(function(e,t){var i=n(t);return T(i)&&(i=Gs),T(e)?nt(e,c(t,1,T,!0),Gs,i):[]});function En(e,t,i){var n=null==e?0:e.length;if(!n)return-1;i=null==i?0:I(i);return i<0&&(i=v(n+i,0)),Go(e,p(t,3),i)}function Cn(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=n-1;return i!==Gs&&(r=I(i),r=i<0?v(n+r,0):x(r,n-1)),Go(e,p(t,3),r,!0)}function In(e){return(null==e?0:e.length)?c(e,1):[]}function An(e){return e&&e.length?e[0]:Gs}J=a(function(e){var t=ca(e,ni);return t.length&&t[0]===e[0]?vt(t):[]}),he=a(function(e){var t=n(e),i=ca(e,ni);return t===n(i)?t=Gs:i.pop(),i.length&&i[0]===e[0]?vt(i,p(t,2)):[]}),t=a(function(e){var t=n(e),i=ca(e,ni);return(t="function"==typeof t?t:Gs)&&i.pop(),i.length&&i[0]===e[0]?vt(i,Gs,t):[]});function n(e){var t=null==e?0:e.length;return t?e[t-1]:Gs}ue=a(wn);function wn(e,t){return e&&e.length&&t&&t.length?Mt(e,t):e}var Pn=$i(function(e,t){var i=null==e?0:e.length,n=Ze(e,t);return zt(e,ca(t,function(e){return rn(e,i)?+e:e}).sort(hi)),n});function Nn(e){return null==e?e:Se.call(e)}var On=a(function(e){return Kt(c(e,1,T,!0))}),Dn=a(function(e){var t=n(e);return T(t)&&(t=Gs),Kt(c(e,1,T,!0),p(t,2))}),Rn=a(function(e){var t="function"==typeof(t=n(e))?t:Gs;return Kt(c(e,1,T,!0),Gs,t)});function Ln(t){if(!t||!t.length)return[];var i=0;return t=oa(t,function(e){return T(e)&&(i=v(e.length,i),1)}),qo(i,function(e){return ca(t,Vo(e))})}function Mn(e,t){if(!e||!e.length)return[];e=Ln(e);return null==t?e:ca(e,function(e){return sa(t,Gs,e)})}var zn=a(function(e,t){return T(e)?nt(e,t):[]}),jn=a(function(e){return ti(oa(e,T))}),Bn=a(function(e){var t=n(e);return T(t)&&(t=Gs),ti(oa(e,T),p(t,2))}),Gn=a(function(e){var t="function"==typeof(t=n(e))?t:Gs;return ti(oa(e,T),Gs,t)}),Fn=a(Ln);var Un=a(function(e){var t=e.length,t="function"==typeof(t=1<t?e[t-1]:Gs)?(e.pop(),t):Gs;return Mn(e,t)});function $n(e){e=y(e);return e.__chain__=!0,e}function Vn(e,t){return t(e)}var Xn=$i(function(t){function e(e){return Ze(e,t)}var i=t.length,n=i?t[0]:0,r=this.__wrapped__;return!(1<i||this.__actions__.length)&&r instanceof g&&rn(n)?((r=r.slice(n,+n+(i?1:0))).__actions__.push({func:Vn,args:[e],thisArg:Gs}),new m(r,this.__chain__).thru(function(e){return i&&!e.length&&e.push(Gs),e})):this.thru(e)});var Jn=mi(function(e,t,i){M.call(e,i)?++e[i]:Qe(e,i,1)});var qn=bi(En),Wn=bi(Cn);function Hn(e,t){return(G(e)?aa:rt)(e,p(t,3))}function Kn(e,t){return(G(e)?Oo:st)(e,p(t,3))}var Yn=mi(function(e,t,i){M.call(e,i)?e[i].push(t):Qe(e,i,[t])});var Qn=a(function(e,t,i){var n=-1,r="function"==typeof t,s=u(e)?S(e.length):[];return rt(e,function(e){s[++n]=r?sa(t,e,i):kt(e,t,i)}),s}),Zn=mi(function(e,t,i){Qe(e,i,t)});function er(e,t){return(G(e)?ca:wt)(e,p(t,3))}var tr=mi(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});var ir=a(function(e,t){if(null==e)return[];var i=t.length;return 1<i&&h(e,t[0],t[1])?t=[]:2<i&&h(t[0],t[1],t[2])&&(t=[t[0]]),Rt(e,c(t,1),[])}),nr=pe||function(){return ra.Date.now()};function rr(e,t,i){return t=i?Gs:t,t=e&&null==t?e.length:t,ji(e,Us,Gs,Gs,Gs,Gs,t)}function sr(e,t){var i;if("function"!=typeof t)throw new _(Fs);return e=I(e),function(){return 0<--e&&(i=t.apply(this,arguments)),e<=1&&(t=Gs),i}}var ar=a(function(e,t,i){var n,r=1;return i.length&&(n=fa(i,Wi(ar)),r|=32),ji(e,r,t,i,n)}),or=a(function(e,t,i){var n,r=3;return i.length&&(n=fa(i,Wi(or)),r|=32),ji(t,r,e,i,n)});function cr(n,i,e){var r,s,a,o,c,l,u=0,p=!1,h=!1,t=!0;if("function"!=typeof n)throw new _(Fs);function f(e){var t=r,i=s;return r=s=Gs,u=e,o=n.apply(i,t)}function y(e){var t=e-l;return l===Gs||i<=t||t<0||h&&a<=e-u}function d(){var e,t=nr();if(y(t))return m(t);c=dn(d,(e=i-((t=t)-l),h?x(e,a-(t-u)):e))}function m(e){return c=Gs,t&&r?f(e):(r=s=Gs,o)}function g(){var e=nr(),t=y(e);if(r=arguments,s=this,l=e,t){if(c===Gs)return u=e=l,c=dn(d,i),p?f(e):o;if(h)return ci(c),c=dn(d,i),f(l)}return c===Gs&&(c=dn(d,i)),o}return i=A(i)||0,E(e)&&(p=!!e.leading,h="maxWait"in e,a=h?v(A(e.maxWait)||0,i):a,t="trailing"in e?!!e.trailing:t),g.cancel=function(){c!==Gs&&ci(c),u=0,r=l=s=c=Gs},g.flush=function(){return c===Gs?o:m(nr())},g}var pe=a(function(e,t){return it(e,1,t)}),lr=a(function(e,t,i){return it(e,A(t)||0,i)});function ur(n,r){if("function"!=typeof n||null!=r&&"function"!=typeof r)throw new _(Fs);function s(){var e=arguments,t=r?r.apply(this,e):e[0],i=s.cache;return i.has(t)?i.get(t):(e=n.apply(this,e),s.cache=i.set(t,e)||i,e)}return s.cache=new(ur.Cache||Fe),s}function pr(t){if("function"!=typeof t)throw new _(Fs);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ur.Cache=Fe;var ai=ai(function(n,r){var s=(r=1==r.length&&G(r[0])?ca(r[0],pa(p())):ca(c(r,1),pa(p()))).length;return a(function(e){for(var t=-1,i=x(e.length,s);++t<i;)e[t]=r[t].call(this,e[t]);return sa(n,this,e)})}),hr=a(function(e,t){var i=fa(t,Wi(hr));return ji(e,32,Gs,t,i)}),fr=a(function(e,t){var i=fa(t,Wi(fr));return ji(e,64,Gs,t,i)}),yr=$i(function(e,t){return ji(e,256,Gs,Gs,Gs,t)});function B(e,t){return e===t||e!=e&&t!=t}var dr=Di(mt),mr=Di(function(e,t){return t<=e}),gr=Tt(function(){return arguments}())?Tt:function(e){return F(e)&&M.call(e,"callee")&&!re.call(e,"callee")},G=S.isArray,_r=Eo?pa(Eo):function(e){return F(e)&&i(e)==Ia};function u(e){return null!=e&&xr(e.length)&&!Tr(e)}function T(e){return F(e)&&u(e)}var vr=V||Ns,V=Co?pa(Co):function(e){return F(e)&&i(e)==qs};function kr(e){if(!F(e))return!1;var t=i(e);return t==Sa||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Cr(e)}function Tr(e){if(!E(e))return!1;e=i(e);return e==xa||e==ba||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Sr(e){return"number"==typeof e&&e==I(e)}function xr(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=$s}function E(e){var t=_typeof(e);return null!=e&&("object"==t||"function"==t)}function F(e){return null!=e&&"object"==_typeof(e)}var br=Io?pa(Io):function(e){return F(e)&&j(e)==Ws};function Er(e){return"number"==typeof e||F(e)&&i(e)==Hs}function Cr(e){if(!F(e)||i(e)!=Ks)return!1;e=ie(e);if(null===e)return!0;e=M.call(e,"constructor")&&e.constructor;return"function"==typeof e&&e instanceof e&&q.call(e)==Y}var Ir=Ao?pa(Ao):function(e){return F(e)&&i(e)==Ys};var Ar=wo?pa(wo):function(e){return F(e)&&j(e)==Qs};function wr(e){return"string"==typeof e||!G(e)&&F(e)&&i(e)==Zs}function C(e){return"symbol"==_typeof(e)||F(e)&&i(e)==Ca}var Pr=Po?pa(Po):function(e){return F(e)&&xr(e.length)&&!!ia[i(e)]};var Nr=Di(At),Or=Di(function(e,t){return e<=t});function Dr(e){if(!e)return[];if(u(e))return(wr(e)?da:b)(e);if(oe&&e[oe]){for(var t,i=e[oe](),n=[];!(t=i.next()).done;)n.push(t.value);return n}var r=j(e);return(r==Ws?ic:r==Qs?rc:is)(e)}function Rr(e){return e?(e=A(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function I(e){var e=Rr(e),t=e%1;return e==e?t?e-t:e:0}function Lr(e){return e?et(I(e),0,Vs):0}function A(e){if("number"==typeof e)return e;if(C(e))return va;if("string"!=typeof(e=E(e)?E(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=Wo(e);var t=co.test(e);return t||uo.test(e)?xo(e.slice(2),t?2:8):oo.test(e)?va:+e}function Mr(e){return di(e,P(e))}function f(e){return null==e?"":l(e)}var zr=gi(function(e,t){if(cn(t)||u(t))di(t,w(t),e);else for(var i in t)M.call(t,i)&&We(e,i,t[i])}),jr=gi(function(e,t){di(t,P(t),e)}),Br=gi(function(e,t,i,n){di(t,P(t),e,n)}),Gr=gi(function(e,t,i,n){di(t,w(t),e,n)}),Fr=$i(Ze);var Ur=a(function(e,t){e=d(e);var i=-1,n=t.length,r=2<n?t[2]:Gs;for(r&&h(t[0],t[1],r)&&(n=1);++i<n;)for(var s=t[i],a=P(s),o=-1,c=a.length;++o<c;){var l=a[o],u=e[l];(u===Gs||B(u,X[l])&&!M.call(e,l))&&(e[l]=s[l])}return e}),$r=a(function(e){return e.push(Gs,Gi),sa(Kr,Gs,e)});function Vr(e,t,i){e=null==e?Gs:yt(e,t);return e===Gs?i:e}function Xr(e,t){return null!=e&&en(e,t,_t)}var Jr=Ii(function(e,t,i){e[t=null!=t&&"function"!=typeof t.toString?K.call(t):t]=i},ms(N)),qr=Ii(function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=K.call(t)),M.call(e,t)?e[t].push(i):e[t]=[i]},p),Wr=a(kt);function w(e){return(u(e)?$e:Ct)(e)}function P(e){return u(e)?$e(e,!0):It(e)}var Hr=gi(function(e,t,i){Ot(e,t,i)}),Kr=gi(function(e,t,i,n){Ot(e,t,i,n)}),Yr=$i(function(t,e){var i={};if(null==t)return i;for(var n=!1,r=(e=ca(e,function(e){return e=si(e,t),n=n||1<e.length,e}),di(t,Xi(t),i),n&&(i=k(i,7,Fi)),e.length);r--;)Yt(i,e[r]);return i});var Qr=$i(function(e,t){return null==e?{}:Lt(i=e,t,function(e,t){return Xr(i,t)});var i});function Zr(e,i){if(null==e)return{};var t=ca(Xi(e),function(e){return[e]});return i=p(i),Lt(e,t,function(e,t){return i(e,t[0])})}var es=zi(w),ts=zi(P);function is(e){return null==e?[]:Ho(e,w(e))}var ns=Ti(function(e,t,i){return t=t.toLowerCase(),e+(i?rs(t):t)});function rs(e){return hs(f(e).toLowerCase())}function ss(e){return(e=f(e))&&e.replace(ho,Zo).replace(go,"")}var as=Ti(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),os=Ti(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),cs=ki("toLowerCase");var ls=Ti(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});var us=Ti(function(e,t,i){return e+(i?" ":"")+hs(t)});var ps=Ti(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),hs=ki("toUpperCase");function fs(e,t,i){return e=f(e),(t=i?Gs:t)===Gs?(i=e,vo.test(i)?e.match(_o)||[]:e.match(io)||[]):e.match(t)||[]}var ys=a(function(e,t){try{return sa(e,Gs,t)}catch(e){return kr(e)?e:new O(e)}}),ds=$i(function(t,e){return aa(e,function(e){e=Sn(e),Qe(t,e,ar(t[e],t))}),t});function ms(e){return function(){return e}}var gs=Ei(),_s=Ei(!0);function N(e){return e}function vs(e){return Et("function"==typeof e?e:k(e,1))}var ks=a(function(t,i){return function(e){return kt(e,t,i)}}),Ts=a(function(t,i){return function(e){return kt(t,e,i)}});function Ss(n,t,e){var i=w(t),r=ft(t,i),s=(null!=e||E(t)&&(r.length||!i.length)||(e=t,t=n,n=this,r=ft(t,w(t))),!(E(e)&&"chain"in e&&!e.chain)),a=Tr(n);return aa(r,function(e){var i=t[e];n[e]=i,a&&(n.prototype[e]=function(){var e,t=this.__chain__;return s||t?(((e=n(this.__wrapped__)).__actions__=b(this.__actions__)).push({func:i,args:arguments,thisArg:n}),e.__chain__=t,e):i.apply(n,la([this.value()],arguments))})}),n}function xs(){}var bs=wi(ca),Es=wi(Do),Cs=wi(jo);function Is(e){return sn(e)?Vo(Sn(e)):(t=e,function(e){return yt(e,t)});var t}var As=Oi(),ws=Oi(!0);function Ps(){return[]}function Ns(){return!1}var Os=Ai(function(e,t){return e+t},0),Ds=Li("ceil"),Rs=Ai(function(e,t){return e/t},1),Ls=Li("floor");var Ms,zs=Ai(function(e,t){return e*t},1),js=Li("round"),Bs=Ai(function(e,t){return e-t},0);return y.after=function(e,t){if("function"!=typeof t)throw new _(Fs);return e=I(e),function(){if(--e<1)return t.apply(this,arguments)}},y.ary=rr,y.assign=zr,y.assignIn=jr,y.assignInWith=Br,y.assignWith=Gr,y.at=Fr,y.before=sr,y.bind=ar,y.bindAll=ds,y.bindKey=or,y.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return G(e)?e:[e]},y.chain=$n,y.chunk=function(e,t,i){t=(i?h(e,t,i):t===Gs)?1:v(I(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var r=0,s=0,a=S(fe(n/t));r<n;)a[s++]=o(e,r,r+=t);return a},y.compact=function(e){for(var t=-1,i=null==e?0:e.length,n=0,r=[];++t<i;){var s=e[t];s&&(r[n++]=s)}return r},y.concat=function(){var e=arguments.length;if(!e)return[];for(var t=S(e-1),i=arguments[0],n=e;n--;)t[n-1]=arguments[n];return la(G(i)?b(i):[i],c(t,1))},y.cond=function(n){var r=null==n?0:n.length,t=p();return n=r?ca(n,function(e){if("function"!=typeof e[1])throw new _(Fs);return[t(e[0]),e[1]]}):[],a(function(e){for(var t=-1;++t<r;){var i=n[t];if(sa(i[0],this,e))return sa(i[1],this,e)}})},y.conforms=function(e){return t=k(e,1),i=w(t),function(e){return tt(e,t,i)};var t,i},y.constant=ms,y.countBy=Jn,y.create=function(e,t){return e=Me(e),null==t?e:Ye(e,t)},y.curry=function e(t,i,n){t=ji(t,8,Gs,Gs,Gs,Gs,Gs,i=n?Gs:i);return t.placeholder=e.placeholder,t},y.curryRight=function e(t,i,n){t=ji(t,16,Gs,Gs,Gs,Gs,Gs,i=n?Gs:i);return t.placeholder=e.placeholder,t},y.debounce=cr,y.defaults=Ur,y.defaultsDeep=$r,y.defer=pe,y.delay=lr,y.difference=s,y.differenceBy=be,y.differenceWith=e,y.drop=function(e,t,i){var n=null==e?0:e.length;return n?o(e,(t=i||t===Gs?1:I(t))<0?0:t,n):[]},y.dropRight=function(e,t,i){var n=null==e?0:e.length;return n?o(e,0,(t=n-(t=i||t===Gs?1:I(t)))<0?0:t):[]},y.dropRightWhile=function(e,t){return e&&e.length?Zt(e,p(t,3),!0,!0):[]},y.dropWhile=function(e,t){return e&&e.length?Zt(e,p(t,3),!0):[]},y.fill=function(e,t,i,n){if(!(c=null==e?0:e.length))return[];i&&"number"!=typeof i&&h(e,t,i)&&(i=0,n=c);var r=e,s=t,a=i,o=n,c=r.length;for((a=I(a))<0&&(a=c<-a?0:c+a),(o=o===Gs||c<o?c:I(o))<0&&(o+=c),o=o<a?0:Lr(o);a<o;)r[a++]=s;return r},y.filter=function(e,t){return(G(e)?oa:ct)(e,p(t,3))},y.flatMap=function(e,t){return c(er(e,t),1)},y.flatMapDeep=function(e,t){return c(er(e,t),1/0)},y.flatMapDepth=function(e,t,i){return i=i===Gs?1:I(i),c(er(e,t),i)},y.flatten=In,y.flattenDeep=function(e){return(null==e?0:e.length)?c(e,1/0):[]},y.flattenDepth=function(e,t){return(null==e?0:e.length)?c(e,t=t===Gs?1:I(t)):[]},y.flip=function(e){return ji(e,512)},y.flow=gs,y.flowRight=_s,y.fromPairs=function(e){for(var t=-1,i=null==e?0:e.length,n={};++t<i;){var r=e[t];n[r[0]]=r[1]}return n},y.functions=function(e){return null==e?[]:ft(e,w(e))},y.functionsIn=function(e){return null==e?[]:ft(e,P(e))},y.groupBy=Yn,y.initial=function(e){return(null==e?0:e.length)?o(e,0,-1):[]},y.intersection=J,y.intersectionBy=he,y.intersectionWith=t,y.invert=Jr,y.invertBy=qr,y.invokeMap=Qn,y.iteratee=vs,y.keyBy=Zn,y.keys=w,y.keysIn=P,y.map=er,y.mapKeys=function(e,n){var r={};return n=p(n,3),pt(e,function(e,t,i){Qe(r,n(e,t,i),e)}),r},y.mapValues=function(e,n){var r={};return n=p(n,3),pt(e,function(e,t,i){Qe(r,t,n(e,t,i))}),r},y.matches=function(e){return Pt(k(e,1))},y.matchesProperty=function(e,t){return Nt(e,k(t,1))},y.memoize=ur,y.merge=Hr,y.mergeWith=Kr,y.method=ks,y.methodOf=Ts,y.mixin=Ss,y.negate=pr,y.nthArg=function(t){return t=I(t),a(function(e){return Dt(e,t)})},y.omit=Yr,y.omitBy=function(e,t){return Zr(e,pr(p(t)))},y.once=function(e){return sr(2,e)},y.orderBy=function(e,t,i,n){return null==e?[]:Rt(e,t=G(t)?t:null==t?[]:[t],i=G(i=n?Gs:i)?i:null==i?[]:[i])},y.over=bs,y.overArgs=ai,y.overEvery=Es,y.overSome=Cs,y.partial=hr,y.partialRight=fr,y.partition=tr,y.pick=Qr,y.pickBy=Zr,y.property=Is,y.propertyOf=function(t){return function(e){return null==t?Gs:yt(t,e)}},y.pull=ue,y.pullAll=wn,y.pullAllBy=function(e,t,i){return e&&e.length&&t&&t.length?Mt(e,t,p(i,2)):e},y.pullAllWith=function(e,t,i){return e&&e.length&&t&&t.length?Mt(e,t,Gs,i):e},y.pullAt=Pn,y.range=As,y.rangeRight=ws,y.rearg=yr,y.reject=function(e,t){return(G(e)?oa:ct)(e,pr(p(t,3)))},y.remove=function(e,t){var i=[];if(!e||!e.length)return i;var n=-1,r=[],s=e.length;for(t=p(t,3);++n<s;){var a=e[n];t(a,n,e)&&(i.push(a),r.push(n))}return zt(e,r),i},y.rest=function(e,t){if("function"!=typeof e)throw new _(Fs);return a(e,t=t===Gs?t:I(t))},y.reverse=Nn,y.sampleSize=function(e,t,i){return t=(i?h(e,t,i):t===Gs)?1:I(t),(G(e)?Xe:Ft)(e,t)},y.set=function(e,t,i){return null==e?e:Ut(e,t,i)},y.setWith=function(e,t,i,n){return n="function"==typeof n?n:Gs,null==e?e:Ut(e,t,i,n)},y.shuffle=function(e){return(G(e)?Je:Vt)(e)},y.slice=function(e,t,i){var n=null==e?0:e.length;return n?(i=i&&"number"!=typeof i&&h(e,t,i)?(t=0,n):(t=null==t?0:I(t),i===Gs?n:I(i)),o(e,t,i)):[]},y.sortBy=ir,y.sortedUniq=function(e){return e&&e.length?Wt(e):[]},y.sortedUniqBy=function(e,t){return e&&e.length?Wt(e,p(t,2)):[]},y.split=function(e,t,i){return i&&"number"!=typeof i&&h(e,t,i)&&(t=i=Gs),(i=i===Gs?Vs:i>>>0)?(e=f(e))&&("string"==typeof t||null!=t&&!Ir(t))&&!(t=l(t))&&ha(e)?oi(da(e),0,i):e.split(t,i):[]},y.spread=function(i,n){if("function"!=typeof i)throw new _(Fs);return n=null==n?0:v(I(n),0),a(function(e){var t=e[n],e=oi(e,0,n);return t&&la(e,t),sa(i,this,e)})},y.tail=function(e){var t=null==e?0:e.length;return t?o(e,1,t):[]},y.take=function(e,t,i){return e&&e.length?o(e,0,(t=i||t===Gs?1:I(t))<0?0:t):[]},y.takeRight=function(e,t,i){var n=null==e?0:e.length;return n?o(e,(t=n-(t=i||t===Gs?1:I(t)))<0?0:t,n):[]},y.takeRightWhile=function(e,t){return e&&e.length?Zt(e,p(t,3),!1,!0):[]},y.takeWhile=function(e,t){return e&&e.length?Zt(e,p(t,3)):[]},y.tap=function(e,t){return t(e),e},y.throttle=function(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new _(Fs);return E(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),cr(e,t,{leading:n,maxWait:t,trailing:r})},y.thru=Vn,y.toArray=Dr,y.toPairs=es,y.toPairsIn=ts,y.toPath=function(e){return G(e)?ca(e,Sn):C(e)?[e]:b(Tn(f(e)))},y.toPlainObject=Mr,y.transform=function(e,n,r){var t,i=G(e),s=i||vr(e)||Pr(e);return n=p(n,4),null==r&&(t=e&&e.constructor,r=s?i?new t:[]:E(e)&&Tr(t)?Me(ie(e)):{}),(s?aa:pt)(e,function(e,t,i){return n(r,e,t,i)}),r},y.unary=function(e){return rr(e,1)},y.union=On,y.unionBy=Dn,y.unionWith=Rn,y.uniq=function(e){return e&&e.length?Kt(e):[]},y.uniqBy=function(e,t){return e&&e.length?Kt(e,p(t,2)):[]},y.uniqWith=function(e,t){return t="function"==typeof t?t:Gs,e&&e.length?Kt(e,Gs,t):[]},y.unset=function(e,t){return null==e||Yt(e,t)},y.unzip=Ln,y.unzipWith=Mn,y.update=function(e,t,i){return null==e?e:Qt(e,t,ri(i))},y.updateWith=function(e,t,i,n){return n="function"==typeof n?n:Gs,null==e?e:Qt(e,t,ri(i),n)},y.values=is,y.valuesIn=function(e){return null==e?[]:Ho(e,P(e))},y.without=zn,y.words=fs,y.wrap=function(e,t){return hr(ri(t),e)},y.xor=jn,y.xorBy=Bn,y.xorWith=Gn,y.zip=Fn,y.zipObject=function(e,t){return ii(e||[],t||[],We)},y.zipObjectDeep=function(e,t){return ii(e||[],t||[],Ut)},y.zipWith=Un,y.entries=es,y.entriesIn=ts,y.extend=jr,y.extendWith=Br,Ss(y,y),y.add=Os,y.attempt=ys,y.camelCase=ns,y.capitalize=rs,y.ceil=Ds,y.clamp=function(e,t,i){return i===Gs&&(i=t,t=Gs),i!==Gs&&(i=(i=A(i))==i?i:0),t!==Gs&&(t=(t=A(t))==t?t:0),et(A(e),t,i)},y.clone=function(e){return k(e,4)},y.cloneDeep=function(e){return k(e,5)},y.cloneDeepWith=function(e,t){return k(e,5,t="function"==typeof t?t:Gs)},y.cloneWith=function(e,t){return k(e,4,t="function"==typeof t?t:Gs)},y.conformsTo=function(e,t){return null==t||tt(e,t,w(t))},y.deburr=ss,y.defaultTo=function(e,t){return null==e||e!=e?t:e},y.divide=Rs,y.endsWith=function(e,t,i){e=f(e),t=l(t);var n=e.length,n=i=i===Gs?n:et(I(i),0,n);return 0<=(i-=t.length)&&e.slice(i,n)==t},y.eq=B,y.escape=function(e){return(e=f(e))&&$a.test(e)?e.replace(Fa,ec):e},y.escapeRegExp=function(e){return(e=f(e))&&Ya.test(e)?e.replace(Ka,"\\$&"):e},y.every=function(e,t,i){return(G(e)?Do:at)(e,p(t=i&&h(e,t,i)?Gs:t,3))},y.find=qn,y.findIndex=En,y.findKey=function(e,t){return Bo(e,p(t,3),pt)},y.findLast=Wn,y.findLastIndex=Cn,y.findLastKey=function(e,t){return Bo(e,p(t,3),ht)},y.floor=Ls,y.forEach=Hn,y.forEachRight=Kn,y.forIn=function(e,t){return null==e?e:lt(e,p(t,3),P)},y.forInRight=function(e,t){return null==e?e:ut(e,p(t,3),P)},y.forOwn=function(e,t){return e&&pt(e,p(t,3))},y.forOwnRight=function(e,t){return e&&ht(e,p(t,3))},y.get=Vr,y.gt=dr,y.gte=mr,y.has=function(e,t){return null!=e&&en(e,t,gt)},y.hasIn=Xr,y.head=An,y.identity=N,y.includes=function(e,t,i,n){return e=u(e)?e:is(e),i=i&&!n?I(i):0,n=e.length,i<0&&(i=v(n+i,0)),wr(e)?i<=n&&-1<e.indexOf(t,i):!!n&&-1<ua(e,t,i)},y.indexOf=function(e,t,i){var n=null==e?0:e.length;return n?(i=null==i?0:I(i),ua(e,t,i=i<0?v(n+i,0):i)):-1},y.inRange=function(e,t,i){return t=Rr(t),i===Gs?(i=t,t=0):i=Rr(i),(e=e=A(e))>=x(t=t,i=i)&&e<v(t,i)},y.invoke=Wr,y.isArguments=gr,y.isArray=G,y.isArrayBuffer=_r,y.isArrayLike=u,y.isArrayLikeObject=T,y.isBoolean=function(e){return!0===e||!1===e||F(e)&&i(e)==Js},y.isBuffer=vr,y.isDate=V,y.isElement=function(e){return F(e)&&1===e.nodeType&&!Cr(e)},y.isEmpty=function(e){if(null==e)return!0;if(u(e)&&(G(e)||"string"==typeof e||"function"==typeof e.splice||vr(e)||Pr(e)||gr(e)))return!e.length;var t,i=j(e);if(i==Ws||i==Qs)return!e.size;if(cn(e))return!Ct(e).length;for(t in e)if(M.call(e,t))return!1;return!0},y.isEqual=function(e,t){return St(e,t)},y.isEqualWith=function(e,t,i){var n=(i="function"==typeof i?i:Gs)?i(e,t):Gs;return n===Gs?St(e,t,Gs,i):!!n},y.isError=kr,y.isFinite=function(e){return"number"==typeof e&&me(e)},y.isFunction=Tr,y.isInteger=Sr,y.isLength=xr,y.isMap=br,y.isMatch=function(e,t){return e===t||xt(e,t,Ki(t))},y.isMatchWith=function(e,t,i){return i="function"==typeof i?i:Gs,xt(e,t,Ki(t),i)},y.isNaN=function(e){return Er(e)&&e!=+e},y.isNative=function(e){if(on(e))throw new O("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return bt(e)},y.isNil=function(e){return null==e},y.isNull=function(e){return null===e},y.isNumber=Er,y.isObject=E,y.isObjectLike=F,y.isPlainObject=Cr,y.isRegExp=Ir,y.isSafeInteger=function(e){return Sr(e)&&-$s<=e&&e<=$s},y.isSet=Ar,y.isString=wr,y.isSymbol=C,y.isTypedArray=Pr,y.isUndefined=function(e){return e===Gs},y.isWeakMap=function(e){return F(e)&&j(e)==ea},y.isWeakSet=function(e){return F(e)&&"[object WeakSet]"==i(e)},y.join=function(e,t){return null==e?"":ge.call(e,t)},y.kebabCase=as,y.last=n,y.lastIndexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=n;if(i!==Gs&&(r=(r=I(i))<0?v(n+r,0):x(r,n-1)),t!=t)return Go(e,Uo,r,!0);for(var s=e,a=t,o=r+1;o--;)if(s[o]===a)return o;return o},y.lowerCase=os,y.lowerFirst=cs,y.lt=Nr,y.lte=Or,y.max=function(e){return e&&e.length?ot(e,N,mt):Gs},y.maxBy=function(e,t){return e&&e.length?ot(e,p(t,2),mt):Gs},y.mean=function(e){return $o(e,N)},y.meanBy=function(e,t){return $o(e,p(t,2))},y.min=function(e){return e&&e.length?ot(e,N,At):Gs},y.minBy=function(e,t){return e&&e.length?ot(e,p(t,2),At):Gs},y.stubArray=Ps,y.stubFalse=Ns,y.stubObject=function(){return{}},y.stubString=function(){return""},y.stubTrue=function(){return!0},y.multiply=zs,y.nth=function(e,t){return e&&e.length?Dt(e,I(t)):Gs},y.noConflict=function(){return ra._===this&&(ra._=Q),this},y.noop=xs,y.now=nr,y.pad=function(e,t,i){e=f(e);var n=(t=I(t))?ya(e):0;return!t||t<=n?e:Pi(ye(t=(t-n)/2),i)+e+Pi(fe(t),i)},y.padEnd=function(e,t,i){e=f(e);var n=(t=I(t))?ya(e):0;return t&&n<t?e+Pi(t-n,i):e},y.padStart=function(e,t,i){e=f(e);var n=(t=I(t))?ya(e):0;return t&&n<t?Pi(t-n,i)+e:e},y.parseInt=function(e,t,i){return t=i||null==t?0:t&&+t,ke(f(e).replace(Qa,""),t||0)},y.random=function(e,t,i){var n;return i&&"boolean"!=typeof i&&h(e,t,i)&&(t=i=Gs),i===Gs&&("boolean"==typeof t?(i=t,t=Gs):"boolean"==typeof e&&(i=e,e=Gs)),e===Gs&&t===Gs?(e=0,t=1):(e=Rr(e),t===Gs?(t=e,e=0):t=Rr(t)),t<e&&(n=e,e=t,t=n),i||e%1||t%1?(n=Te(),x(e+n*(t-e+So("1e-"+((n+"").length-1))),t)):jt(e,t)},y.reduce=function(e,t,i){var n=G(e)?Mo:Xo,r=arguments.length<3;return n(e,p(t,4),i,r,rt)},y.reduceRight=function(e,t,i){var n=G(e)?zo:Xo,r=arguments.length<3;return n(e,p(t,4),i,r,st)},y.repeat=function(e,t,i){return t=(i?h(e,t,i):t===Gs)?1:I(t),Bt(f(e),t)},y.replace=function(){var e=arguments,t=f(e[0]);return e.length<3?t:t.replace(e[1],e[2])},y.result=function(e,t,i){var n=-1,r=(t=si(t,e)).length;for(r||(r=1,e=Gs);++n<r;){var s=null==e?Gs:e[Sn(t[n])];s===Gs&&(n=r,s=i),e=Tr(s)?s.call(e):s}return e},y.round=js,y.runInContext=r,y.sample=function(e){return(G(e)?Ve:Gt)(e)},y.size=function(e){if(null==e)return 0;if(u(e))return wr(e)?ya(e):e.length;var t=j(e);return t==Ws||t==Qs?e.size:Ct(e).length},y.snakeCase=ls,y.some=function(e,t,i){return(G(e)?jo:Xt)(e,p(t=i&&h(e,t,i)?Gs:t,3))},y.sortedIndex=function(e,t){return Jt(e,t)},y.sortedIndexBy=function(e,t,i){return qt(e,t,p(i,2))},y.sortedIndexOf=function(e,t){var i=null==e?0:e.length;if(i){var n=Jt(e,t);if(n<i&&B(e[n],t))return n}return-1},y.sortedLastIndex=function(e,t){return Jt(e,t,!0)},y.sortedLastIndexBy=function(e,t,i){return qt(e,t,p(i,2),!0)},y.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var i=Jt(e,t,!0)-1;if(B(e[i],t))return i}return-1},y.startCase=us,y.startsWith=function(e,t,i){return e=f(e),i=null==i?0:et(I(i),0,e.length),t=l(t),e.slice(i,i+t.length)==t},y.subtract=Bs,y.sum=function(e){return e&&e.length?Jo(e,N):0},y.sumBy=function(e,t){return e&&e.length?Jo(e,p(t,2)):0},y.template=function(a,e,t){var o,c,i=y.templateSettings;t&&h(a,e,t)&&(e=Gs),a=f(a),e=Br({},e,i,Bi);var n=w(t=Br({},e.imports,i.imports,Bi)),r=Ho(t,n),l=0,i=e.interpolate||fo,u="__p += '",t=L((e.escape||fo).source+"|"+i.source+"|"+(i===Ja?so:fo).source+"|"+(e.evaluate||fo).source+"|$","g"),s="//# sourceURL="+(M.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++To+"]")+"\n";if(a.replace(t,function(e,t,i,n,r,s){return i=i||n,u+=a.slice(l,s).replace(yo,tc),t&&(o=!0,u+="' +\n__e("+t+") +\n'"),r&&(c=!0,u+="';\n"+r+";\n__p += '"),i&&(u+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=s+e.length,e}),u+="';\n",i=M.call(e,"variable")&&e.variable){if(no.test(i))throw new O("Invalid `variable` option passed into `_.template`")}else u="with (obj) {\n"+u+"\n}\n";if(u=(c?u.replace(za,""):u).replace(ja,"$1").replace(Ba,"$1;"),u="function("+(i||"obj")+") {\n"+(i?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}",(t=ys(function(){return D(n,s+"return "+u).apply(Gs,r)})).source=u,kr(t))throw t;return t},y.times=function(e,t){if((e=I(e))<1||$s<e)return[];for(var i=Vs,n=x(e,Vs),n=(t=p(t),e-=Vs,qo(n,t));++i<e;)t(i);return n},y.toFinite=Rr,y.toInteger=I,y.toLength=Lr,y.toLower=function(e){return f(e).toLowerCase()},y.toNumber=A,y.toSafeInteger=function(e){return e?et(I(e),-$s,$s):0===e?e:0},y.toString=f,y.toUpper=function(e){return f(e).toUpperCase()},y.trim=function(e,t,i){return(e=f(e))&&(i||t===Gs)?Wo(e):e&&(t=l(t))?(i=da(e),e=da(t),oi(i,Yo(i,e),Qo(i,e)+1).join("")):e},y.trimEnd=function(e,t,i){return(e=f(e))&&(i||t===Gs)?e.slice(0,sc(e)+1):e&&(t=l(t))?oi(i=da(e),0,Qo(i,da(t))+1).join(""):e},y.trimStart=function(e,t,i){return(e=f(e))&&(i||t===Gs)?e.replace(Qa,""):e&&(t=l(t))?oi(i=da(e),Yo(i,da(t))).join(""):e},y.truncate=function(e,t){var i,n=30,r="...",t=(E(t)&&(i="separator"in t?t.separator:i,n="length"in t?I(t.length):n,r="omission"in t?l(t.omission):r),(e=f(e)).length);if((t=ha(e)?(s=da(e)).length:t)<=n)return e;if((t=n-ya(r))<1)return r;var s,n=s?oi(s,0,t).join(""):e.slice(0,t);if(i===Gs)return n+r;if(s&&(t+=n.length-t),Ir(i)){if(e.slice(t).search(i)){var a,o=n;for((i=i.global?i:L(i.source,f(ao.exec(i))+"g")).lastIndex=0;a=i.exec(o);)var c=a.index;n=n.slice(0,c===Gs?t:c)}}else e.indexOf(l(i),t)==t||-1<(s=n.lastIndexOf(i))&&(n=n.slice(0,s));return n+r},y.unescape=function(e){return(e=f(e))&&Ua.test(e)?e.replace(Ga,ac):e},y.uniqueId=function(e){var t=++W;return f(e)+t},y.upperCase=ps,y.upperFirst=hs,y.each=Hn,y.eachRight=Kn,y.first=An,Ss(y,(Ms={},pt(y,function(e,t){M.call(y.prototype,t)||(Ms[t]=e)}),Ms),{chain:!1}),y.VERSION="4.17.21",aa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){y[e].placeholder=y}),aa(["drop","take"],function(i,n){g.prototype[i]=function(e){e=e===Gs?1:v(I(e),0);var t=this.__filtered__&&!n?new g(this):this.clone();return t.__filtered__?t.__takeCount__=x(e,t.__takeCount__):t.__views__.push({size:x(e,Vs),type:i+(t.__dir__<0?"Right":"")}),t},g.prototype[i+"Right"]=function(e){return this.reverse()[i](e).reverse()}}),aa(["filter","map","takeWhile"],function(e,t){var i=t+1,n=1==i||3==i;g.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:p(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}}),aa(["head","last"],function(e,t){var i="take"+(t?"Right":"");g.prototype[e]=function(){return this[i](1).value()[0]}}),aa(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");g.prototype[e]=function(){return this.__filtered__?new g(this):this[i](1)}}),g.prototype.compact=function(){return this.filter(N)},g.prototype.find=function(e){return this.filter(e).head()},g.prototype.findLast=function(e){return this.reverse().find(e)},g.prototype.invokeMap=a(function(t,i){return"function"==typeof t?new g(this):this.map(function(e){return kt(e,t,i)})}),g.prototype.reject=function(e){return this.filter(pr(p(e)))},g.prototype.slice=function(e,t){e=I(e);var i=this;return i.__filtered__&&(0<e||t<0)?new g(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==Gs?(t=I(t))<0?i.dropRight(-t):i.take(t-e):i)},g.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},g.prototype.toArray=function(){return this.take(Vs)},pt(g.prototype,function(l,e){var u=/^(?:filter|find|map|reject)|While$/.test(e),p=/^(?:head|last)$/.test(e),h=y[p?"take"+("last"==e?"Right":""):e],f=p||/^find/.test(e);h&&(y.prototype[e]=function(){function e(e){return e=h.apply(y,la([e],n)),p&&o?e[0]:e}var t,i=this.__wrapped__,n=p?[1]:arguments,r=i instanceof g,s=n[0],a=r||G(i),o=(a&&u&&"function"==typeof s&&1!=s.length&&(r=a=!1),this.__chain__),s=!!this.__actions__.length,c=f&&!o,r=r&&!s;return!f&&a?(i=r?i:new g(this),(t=l.apply(i,n)).__actions__.push({func:Vn,args:[e],thisArg:Gs}),new m(t,o)):c&&r?l.apply(this,n):(t=this.thru(e),c?p?t.value()[0]:t.value():t)})}),aa(["pop","push","shift","sort","splice","unshift"],function(e){var i=$[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);y.prototype[e]=function(){var e,t=arguments;return r&&!this.__chain__?(e=this.value(),i.apply(G(e)?e:[],t)):this[n](function(e){return i.apply(G(e)?e:[],t)})}}),pt(g.prototype,function(e,t){var i,n=y[t];n&&(i=n.name+"",M.call(Ae,i)||(Ae[i]=[]),Ae[i].push({name:t,func:n}))}),Ae[Ci(Gs,2).name]=[{name:"wrapper",func:Gs}],g.prototype.clone=function(){var e=new g(this.__wrapped__);return e.__actions__=b(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=b(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=b(this.__views__),e},g.prototype.reverse=function(){var e;return this.__filtered__?((e=new g(this)).__dir__=-1,e.__filtered__=!0):(e=this.clone()).__dir__*=-1,e},g.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,i=G(e),n=t<0,r=i?e.length:0,s=function(e,t,i){var n=-1,r=i.length;for(;++n<r;){var s=i[n],a=s.size;switch(s.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=x(t,e+a);break;case"takeRight":e=v(e,t-a)}}return{start:e,end:t}}(0,r,this.__views__),a=s.start,o=(s=s.end)-a,c=n?s:a-1,l=this.__iteratees__,u=l.length,p=0,h=x(o,this.__takeCount__);if(!i||!n&&r==o&&h==o)return ei(e,this.__actions__);var f=[];e:for(;o--&&p<h;){for(var y=-1,d=e[c+=t];++y<u;){var m=l[y],g=m.iteratee,m=m.type,g=g(d);if(2==m)d=g;else if(!g){if(1==m)continue e;break e}}f[p++]=d}return f},y.prototype.at=Xn,y.prototype.chain=function(){return $n(this)},y.prototype.commit=function(){return new m(this.value(),this.__chain__)},y.prototype.next=function(){this.__values__===Gs&&(this.__values__=Dr(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?Gs:this.__values__[this.__index__++]}},y.prototype.plant=function(e){for(var t,i=this;i instanceof je;)var n=bn(i),r=(n.__index__=0,n.__values__=Gs,t?r.__wrapped__=n:t=n,n),i=i.__wrapped__;return r.__wrapped__=e,t},y.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof g?(e=e,(e=(e=this.__actions__.length?new g(this):e).reverse()).__actions__.push({func:Vn,args:[Nn],thisArg:Gs}),new m(e,this.__chain__)):this.thru(Nn)},y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=function(){return ei(this.__wrapped__,this.__actions__)},y.prototype.first=y.prototype.head,oe&&(y.prototype[oe]=function(){return this}),y}();r?((r.exports=ma)._=ma,n._=ma):ra._=ma}.call(commonjsGlobal)}),xhtml={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},acorn=getCjsExportFromNamespace(acorn$1),acornJsx$1=createCommonjsModule(function(e){var y=/^[\da-fA-F]+$/,d=/^\d+$/,c=new WeakMap;function m(e){e=e.Parser.acorn||e;var i,n,r,s,t,a,o=c.get(e);return o||(i=e.tokTypes,t=e.TokContext,a=e.TokenType,n=new t("<tag",!1),r=new t("</tag",!1),s=new t("<tag>...</tag>",!0,!0),t={tc_oTag:n,tc_cTag:r,tc_expr:s},(a={jsxName:new a("jsxName"),jsxText:new a("jsxText",{beforeExpr:!0}),jsxTagStart:new a("jsxTagStart",{startsExpr:!0}),jsxTagEnd:new a("jsxTagEnd")}).jsxTagStart.updateContext=function(){this.context.push(s),this.context.push(n),this.exprAllowed=!1},a.jsxTagEnd.updateContext=function(e){var t=this.context.pop();t===n&&e===i.slash||t===r?(this.context.pop(),this.exprAllowed=this.curContext()===s):this.exprAllowed=!0},c.set(e,o={tokContexts:t,tokTypes:a})),o}function g(e){return e&&("JSXIdentifier"===e.type?e.name:"JSXNamespacedName"===e.type?e.namespace.name+":"+e.name.name:"JSXMemberExpression"===e.type?g(e.object)+"."+g(e.property):void 0)}e.exports=function(i){return i=i||{},function(e){return r={allowNamespaces:!1!==i.allowNamespaces,allowNamespacedObjects:!!i.allowNamespacedObjects},e=(t=e).acorn||acorn,n=m(e),o=e.tokTypes,c=n.tokTypes,s=e.tokContexts,a=n.tokContexts.tc_oTag,l=n.tokContexts.tc_cTag,u=n.tokContexts.tc_expr,p=e.isNewLine,h=e.isIdentifierStart,f=e.isIdentifierChar,function(){_inherits(i,t);var e=_createSuper(i);function i(){return _classCallCheck(this,i),e.apply(this,arguments)}return _createClass(i,[{key:"jsx_readToken",value:function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");var i=this.input.charCodeAt(this.pos);switch(i){case 60:case 123:return this.pos===this.start?60===i&&this.exprAllowed?(++this.pos,this.finishToken(c.jsxTagStart)):this.getTokenFromCode(i):(e+=this.input.slice(t,this.pos),this.finishToken(c.jsxText,e));case 38:e=(e+=this.input.slice(t,this.pos))+this.jsx_readEntity(),t=this.pos;break;case 62:case 125:this.raise(this.pos,"Unexpected token `"+this.input[this.pos]+"`. Did you mean `"+(62===i?"&gt;":"&rbrace;")+'` or `{"'+this.input[this.pos]+'"}`?');default:p(i)?(e=(e+=this.input.slice(t,this.pos))+this.jsx_readNewLine(!0),t=this.pos):++this.pos}}}},{key:"jsx_readNewLine",value:function(e){var t=this.input.charCodeAt(this.pos);return++this.pos,e=13===t&&10===this.input.charCodeAt(this.pos)?(++this.pos,e?"\n":"\r\n"):String.fromCharCode(t),this.options.locations&&(++this.curLine,this.lineStart=this.pos),e}},{key:"jsx_readString",value:function(e){for(var t="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===e)break;38===n?(t=(t+=this.input.slice(i,this.pos))+this.jsx_readEntity(),i=this.pos):p(n)?(t=(t+=this.input.slice(i,this.pos))+this.jsx_readNewLine(!1),i=this.pos):++this.pos}return t+=this.input.slice(i,this.pos++),this.finishToken(o.string,t)}},{key:"jsx_readEntity",value:function(){for(var e,t,i="",n=0,r=("&"!==this.input[this.pos]&&this.raise(this.pos,"Entity must start with an ampersand"),++this.pos);this.pos<this.input.length&&n++<10;){if(";"===(t=this.input[this.pos++])){"#"===i[0]?"x"===i[1]?(i=i.substr(2),y.test(i)&&(e=String.fromCharCode(parseInt(i,16)))):(i=i.substr(1),d.test(i)&&(e=String.fromCharCode(parseInt(i,10)))):e=xhtml[i];break}i+=t}return e||(this.pos=r,"&")}},{key:"jsx_readWord",value:function(){for(var e,t=this.pos;e=this.input.charCodeAt(++this.pos),f(e)||45===e;);return this.finishToken(c.jsxName,this.input.slice(t,this.pos))}},{key:"jsx_parseIdentifier",value:function(){var e=this.startNode();return this.type===c.jsxName?e.name=this.value:this.type.keyword?e.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(e,"JSXIdentifier")}},{key:"jsx_parseNamespacedName",value:function(){var e=this.start,t=this.startLoc,i=this.jsx_parseIdentifier();if(!r.allowNamespaces||!this.eat(o.colon))return i;e=this.startNodeAt(e,t);return e.namespace=i,e.name=this.jsx_parseIdentifier(),this.finishNode(e,"JSXNamespacedName")}},{key:"jsx_parseElementName",value:function(){if(this.type===c.jsxTagEnd)return"";var e=this.start,t=this.startLoc,i=this.jsx_parseNamespacedName();for(this.type!==o.dot||"JSXNamespacedName"!==i.type||r.allowNamespacedObjects||this.unexpected();this.eat(o.dot);){var n=this.startNodeAt(e,t);n.object=i,n.property=this.jsx_parseIdentifier(),i=this.finishNode(n,"JSXMemberExpression")}return i}},{key:"jsx_parseAttributeValue",value:function(){switch(this.type){case o.braceL:var e=this.jsx_parseExpressionContainer();return"JSXEmptyExpression"===e.expression.type&&this.raise(e.start,"JSX attributes must only be assigned a non-empty expression"),e;case c.jsxTagStart:case o.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}}},{key:"jsx_parseEmptyExpression",value:function(){var e=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(e,"JSXEmptyExpression",this.start,this.startLoc)}},{key:"jsx_parseExpressionContainer",value:function(){var e=this.startNode();return this.next(),e.expression=this.type===o.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(o.braceR),this.finishNode(e,"JSXExpressionContainer")}},{key:"jsx_parseAttribute",value:function(){var e=this.startNode();return this.eat(o.braceL)?(this.expect(o.ellipsis),e.argument=this.parseMaybeAssign(),this.expect(o.braceR),this.finishNode(e,"JSXSpreadAttribute")):(e.name=this.jsx_parseNamespacedName(),e.value=this.eat(o.eq)?this.jsx_parseAttributeValue():null,this.finishNode(e,"JSXAttribute"))}},{key:"jsx_parseOpeningElementAt",value:function(e,t){var i=this.startNodeAt(e,t),e=(i.attributes=[],this.jsx_parseElementName());for(e&&(i.name=e);this.type!==o.slash&&this.type!==c.jsxTagEnd;)i.attributes.push(this.jsx_parseAttribute());return i.selfClosing=this.eat(o.slash),this.expect(c.jsxTagEnd),this.finishNode(i,e?"JSXOpeningElement":"JSXOpeningFragment")}},{key:"jsx_parseClosingElementAt",value:function(e,t){e=this.startNodeAt(e,t),t=this.jsx_parseElementName();return t&&(e.name=t),this.expect(c.jsxTagEnd),this.finishNode(e,t?"JSXClosingElement":"JSXClosingFragment")}},{key:"jsx_parseElementAt",value:function(e,t){var i=this.startNodeAt(e,t),n=[],r=this.jsx_parseOpeningElementAt(e,t),s=null;if(!r.selfClosing){e:for(;;)switch(this.type){case c.jsxTagStart:if(e=this.start,t=this.startLoc,this.next(),this.eat(o.slash)){s=this.jsx_parseClosingElementAt(e,t);break e}n.push(this.jsx_parseElementAt(e,t));break;case c.jsxText:n.push(this.parseExprAtom());break;case o.braceL:n.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}g(s.name)!==g(r.name)&&this.raise(s.start,"Expected corresponding JSX closing tag for <"+g(r.name)+">")}var a=r.name?"Element":"Fragment";return i["opening"+a]=r,i["closing"+a]=s,i.children=n,this.type===o.relational&&"<"===this.value&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(i,"JSX"+a)}},{key:"jsx_parseText",value:function(){var e=this.parseLiteral(this.value);return e.type="JSXText",e}},{key:"jsx_parseElement",value:function(){var e=this.start,t=this.startLoc;return this.next(),this.jsx_parseElementAt(e,t)}},{key:"parseExprAtom",value:function(e){return this.type===c.jsxText?this.jsx_parseText():this.type===c.jsxTagStart?this.jsx_parseElement():_get(_getPrototypeOf(i.prototype),"parseExprAtom",this).call(this,e)}},{key:"readToken",value:function(e){var t=this.curContext();if(t===u)return this.jsx_readToken();if(t===a||t===l){if(h(e))return this.jsx_readWord();if(62==e)return++this.pos,this.finishToken(c.jsxTagEnd);if((34===e||39===e)&&t==a)return this.jsx_readString(e)}return 60===e&&this.exprAllowed&&33!==this.input.charCodeAt(this.pos+1)?(++this.pos,this.finishToken(c.jsxTagStart)):_get(_getPrototypeOf(i.prototype),"readToken",this).call(this,e)}},{key:"updateContext",value:function(e){if(this.type==o.braceL){var t=this.curContext();t==a?this.context.push(s.b_expr):t==u?this.context.push(s.b_tmpl):_get(_getPrototypeOf(i.prototype),"updateContext",this).call(this,e),this.exprAllowed=!0}else{if(this.type!==o.slash||e!==c.jsxTagStart)return _get(_getPrototypeOf(i.prototype),"updateContext",this).call(this,e);this.context.length-=2,this.context.push(l),this.exprAllowed=!1}}}],[{key:"acornJsx",get:function(){return n}}]),i}();var r,t,n,o,c,s,a,l,u,p,h,f}},Object.defineProperty(e.exports,"tokTypes",{get:function(){return m(acorn).tokTypes},configurable:!0,enumerable:!0})}),SCOPE_FUNCTION=2,SCOPE_ASYNC=4,SCOPE_GENERATOR=8,SCOPE_ARROW=16,SCOPE_SUPER=64,SCOPE_DIRECT_SUPER=128,BIND_NONE=0,Parser$1=acorn.Parser,TokenType=Parser$1.acorn.TokenType,tokTypes=Parser$1.acorn.tokTypes,keywordTypes=Parser$1.acorn.keywordTypes;function functionFlags(e,t){return SCOPE_FUNCTION|(e?SCOPE_ASYNC:0)|(t?SCOPE_GENERATOR:0)}function DestructuringErrors(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.parenthesizedBindParam=this.doubleProto=-1}keywordTypes.is=new TokenType("is",{beforeExpr:!0,binop:7,keyword:"is"}),tokTypes._is=keywordTypes.is,keywordTypes.as=new TokenType("as",{beforeExpr:!0,binop:7,keyword:"as"}),tokTypes._as=keywordTypes.as,keywordTypes.package=new TokenType("package",{startsExpr:!0,keyword:"package"}),tokTypes._package=keywordTypes.package,keywordTypes.implements=new TokenType("implements",{startsExpr:!0,keyword:"implements"}),tokTypes._implements=keywordTypes.implements,keywordTypes.private=new TokenType("private",{startsExpr:!0,keyword:"private"}),tokTypes._private=keywordTypes.private,keywordTypes.protected=new TokenType("protected",{startsExpr:!0,keyword:"protected"}),tokTypes._protected=keywordTypes.protected,keywordTypes.public=new TokenType("public",{startsExpr:!0,keyword:"public"}),tokTypes._public=keywordTypes.public,keywordTypes.internal=new TokenType("internal",{startsExpr:!0,keyword:"internal"}),tokTypes._internal=keywordTypes.internal,keywordTypes.final=new TokenType("final",{startsExpr:!0,keyword:"final"}),tokTypes._final=keywordTypes.final,keywordTypes.static=new TokenType("static",{startsExpr:!0,keyword:"static"}),tokTypes._static=keywordTypes.static,keywordTypes.when=new TokenType("when",{startsExpr:!0,keyword:"when"}),tokTypes._when=keywordTypes.when,keywordTypes.then=new TokenType("then",{startsExpr:!0,keyword:"then"}),tokTypes._then=keywordTypes.then,keywordTypes.enum=new TokenType("enum",{startsExpr:!0,keyword:"enum"}),tokTypes._enum=keywordTypes.enum,keywordTypes.interface=new TokenType("interface",{startsExpr:!0,keyword:"interface"}),tokTypes._interface=keywordTypes.interface,keywordTypes.abstract=new TokenType("abstract",{startsExpr:!0,keyword:"abstract"}),tokTypes._abstract=keywordTypes.abstract,tokTypes._declarator=new TokenType("declarator",{startsExpr:!0,keyword:"declarator"}),tokTypes._annotation=new TokenType("@",{startsExpr:!1});var tokenModifiers=[tokTypes._public,tokTypes._internal,tokTypes._protected,tokTypes._private,tokTypes._final,tokTypes._static],JSXParser=Parser$1.extend(acornJsx$1({allowNamespaces:!0,allowNamespacedObjects:!0})),acornJsx=JSXParser.acornJsx,tok=acornJsx.tokTypes,tt=tokTypes,tc_cdata_expr=new acorn.TokContext("<![CDATA[...]]>",!0,!0),tt_cdata_start=new TokenType("tt_cdata_start",{startsExpr:!0}),tt_cdata_end=new TokenType("tt_cdata_end"),tt_content_text=new TokenType("cssOrScriptText"),tc_script_expr=(tt_cdata_start.updateContext=function(){this.context.push(tc_cdata_expr),this.exprAllowed=!1},tt_cdata_end.updateContext=function(e){this.curContext()===tc_cdata_expr&&this.context.pop(),this.curContext()===tc_script_expr&&this.context.pop(),this.exprAllowed=this.curContext()===acornJsx.tokContexts.tc_expr},tt_content_text.updateContext=function(e){this.curContext()===tc_style_expr&&this.context.pop()},new acorn.TokContext("<script>...<\/script>",!0,!1)),tc_style_expr=new acorn.TokContext("<style>...</style>",!0,!0),tt_whitespace=new TokenType("whitespace");function getQualifiedJSXName(e){return e&&("JSXIdentifier"===e.type?e.name:"JSXNamespacedName"===e.type?e.namespace.name+":"+e.name.name:"JSXMemberExpression"===e.type?getQualifiedJSXName(e.object)+"."+getQualifiedJSXName(e.property):void 0)}var name,SyntaxParser=function(){_inherits(l,JSXParser);var n=_createSuper(l);function l(e,t,i){var a;return _classCallCheck(this,l),e.onComment=function(e,t,i,n,r,s){a.stackComments.push({type:e?"Block":"Line",value:t,start:i,end:n,startLoc:r,endLoc:s})},(a=n.call(this,e,t,i)).stackComments=[],a.keywords=new RegExp(a.keywords.source.replace(")$","|is|package|implements|static|final|public|internal|protected|private|when|then|enum|interface|abstract)$")),Array.isArray(e.reserved)&&0<e.reserved.length&&(a.reservedWords=new RegExp(a.reservedWords.source.replace(")$","|"+e.reserved.join("|")+")$"))),a}return _createClass(l,[{key:"getComments",value:function(e){if(this.stackComments.length<1)return null;var t=this.stackComments.splice(0,this.stackComments.length);return e&&(e.comments=t),t}},{key:"parseDoStatement",value:function(e){return this.getComments(e),_get(_getPrototypeOf(l.prototype),"parseDoStatement",this).call(this,e)}},{key:"parseForStatement",value:function(e){return this.getComments(e),_get(_getPrototypeOf(l.prototype),"parseForStatement",this).call(this,e)}},{key:"parseIfStatement",value:function(e){return this.getComments(e),_get(_getPrototypeOf(l.prototype),"parseIfStatement",this).call(this,e)}},{key:"parseThrowStatement",value:function(e){return this.getComments(e),_get(_getPrototypeOf(l.prototype),"parseThrowStatement",this).call(this,e)}},{key:"parseTryStatement",value:function(e){return this.getComments(e),_get(_getPrototypeOf(l.prototype),"parseTryStatement",this).call(this,e)}},{key:"parseWhileStatement",value:function(e){return this.getComments(e),_get(_getPrototypeOf(l.prototype),"parseWhileStatement",this).call(this,e)}},{key:"parseDebuggerStatement",value:function(e){return this.getComments(e),_get(_getPrototypeOf(l.prototype),"parseDebuggerStatement",this).call(this,e)}},{key:"parseBreakContinueStatement",value:function(e,t){return this.getComments(e),_get(_getPrototypeOf(l.prototype),"parseBreakContinueStatement",this).call(this,e,t)}},{key:"parseSwitchStatement",value:function(e){return this.getComments(e),_get(_getPrototypeOf(l.prototype),"parseSwitchStatement",this).call(this,e)}},{key:"parseReturnStatement",value:function(e){return this.getComments(e),_get(_getPrototypeOf(l.prototype),"parseReturnStatement",this).call(this,e)}},{key:"parseFunction",value:function(e,t,i,n){return this.getComments(e),_get(_getPrototypeOf(l.prototype),"parseFunction",this).call(this,e,t,i,n)}},{key:"isContextual",value:function(e){return!(!this.parseInterfaceElementFlag||"of"!==e)||_get(_getPrototypeOf(l.prototype),"isContextual",this).call(this,e)}},{key:"parseVarStatement",value:function(e,t,i,n){return this.getComments(e),i?(n||this.next(),this.eat(tokTypes.bracketL)?((i=this.startNode()).id=this.parseIdent(!1),this.expect(tokTypes.colon),i.id.acceptType=this.parseTypeStatement(),this.expect(tokTypes.bracketR),this.expect(tokTypes.colon),i.init=this.parseTypeStatement(),this.semicolon(),i.dynamic=!0,e.declarations=[this.finishNode(i,"VariableDeclarator")]):(this.parseVar(e,!1,t),this.semicolon()),this.finishNode(e,"VariableDeclaration")):_get(_getPrototypeOf(l.prototype),"parseVarStatement",this).call(this,e,t)}},{key:"finishOp",value:function(e,t){var i;return this.__$endToken&&0<this.__$endToken.length&&(e===(i=this.__$endToken[this.__$endToken.length-1]).token&&(t=1,e=i.value||e)),_get(_getPrototypeOf(l.prototype),"finishOp",this).call(this,e,t)}},{key:"parseMaybeConditional",value:function(e,t){var i=this.start,n=this.startLoc,r=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return r;if(this.eat(tokTypes.question)){if(t&&1<=t.parenthesizedBindParam){if(t.parenthesizedBindParam=2,this.type===tokTypes.comma||this.type===tokTypes.parenR)return t.parenthesizedBindParam=3,r.question=!0,r;if(this.type===tokTypes.colon)return this.next(),t.parenthesizedBindParam=3,r.question=!0,r.acceptType=this.parseTypeStatement(),r}t=this.startNodeAt(i,n);return t.test=r,t.consequent=this.parseMaybeAssign(),this.expect(tokTypes.colon),t.alternate=this.parseMaybeAssign(e),this.finishNode(t,"ConditionalExpression")}return r}},{key:"parseParenAndDistinguishExpression",value:function(e){var t,i=this.start,n=this.startLoc,r=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var s,a=this.start,o=this.startLoc,c=[],l=!0,u=!1,p=new DestructuringErrors,h=this.yieldPos,f=this.awaitPos;for(p.parenthesizedBindParam=1,this.yieldPos=0,this.awaitPos=0;this.type!==tokTypes.parenR;){if(l?l=!1:this.expect(tokTypes.comma),r&&this.afterTrailingComma(tokTypes.parenR,!0)){u=!0;break}if(this.type===tokTypes.ellipsis){s=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===tokTypes.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}c.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var y=this.start,d=this.startLoc,m=(this.expect(tokTypes.parenR),null);if(e&&this.eat(tokTypes.colon)&&(m=this.parseTypeStatement()),e&&!this.canInsertSemicolon()&&this.eat(tokTypes.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=h,this.awaitPos=f,(e=this.parseParenArrowList(i,n,c)).returnType=m,e;m&&this.unexpected(m.start),c.length&&!u||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(p,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=f||this.awaitPos,1<c.length?((t=this.startNodeAt(a,o)).expressions=c,this.finishNodeAt(t,"SequenceExpression",y,d)):t=c[0]}else t=this.parseParenExpression();e=this.startNodeAt(i,n);return t="SequenceExpression"===(e.expression=t).type||this.canInsertSemicolon()||this.type!==tokTypes._this&&this.type!==tokTypes.name?this.finishNode(e,"ParenthesizedExpression"):(i=this.start,n=this.startLoc,e.value=this.parseSubscripts(this.parseExprAtom(),i,n),this.finishNode(e,"TypeTransformExpression"))}},{key:"parseExprAtom",value:function(e){return this.type===tokTypes._annotation?this.parseAnnotation(!0):_get(_getPrototypeOf(l.prototype),"parseExprAtom",this).call(this,e)}},{key:"parseParenItem",value:function(e){return _get(_getPrototypeOf(l.prototype),"eat",this).call(this,tokTypes.colon)&&(e.acceptType=this.parseTypeStatement()),e}},{key:"readToken",value:function(e){var t=this.curContext();return t===tc_style_expr?this.jsx_readCDATAToken(e)||this.jsx_readTextToken("style"):64===e?(++this.pos,this.finishToken(tokTypes._annotation)):t===tc_script_expr?this.jsx_readCDATAToken(e)||_get(_getPrototypeOf(l.prototype),"readToken",this).call(this,e):t===tc_cdata_expr?this.jsx_readTextToken():this.jsx_readCDATAToken(e)?void 0:(this.exprAllowed||this.curContext()!==acornJsx.tokContexts.tc_expr||(this.exprAllowed=!0),_get(_getPrototypeOf(l.prototype),"readToken",this).call(this,e))}},{key:"finishToken",value:function(e,t){return"as"===t&&(e=tokTypes._as),_get(_getPrototypeOf(l.prototype),"finishToken",this).call(this,e,t)}},{key:"parseExpressionStatement",value:function(e,t){return this.getComments(e),_get(_getPrototypeOf(l.prototype),"parseExpressionStatement",this).call(this,e,t)}},{key:"initFunction",value:function(e){this.type===tokTypes.star&&this.raise(this.lastTokStart,"Function generator unsupported"),_get(_getPrototypeOf(l.prototype),"initFunction",this).call(this,e)}},{key:"parseClassSuper",value:function(e){if(e.superClass=null,this.eat(tokTypes._extends)&&(this.isStaticClass&&this.raise(this.lastTokStart,"Static class cannot extends super class."),e.superClass=this.parseChainIdentifier(),e.superClass&&(e.superClass.genericity=this.getGenerics(!0))),e.implements=null,this.eat(tokTypes._implements)){this.isStaticClass&&this.raise(this.lastTokStart,"Static class cannot implements interfaces."),e.implements=[];do{var t=this.parseChainIdentifier()}while(t&&(t.genericity=this.getGenerics(!0)),e.implements.push(t),this.eat(tokTypes.comma))}}},{key:"parseClassId",value:function(e,t){_get(_getPrototypeOf(l.prototype),"parseClassId",this).call(this,e,t),e.genericity=this.parseGenericType()}},{key:"parseMethod",value:function(e,t,i){var n=this.parseGenericType(),e=_get(_getPrototypeOf(l.prototype),"parseMethod",this).call(this,e,t,i);return e.genericity=n,e}},{key:"parseFunctionParams",value:function(e){e.genericity=this.parseGenericType(),_get(_getPrototypeOf(l.prototype),"parseFunctionParams",this).call(this,e)}},{key:"parseBlock",value:function(e,t){switch(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),this.currentScope().flags&SCOPE_FUNCTION){case SCOPE_ARROW:case SCOPE_FUNCTION:case SCOPE_ASYNC:case SCOPE_GENERATOR:this.eat(tokTypes.colon)&&(t.acceptType=this.parseTypeStatement())}e=_get(_getPrototypeOf(l.prototype),"parseBlock",this).call(this,e,t);return this.stackComments.length=0,e}},{key:"checkUnreserved",value:function(e){this.__parseBindingAtom&&"default"!==e.name&&_get(_getPrototypeOf(l.prototype),"checkUnreserved",this).call(this,e)}},{key:"parseBindingAtom",value:function(){this.__parseBindingAtom=!0;var e=_get(_getPrototypeOf(l.prototype),"parseBindingAtom",this).call(this);return this.__parseBindingAtom=!1,this.eat(tokTypes.question)&&(e.question=!0),this.eat(tokTypes.colon)&&(e.acceptType=this.parseTypeStatement()),(e.question||e.acceptType)&&this.finishNode(e,e.type),e}},{key:"parsePropertyValue",value:function(e,t,i,n,r,s,a,o){t&&this.eat(tokTypes.colon)&&(e.acceptType=this.parseTypeStatement());var c=this.parseGenericType();_get(_getPrototypeOf(l.prototype),"parsePropertyValue",this).call(this,e,t,i,n,r,s,a,o),e.value&&"FunctionExpression"===e.value.type?e.value.genericity=c:c&&this.unexpected(c.start)}},{key:"parseMaybeAssign",value:function(e,t,i){var n=this.parseGenericType(),e=_get(_getPrototypeOf(l.prototype),"parseMaybeAssign",this).call(this,e,t,i);return"ArrowFunctionExpression"===e.type?e.genericity=n:n&&this.unexpected(n.start),e}},{key:"parseArrowExpression",value:function(e,t,i){var n=null,e=(this.arrowReturnType&&this.arrowReturnType[this.lastTokStart]&&(n=this.arrowReturnType[this.lastTokStart],delete this.arrowReturnType[this.lastTokStart]),_get(_getPrototypeOf(l.prototype),"parseArrowExpression",this).call(this,e,t,i));return e.returnType=n,e}},{key:"parseFunctionBody",value:function(e,t,i){if(t||this.type!==tokTypes.colon||(this.next(),e.returnType=this.parseTypeStatement()),this.parseInterfaceElementFlag)return this.parseInterfaceElementFlag=!1,this.semicolon(),this.checkParams(e),this.exitScope(),e;_get(_getPrototypeOf(l.prototype),"parseFunctionBody",this).call(this,e,t,i)}},{key:"parseNew",value:function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(tokTypes.dot))return e.meta=t,t=this.containsEsc,e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),t&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"'new.target' can only be used in functions"),this.finishNode(e,"MetaProperty");var t=this.start,i=this.startLoc,n=this.type===tokTypes._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),t,i,!0),n&&"ImportExpression"===e.callee.type&&this.raise(t,"Cannot use new with import()"),t=this.start,e.genericity=this.getGenerics(!0),!e.genericity||0<e.genericity.length||this.raise(t,"Missing generics arguments."),this.eat(tokTypes.parenL)?e.arguments=this.parseExprList(tokTypes.parenR,8<=this.options.ecmaVersion,!1):e.arguments=[],this.finishNode(e,"NewExpression")}},{key:"parseSubscript",value:function(e,t,i,n,r,s){var a=this.start,o=n?null:this.getGenerics(!1),c=this.start,t=_get(_getPrototypeOf(l.prototype),"parseSubscript",this).call(this,e,t,i,n,r,s);return"CallExpression"===t.type?e!==t?(!o||0<o.length||this.raise(a,"Missing generics arguments."),t.genericity=o):o&&this.unexpected(c):o&&this.raise(c,"'(' expected."),t}},{key:"parseExprOp",value:function(e,t,i,n,r){var s;return this.type===tokTypes._as?(this.next(),(s=this.startNode()).left=e,s.right=this.parseTypeStatement(),this.finishNode(s,"TypeAssertExpression")):_get(_getPrototypeOf(l.prototype),"parseExprOp",this).call(this,e,t,i,n,r)}},{key:"parseStatement",value:function(e,t,i){switch(this.type){case tokTypes._package:return t||this.unexpected(),this.parsePackage(this.startNode(),!0);case tokTypes._abstract:t||this.unexpected();var n=this.startNode();return n.name="abstract",this.next(),this.type!==tokTypes._class&&this.unexpected(),this.finishNode(n,"ModifierDeclaration"),(s=this.parseClass(this.startNode(),!0)).abstract=n,s;case tokTypes._public:return t||this.unexpected(),this.next(),(r=this.finishNode(this.startNode(),"ModifierDeclaration")).name="public",(s=this.parseStatement(null,t,i)).modifier=r,s;case tokTypes._internal:return t||this.unexpected(),this.next(),(r=this.finishNode(this.startNode(),"ModifierDeclaration")).name="internal",(s=this.parseStatement(null,t,i)).modifier=r,s;case tokTypes._final:return t||this.unexpected(),this.next(),(r=this.finishNode(this.startNode(),"ModifierDeclaration")).name="final",(s=this.parseStatement(null,t,i)).final=r,s;case tokTypes._protected:return t||this.unexpected(),this.next(),(r=this.finishNode(this.startNode(),"ModifierDeclaration")).name="protected",(s=this.parseStatement(null,t,i)).modifier=r,s;case tokTypes._private:this.raise(this.lastTokStart,"Private modifier can only be used in class member methods");break;case tokTypes._static:var r;return t||this.unexpected(),this.next(),(r=this.finishNode(this.startNode(),"ModifierDeclaration")).name="static",(s=tokTypes._class===this.type?this.parseClass(this.startNode(),!0):this.parseStatement(null,t,i)).static=r,s;case tokTypes._import:return t||this.unexpected(),this.parseImport(this.startNode());case tokTypes._when:return this.parseWhenStatement(this.startNode());case tokTypes._enum:return this.parseEnumStatement(this.startNode(),t);case tokTypes._interface:return t||this.unexpected(),this.parseInterface(this.startNode(),t);case tokTypes._annotation:if(t)return this.parseAnnotation()}if(t&&"declare"===this.value)return this.parseDeclarator(this.startNode(),t);if(this.type===tokTypes.name&&"await"===this.value&&!this.inAsync)return this.parseAwait();if(this.type!==tokTypes.name||"type"!==this.value||this.isAsyncFunction())return _get(_getPrototypeOf(l.prototype),"parseStatement",this).call(this,e,t,i);var s=this.startNode(),a=this.value,o=this.parseExpression();if("Identifier"===o.type){if(this.eat(tokTypes.colon))return this.parseLabeledStatement(s,a,o,e);if(this.type===tokTypes.name)return s.id=this.parseIdent(!1),this.expect(tokTypes.eq),s.init=this.parseTypeStatement(),this.finishNode(s,"TypeStatement"),this.semicolon(),s}return this.parseExpressionStatement(s,o)}},{key:"parseWhenStatement",value:function(e){function t(e,t){e.var=e.var.concat(t.var),e.lexical=e.lexical.concat(t.lexical),e.functions=e.functions.concat(t.functions)}var i=this.currentScope(),n=(this.next(),e.test=this.parseParenExpression(),this.enterScope(SCOPE_FUNCTION),this.currentScope()),r=(t(n,i),e.consequent=_get(_getPrototypeOf(l.prototype),"parseStatement",this).call(this,"when"),this.exitScope(),this.enterScope(SCOPE_FUNCTION),this.currentScope());return t(r,i),e.alternate=this.eat(tokTypes._then)?_get(_getPrototypeOf(l.prototype),"parseStatement",this).call(this,"then"):null,this.exitScope(),t(i,n),t(i,r),this.finishNode(e,"WhenStatement")}},{key:"parseEnumProperty",value:function(){var e=this.startNode();return e.key=this.startNode(),this.type===tokTypes.name?(e.key.name=this.value,this.checkUnreserved(e.key),this.finishNode(e.key,"Identifier")):this.unexpected(),this.next(),this.eat(tokTypes.eq)&&(e.init=this.type===tokTypes.num?this.parseLiteral(this.value):this.parseExprAtom()),this.finishNode(e,"EnumProperty")}},{key:"parseEnumStatement",value:function(e){this.getComments(e),this.next(),e.key=this.parseIdent(!1,!1),this.expect(tokTypes.braceL),this.enterScope(1);for(var t=[];this.type!==tokTypes.braceR;)this.type!==tokTypes.name&&this.unexpected(),t.push(this.parseEnumProperty()),this.type===tokTypes.comma&&this.next();return e.properties=t,this.expect(tokTypes.braceR),this.semicolon(),this.exitScope(),this.finishNode(e,"EnumDeclaration")}},{key:"parseInterface",value:function(e){this.getComments(e),this.next();var t=this.strict;if(this.strict=!0,this.parseClassId(e,!0),this.type===tokTypes._extends&&(this.next(),e.extends=this.parseChainIdentifier(),e.extends&&(e.extends.genericity=this.getGenerics(!0))),this.eat(tokTypes._implements)){e.implements=[];do{var i=this.parseChainIdentifier()}while(i&&(i.genericity=this.getGenerics(!0)),e.implements.push(i),this.eat(tokTypes.comma))}var n=[];for(this.expect(tokTypes.braceL),this.enterScope(1);this.type!==tokTypes.braceR;){this.parseInterfaceElementFlag=!0;var r=this.parseClassElement(!1);r&&n.push(r)}return this.strict=t,this.next(),e.body=n,this.exitScope(),this.finishNode(e,"InterfaceDeclaration")}},{key:"parseDeclarator",value:function(e){this.getComments(e),this.next();var t=this.strict;this.strict=!0,e.kind="class";var i=_slicedToArray(this.parseModifier(),3),n=i[0],r=i[1],i=i[2];if(e.modifier=n,e.static=r,e.final=i,this.type===tokTypes._const||this.type===tokTypes._var)return n=this.value,e.expression=this.parseVarStatement(e,"var",!0),e.expression.kind=n,e.kind=n,this.finishNode(e,"DeclaratorVariable");if(this.type===tokTypes._function)return this.next(),e.kind="function",e.id=this.parseIdent(),r=this.parseGenericType(),this.expect(tokTypes.parenL),e.genericity=r,e.params=this.parseBindingList(tokTypes.parenR,!1,!0),this.eat(tokTypes.colon)&&(e.returnType=this.parseTypeStatement()),this.semicolon(),this.finishNode(e,"DeclaratorFunction"),e;if(this.type===tokTypes._class?(this.next(),e.kind="class"):this.type===tokTypes._interface&&(this.next(),e.kind="interface"),this.parseClassId(e,!1),this.type===tokTypes._extends&&(this.next(),e.extends=this.parseChainIdentifier(),e.extends&&(e.extends.genericity=this.getGenerics(!0))),this.eat(tokTypes._implements)){e.implements=[];do{var s=this.parseChainIdentifier()}while(s&&(s.genericity=this.getGenerics(!0)),e.implements.push(s),this.eat(tokTypes.comma))}if(this.type!==tokTypes.braceL&&e.id&&"type"===e.id.name)return delete e.id,e.left=this.parseIdent(!0),e.kind="type",this.eat(tokTypes.eq)?e.right=this.parseTypeStatement(!1):this.unexpected(),this.semicolon(),this.finishNode(e,"DeclaratorTypeAlias");var a=[];for(this.expect(tokTypes.braceL),this.enterScope(1);this.type!==tokTypes.braceR;){this.parseInterfaceElementFlag=!0;var o=this.parseClassElement("class"===e.kind,!0);o&&a.push(o)}return this.strict=t,this.next(),e.body=a,this.exitScope(),this.finishNode(e,"DeclaratorDeclaration")}},{key:"eatContextual",value:function(e){var t=_get(_getPrototypeOf(l.prototype),"eatContextual",this).call(this,e);return t&&("get"===e||"set"===e)&&this.tryPropertyContextualFlag&&(this.tryPropertyContextualGenerics=this.parseGenericType(),this.tryPropertyContextualFlag=!1),t}},{key:"parseChainIdentifier",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=this.start,i=this.startLoc,n=this.type,e=e||_get(_getPrototypeOf(l.prototype),"parseIdent",this).call(this,n===tokTypes._void||n===tokTypes._class||n===tokTypes._this);for(this.checkLVal(e,BIND_NONE);this.eat(tokTypes.dot);){var r=this.startNodeAt(t,i);r.object=e,r.property=this.parseIdent("never"!==this.options.allowReserved),e=this.finishNode(r,"MemberExpression")}return e}},{key:"parseGenericType",value:function(){if(this.type===tokTypes.relational&&this.value&&60===this.value.charCodeAt(0)){var e=this.startNode(),t=[];this.next();do{var i=this.start,n=this.startLoc,r=this.parseTypeStatement(!0),s=r}while(this.eat(tokTypes.eq)?((s=this.startNodeAt(i,n)).left=r,s.right=this.parseTypeStatement(),this.finishNode(s,"GenericTypeAssignmentDeclaration")):(this.eat(tokTypes._extends)&&(r.extends=this.parseTypeStatement()),this.finishNode(s,"GenericTypeDeclaration")),t.push(s),this.eat(tokTypes.comma));return this.type!==tokTypes.relational||62!==this.value.charCodeAt(0)?this.unexpected():this.next(),e.elements=t,this.finishNode(e,"GenericDeclaration")}return null}},{key:"testTupleUnion",value:function(){for(var e=this.input,t=this.start,i=1,n=!1;t<e.length;){var r=e.charCodeAt(t);if(!1===n&&47===r&&42===e.charCodeAt(t+1))n=47,t++;else if(42===r&&e.charCodeAt(t+1)===n)n=!1,t++;else if(!1===n&&47===r&&47===e.charCodeAt(t+1))n=10,t++;else if(n===r)n=!1;else if(!1===n&&(40===r?i++:41===r&&i--,59===r||0===i))break;t++}if(0!==i)return null;for(;t<e.length&&32===e.charCodeAt(t+1)&&t++;);return{arrow:61===e.charCodeAt(t+1)&&62===e.charCodeAt(t+2),array:91===e.charCodeAt(t+1)}}},{key:"getGenerics",value:function(e,t){if(this.type===tokTypes.relational&&this.value&&60===this.value.charCodeAt(0)){if(!e){for(var i=this.input,n=this.start,r=0,s=!1;n<i.length;){var a=i.charCodeAt(n);if(!1===s&&47===a&&42===i.charCodeAt(n+1))s=47,n++;else if(42===a&&i.charCodeAt(n+1)===s)s=!1,n++;else if(!1===s&&47===a&&47===i.charCodeAt(n+1))s=10,n++;else if(s===a)s=!1;else if(!1===s&&(60===a?r++:62===a&&r--,59===a||0===r))break;n++}e=0===r}if(e){this.next();var o=[],e=this.__$endToken||(this.__$endToken=[]);for(e.push({token:tokTypes.bitShift,value:tokTypes.relational});this.type!==tokTypes.relational||62!==this.value.charCodeAt(0)||1!==this.value.length;){var c=this.parseTypeStatement();if(c.restElement&&this.raise(c.start,"Rest type can only appear in tuple types"),o.push(c),!this.eat(tokTypes.comma))break}return e.pop(),this.type===tokTypes.relational&&62===this.value.charCodeAt(0)&&1===this.value.length?this.next():this.raise(this.start,"Expected '>'"),t&&(t.typeElements=o,this.finishNode(t,"TypeGenericDefinition")),o}}return null}},{key:"parseTypeStatement",value:function(e,t){var i,n=this,r=this.start,s=this.startLoc,a=e?this.startNodeAt(e.start,e.end):this.startNode(),o="TypeDefinition";if(this.type===tokTypes._void)a.value=this.parseChainIdentifier(),this.finishNode(a,o);else{if(tokTypes._typeof===this.type)return this.next(),a.value=this.parseExpression(),this.finishNode(a,"TypeTypeofDefinition");if(this.type===tokTypes.name||this.type===tokTypes._class||this.type===tokTypes._this){if("keyof"===this.value)return this.next(),a.value=this.parseTypeStatement(),this.finishNode(a,"TypeKeyofDefinition");a.value=this.parseChainIdentifier();var c=this.getGenerics(!0);if(c&&(a.typeElements=c,o="TypeGenericDefinition"),this.type===tokTypes.bracketL&&!this.canInsertSemicolon())return this.finishNode(a,o),this.parseTypeStatement(a);this.finishNode(a,o)}else if(this.eat(tokTypes.bracketL)){for(var l=[];this.type!==tokTypes.bracketR;){var u=!!this.eat(tokTypes.ellipsis),p=this.parseTypeStatement();if(u&&this.finishNode(p,"TypeTupleRestDefinition"),l.push(p),!this.eat(tokTypes.comma))break}if(this.expect(tokTypes.bracketR),o=e&&1===l.length?(a.object=e,a.property=l[0],"TypeComputeDefinition"):(a.prefix=e,a.elements=l,"TypeTupleDefinition"),this.finishNode(a,o),this.type===tokTypes.bracketL&&!this.canInsertSemicolon())return this.finishNode(a,o),this.parseTypeStatement(a)}else if(this.eat(tokTypes.braceL)){for(var h=!0,f=(a.properties=[],{});!this.eat(tokTypes.braceR);){if(h)h=!1;else if(this.expect(tokTypes.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(tokTypes.braceR))break;a.properties.push((i=void 0,i=n.startNode(),n.eat(tokTypes.bracketL)?(i.key=n.parseIdent(!1),n.expect(tokTypes.colon),i.key.acceptType=n.parseTypeStatement(),i.key.computed=!0,n.expect(tokTypes.bracketR)):i.key=n.parseIdent("never"!==n.options.allowReserved),n.eat(tokTypes.question)&&(i.key.question=!0),n.eat(tokTypes.colon)&&(i.value=n.parseTypeStatement()),f[i.key.name]&&n.raiseRecoverable(i.key.start,"Redefinition of property"),f[i.key.name]=!0,n.finishNode(i,"TypeObjectPropertyDefinition")))}this.finishNode(a,o="TypeObjectDefinition")}else this.eat(tokTypes.parenL)?this.type===tokTypes.parenL?(a=this.parseTypeStatement(),this.expect(tokTypes.parenR)):(o=(c=this.testTupleUnion())&&!c.arrow&&c.array?(a=this.parseTypeStatement(),this.expect(tokTypes.parenR),this.expect(tokTypes.bracketL),this.expect(tokTypes.bracketR),"TypeTupleUnionDefinition"):(e=this.parseBindingList(tokTypes.parenR,!1,8<=this.options.ecmaVersion),this.expect(tokTypes.arrow),a.params=e,a.value=this.parseTypeStatement(),"TypeFunctionDefinition"),this.finishNode(a,o)):tokTypes.num===this.type||tokTypes.string===this.type||tokTypes._null===this.type||tokTypes._true===this.type||tokTypes._false===this.type?(a.value=this.parseExprAtom(),this.finishNode(a,o)):this.unexpected()}for(var y=[a],d=this.startLoc;;)if(t!==tokTypes.bitwiseOR&&this.eat(tokTypes.bitwiseOR))y.push(this.parseTypeStatement(null,tokTypes.bitwiseOR));else{if(!this.eat(tokTypes.bitwiseAND))break;var m=y.pop(),g=this.startNodeAt(m.start,d);g.left=m,g.right=this.parseTypeStatement(null,tokTypes.bitwiseOR),y.push(g),this.finishNode(g,"TypeIntersectionDefinition"),d=this.startLoc}return 1<y.length?((c=this.startNodeAt(r,s)).elements=y,this.finishNode(c,"TypeUnionDefinition")):y[0]}},{key:"parseAnnotation",value:function(e){var n=this,t=this.startNode();if(this.next(),t.name=this.value,t.name,this.next(),this.eat(tokTypes.parenL)){t.body=[];for(;this.type!==tokTypes.parenR;){var i=function(){var e=n.start,t=n.startLoc;switch(n.type){case tokTypes.string:case tokTypes.num:case tokTypes._null:case tokTypes._true:case tokTypes._false:return _get(_getPrototypeOf(l.prototype),"parseExprAtom",n).call(n);default:var i=n.parseMaybeDefault(e,t);if("Identifier"===i.type)return n.parseSubscripts(i,e,t,!0);if("AssignmentPattern"===i.type||"ArrayPattern"===i.type||"ObjectPattern"===i.type)return i;n.raise(n.pos,"Annotation expression parameters can only is scalar type")}}();if(i&&t.body.push(i),!this.eat(tokTypes.comma))break}this.expect(tokTypes.parenR)}return!0===e?(this.finishNode(t,"AnnotationExpression"),this.canInsertSemicolon()&&this.semicolon(),t):(this.semicolon(),this.finishNode(t,"AnnotationDeclaration"))}},{key:"parseMetatype",value:function(){var e=this.startNode();if(e.name=this.value,this.next(),this.eat(tokTypes.parenL)){for(e.body=[];this.type!==tokTypes.parenR;){var t=this.startNode(),i=this.startNode();if(t.name=this.value,i.name=this.value,this.next(),this.eat(tokTypes.eq)&&(t.left=this.finishNode(i,"Identifier"),t.right=this.parseMaybeAssign()),e.body.push(t),t.right?this.finishNode(t,"AssignmentPattern"):this.finishNode(t,"Identifier"),!this.eat(tokTypes.comma))break}this.expect(tokTypes.parenR)}return this.expect(tokTypes.bracketR),this.semicolon(),this.finishNode(e,"MetatypeDeclaration")}},{key:"parseModifier",value:function(){for(var e=Array(3);tokenModifiers.includes(this.type);){var t=this.startNode(),i=this.type.label;t.name=i,this.next(),this.finishNode(t,"ModifierDeclaration"),"final"===i?e[3]=t:"static"===i?e[1]=t:e[0]=t}return e}},{key:"parseClassProperty",value:function(e,t,i){return(e=this.parseVarStatement(e,t,!0,i)).declarations&&1<e.declarations.length&&this.raise(e.start,"Only one class property member can be defined in a declaration"),this.finishNode(e,"PropertyDefinition")}},{key:"parseClass",value:function(e,t){return this.getComments(e),e=_get(_getPrototypeOf(l.prototype),"parseClass",this).call(this,e,t)}},{key:"parseClassElement",value:function(e,t){if(this.type===tokTypes._annotation)return this.parseAnnotation();if(this.eat(tokTypes.semi))return null;var i=this.getComments(),n=this.parseModifier(),r=this.type===tokTypes.bracketL,s=r||this.type===tokTypes._const||this.type===tokTypes._var,a=this.start,o=this.startLoc,t=(this.tryPropertyContextualFlag=!0,this.isDeclareInterfaceFlag=t,s?this.parseClassProperty(this.startNode(),r?"var":this.value,r):_get(_getPrototypeOf(l.prototype),"parseClassElement",this).call(this,e)),e=(t&&"method"===t.kind&&t.isPropertyDefinition&&(s=this.startNodeAt(a,o),r=t.key,s.id=r,s.init=r.init,t.declarations=[s],t.kind="var",this.finishNode(s,"VariableDeclarator"),this.finishNode(t,"PropertyDefinition"),delete s.id.init,delete t.key,delete t.isPropertyDefinition),this.tryPropertyContextualGenerics);return e&&"MethodDefinition"===t.type&&(t.value.genericity=e),this.tryPropertyContextualGenerics=null,t.comments=i,n[0]&&(t.modifier=n[0]),n[1]&&(t.static=n[1]),n[2]&&(t.final=n[2]),t}},{key:"parsePropertyName",value:function(e){"method"===e.kind&&(this.exprAllowed=!1);var t=_get(_getPrototypeOf(l.prototype),"parsePropertyName",this).call(this,e);return"method"===e.kind&&(this.eat(tokTypes.question)&&(t.question=!0),e.key&&(this.eat(tokTypes.colon)&&(e.isPropertyDefinition=!0,e.key.acceptType=this.parseTypeStatement()),this.eat(tokTypes.eq)&&(e.isPropertyDefinition=!0,e.key.init=_get(_getPrototypeOf(l.prototype),"parseMaybeAssign",this).call(this)),e.isPropertyDefinition&&(this.isDeclareInterfaceFlag&&(this.isDeclareInterfaceFlag=!1,this.eat(tokTypes.comma)),this.semicolon()))),t}},{key:"parseClassMethod",value:function(e,t,i,n){return e.isPropertyDefinition?e:_get(_getPrototypeOf(l.prototype),"parseClassMethod",this).call(this,e,t,i,n)}},{key:"parseImport",value:function(e){return this.next(),this.type!==tokTypes.name&&this.unexpected(),e.specifiers=this.parseChainIdentifier(),this.eat(tokTypes._as)&&(this.type!==tokTypes.name&&this.unexpected(),e.alias=_get(_getPrototypeOf(l.prototype),"parseIdent",this).call(this)),this.semicolon(),this.finishNode(e,"ImportDeclaration")}},{key:"parseExport",value:function(){this.raise(this.lastTokStart,"Do not need to use an export.")}},{key:"parsePackage",value:function(e,t){function i(){return n.type===tokTypes._annotation?n.parseAnnotation():null}var n=this,r=(this.getComments(e),this.next(),this.strict);this.strict=!0,e.body=[],e.id=null,this.type===tokTypes.semi?this.next():tokTypes.braceL!==this.type&&(e.id=this.parseChainIdentifier(),this.type===tokTypes.semi&&this.next());if(this.eat(tokTypes.braceL))for(e.isBlock=!0;!this.eat(tokTypes.braceR);){var s=i();s?e.body.push(s):e.body.push(this.parseStatement(null,!0))}else for(e.isBlock=!1;tokTypes.eof!==this.type;){var a=i();a?e.body.push(a):e.body.push(this.parseStatement(null,!0))}return this.strict=r,this.finishNode(e,"PackageDeclaration")}},{key:"hasBacklash",value:function(e){for(var t=0;92===this.input.charCodeAt(e--)&&0<e;)t++;return t%2==1}},{key:"jsx_readWhitespaceToken",value:function(e){for(var t=this.pos,i=!1;32===e||(i=acorn.isNewLine(e));)++this.pos,i&&(i=!1,13===e&&10===this.input.charCodeAt(this.pos)&&++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos)),e=this.input.charCodeAt(this.pos);return this.pos!==t&&(this.finishToken(tt_whitespace,this.input.slice(t,this.pos)),!0)}},{key:"jsx_readTextToken",value:function(e){var t="",i=this.pos;for(this.start=i;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");var n=this.input.charCodeAt(this.pos);if(acorn.isNewLine(n))t=(t+=this.input.slice(i,this.pos))+this.jsx_readNewLine(!0),i=this.pos;else if(e){if(60===n&&47===this.input.charCodeAt(this.pos+1)&&!this.hasBacklash(this.pos-1)&&this.input.substr(this.pos+2,e.length).toLowerCase()===e)return t+=this.input.slice(i,this.pos),this.finishToken(tt_content_text,t);++this.pos}else{if(93===n&&93===this.input.charCodeAt(this.pos+1)&&62===this.input.charCodeAt(this.pos+2)&&!this.hasBacklash(this.pos-1))return t+=this.input.slice(i,this.pos),this.finishToken(tt_content_text,t);++this.pos}}}},{key:"jsx_parseOpeningElementAt",value:function(e,t){var i=this.startNodeAt(e,t),e=(i.attributes=[],this.jsx_parseElementName());for(e&&(i.name=e);this.type!==tt.slash&&this.type!==tok.jsxTagEnd;)i.attributes.push(this.jsx_parseAttribute());return i.selfClosing=this.eat(tt.slash),!e||"string"!=typeof e.name||i.selfClosing||"script"!==(t=e.name.toLowerCase())&&"style"!==t||("script"===t?this.context.push(tc_script_expr):this.context.push(tc_style_expr)),this.expect(tok.jsxTagEnd),this.finishNode(i,e?"JSXOpeningElement":"JSXOpeningFragment")}},{key:"jsx_parseElementAt",value:function(e,t){var i=this.startNodeAt(e,t),n=[],r=this.jsx_parseOpeningElementAt(e,t),s=null,a=null;if(r.name&&("style"===(o=getQualifiedJSXName(r.name).toLowerCase())?a="Style":"script"===o&&(a="Script")),!r.selfClosing){var o=this.curContext();if(o===tc_style_expr&&this.type!==tt_cdata_start){for(this.startNode().body=[];this.type!==tok.jsxTagStart;)switch(this.type){case tt_whitespace:case tt_content_text:case tok.jsxText:n.push(this.finishNode(this.parseLiteral(this.value),"JSXText"));break;default:this.unexpected()}a="Style",e=this.start,t=this.startLoc,this.expect(tok.jsxTagStart),this.expect(tt.slash),s=this.jsx_parseClosingElementAt(e,t)}else if(o===tc_script_expr&&this.type!==tt_cdata_start){for(this.enterScope(1);this.type!==tok.jsxTagStart;)this.type===tokTypes._import?n.push(this.parseImport(this.startNode())):n.push(this.parseClassElement(!0));this.exitScope(),a="Script",e=this.start,t=this.startLoc,this.expect(tok.jsxTagStart),this.expect(tt.slash),s=this.jsx_parseClosingElementAt(e,t)}else e:for(;;)switch(this.type){case tok.jsxTagStart:if(e=this.start,t=this.startLoc,this.next(),this.eat(tt.slash)){s=this.jsx_parseClosingElementAt(e,t);break e}n.push(this.jsx_parseElementAt(e,t));break;case tok.jsxText:n.push(this.parseExprAtom());break;case tt.braceL:n.push(this.jsx_parseExpressionContainer());break;case tt_cdata_start:this.next(),n.push(this.finishNode(this.parseLiteral(this.value),"JSXCdata")),this.expect(tt_cdata_end);break;case tt_content_text:case tt_whitespace:n.push(this.finishNode(this.parseLiteral(this.value),"JSXText"));break;default:this.unexpected()}getQualifiedJSXName(s.name)!==getQualifiedJSXName(r.name)&&this.raise(s.start,"Expected corresponding JSX closing tag for <"+getQualifiedJSXName(r.name)+">")}o=r.name?"Element":"Fragment";return i["opening"+o]=r,i["closing"+o]=s,i.children=n,this.type===tt.relational&&"<"===this.value&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),a?this.finishNode(i,"JSX"+a):this.finishNode(i,"JSX"+o)}},{key:"jsx_readCDATAToken",value:function(e,t){if(!t&&this.jsx_readWhitespaceToken(e))return!0;t=this.pos;return 60===e&&33===this.input.charCodeAt(t+1)&&91===this.input.charCodeAt(t+2)&&91===this.input.charCodeAt(t+8)&&"CDATA"===this.input.substr(t+3,5)?(this.pos+=9,this.finishToken(tt_cdata_start),!0):93===e&&93===this.input.charCodeAt(t+1)&&62===this.input.charCodeAt(t+2)?(this.pos+=3,this.finishToken(tt_cdata_end),!0):void 0}},{key:"updateContext",value:function(e){var t;this.type===tt.slash&&e===tok.jsxTagStart?(t=this.context[this.context.length-3])!==tc_script_expr&&t!==tc_style_expr||this.context.splice(this.context.length-3,1):e===tt_cdata_start&&this.curContext()===tc_cdata_expr&&this.context.pop(),_get(_getPrototypeOf(l.prototype),"updateContext",this).call(this,e),this.exprAllowed||this.curContext()!==tc_script_expr||this.type!==tt.braceR&&this.type!==tok.jsxTagEnd||(this.exprAllowed=!0)}}]),l}(),parseJSX=(Parser$1.extend(function(){return SyntaxParser}),SyntaxParser.parse=function(e,t){return t=Object.assign({preserveParens:!0},t||{}),new SyntaxParser(t,e).parse()},SyntaxParser.parseExpressionAt=function(e,t,i){i=Object.assign({preserveParens:!0},i||{});e=new SyntaxParser(i,e,t);return i.isMethod&&e.enterScope(functionFlags(!!i.isAsync,!!i.generator)|SCOPE_SUPER|(i.allowDirectSuper?SCOPE_DIRECT_SUPER:0)),e.nextToken(),e.parseExpression()},Parser$1.extend(acornJsx$1({allowNamespaces:!0,allowNamespacedObjects:!0}))),Parser_1=(SyntaxParser.jsx=function(e,t){return parseJSX.parse(e,t)},{acorn:acorn,parseJSX:parseJSX,Parser:SyntaxParser}),globals=new Map,Namespace=function(){function a(e){_classCallCheck(this,a),this.modules=new Map,this.children=new Map,this.identifier=e,this.fullName=e,this.parent=null,this.isNamespace=!0}return _createClass(a,[{key:"set",value:function(e,t){this.modules.set(e,t),this.fullName?globals.set("".concat(this.fullName,".").concat(e),t):globals.set("".concat(e),t)}},{key:"has",value:function(e){return this.modules.has(e)}},{key:"del",value:function(e){return this.fullName?globals.delete("".concat(this.fullName,".").concat(e)):globals.delete("".concat(e)),this.modules.delete(e)}},{key:"get",value:function(e){return this.modules.get(e)}},{key:"toString",value:function(){return this.getChain().join(".")}},{key:"definition",value:function(){return{kind:"Namespace",comments:null,identifier:this.identifier,expre:"".concat("namespace"," ").concat(this.toString()),location:null,file:null,context:this}}},{key:"getChain",value:function(){return this.parent?this.parent.getChain().concat(this.identifier):[]}},{key:"getChildrenKeys",value:function(){var n=[];return this.children.forEach(function(e,t){var i={};i[t]=e.getChildrenKeys(),n.push(i)}),n}}],[{key:"globals",get:function(){return globals}},{key:"create",value:function(e,t){if(!e)return a.dataset;for(var i,n=e.split("."),r=t?new a:a.dataset;i=n.shift();)var s,r=r.children.has(i)?r.children.get(i):(((s=new a(i)).parent=r).children.set(i,s),s);return r.fullName=e,r}},{key:"fetch",value:function(e,t){if(!e)return a.dataset;var i,n=(e+"").split("."),e=n.pop();for(t=t||a.dataset;(i=n.shift())&&t;)t=t.children.has(i)?t.children.get(i):null;return t&&t instanceof a?(t.children&&t.children.has(e)?t.children:t).get(e):null}}]),a}(),Namespace_1=(Namespace.dataset=new Namespace(""),Namespace),Type=function(){_inherits(r,EventDispatcher_1);var n=_createSuper(r);function r(e,t){var i;return _classCallCheck(this,r),(i=n.call(this))._id=e,i.extends=t,i.alias=null,i.isType=!0,i}return _createClass(r,[{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"extends",get:function(){return this._extends||[]},set:function(e){e&&(e instanceof Array?this._extends=e:this._extends=[e])}},{key:"inherit",get:function(){return this._extends?this._extends[0]:null}},{key:"clone",value:function(e){return this.isGenericType&&e?e(this):this}},{key:"definition",value:function(e){return{expre:"(type) ".concat(this.toString())}}},{key:"check",value:function(e,t){return this.is(e&&e.type(),t)}},{key:"type",value:function(e){return this}},{key:"isNeedCheckType",value:function(e){return!(e===this||e.isNullableType||e.isAnyType||this.target&&e.target===this.target)}},{key:"getTypeByGeneric",value:function(e){return e}},{key:"is",value:function(e,t){if(!(e&&e instanceof r))return!1;if(this===e)return!0;for(;e=e&&e.inherit;)if(this===e)return!0;return!1}},{key:"toString",value:function(){return this._id}}]),r}(),Type_1=Type,directiveMap={Runtime:!0,Syntax:!0},Utils={checkDirective:function(e){return directiveMap[e]},getPropertyModifierName:function(e){return e.modifier?e.modifier.value():"public"},getFileStatSync:function(e){return fs__default.default.statSync(e)},readdir:function(t,e){if(!fs__default.default.existsSync(t))return null;if(!fs__default.default.statSync(t).isDirectory())return null;var i=(i=fs__default.default.readdirSync(t)).filter(function(e){return!("."===e||".."===e)});return e?i.map(function(e){return path__default.default.join(t,e)}):i},getStackByName:function(e){return this.getStacks()[e]||null},isStackByName:function(e,t,i){t=this.getStackByName(t),t=t&&e instanceof t;return t&&i?e:t},info:function(e){console.info(e.info||e)},silly:function(e){console.log(e.silly||e)},input:function(e){console.log(e.input||e)},verbose:function(e){console.log(e.verbose||e)},prompt:function(e){console.log(e.prompt||e)},data:function(e){console.log(e.data||e)},help:function(e){console.log(e.help||e)},warn:function(e){console.warn(e.warn||e)},debug:function(e){console.trace(e.warn||e)},error:function(e){console.trace(e.error||e)},scalarMap:["number","boolean","float","int","uint","double","regexp","string"],isScalar:function(e){return e&&!e.isModule&&!e.isInstanceofType&&(e.isLiteralType||e.isAliasType&&this.scalarMap.includes(e.toString()))},isTypeModule:function(e){return e&&e.isModule&&!0===(e.isClass||e.isInterface||e.isEnum)},isWrapType:function(e){return e&&e.isType&&!0===(e.isTupleType||e.isGenericType||e.isClassGenericType||e.isInstanceofType||e.isLiteralType||e.isLiteralObjectType||e.isLiteralArrayType||e.isFunctionType||e.isAliasType)},isLiteralObjectType:function(e){return e&&e.isType&&!0===(e.isTupleType||e.isLiteralObjectType||e.isLiteralArrayType)},isClassType:function(e){return!!(e&&e.isType&&e.isModule&&(e.isClass||e.isEnum))},isLocalModule:function(e){return e&&e.isLocalModule&&this.isTypeModule(e)},isGlobalModule:function(e){return e&&e.isDeclaratorModule&&this.isTypeModule(e)},isInterface:function(e){return e&&e.isInterface&&this.isTypeModule(e)},checkTypeForBoth:function(e,t){return e===t||!(!e||!t)&&(t.isLiteralType&&(t=t.extends[0]),e.isLiteralObjectType?e.check(t):!e.isModule&&e.isUnionType&&e.isType?!(t.isModule||!t.isUnionType||!t.isType||e.elements.length!==t.elements.length)&&e.elements.every(function(e){return t.elements.includes(e)}):!e.isModule&&e.isTupleType&&e.isType?!(t.isModule||!t.isTupleType||!t.isType||e.elements.length!==t.elements.length)&&e.elements.every(function(e){return t.elements.includes(e)}):e.id===t.id&&e.namesapce===t.namesapce)},isArray:function(e){return e&&"Array"===e.id&&e.isDeclaratorModule&&e.isModule&&e.isClass},isObject:function(e){return e&&"Object"===e.id&&e.isDeclaratorModule&&e.isModule&&e.isClass},isFunction:function(e){return!(!e||!e.isStack)&&(!e.isCallExpression&&!e.isAccessor&&!!((e=e.isProperty&&e.init?e.init:e).isFunctionExpression||e.isMethodDefinition||e.isTypeFunctionDefinition))},firstToUpper:function(e){return e.substr(0,1).toUpperCase()+e.substr(1)},checkDepend:function(t,e){var i=this;return e&&e.isModule&&e.extends.concat(e.implements).some(function(e){return e===t||i.checkDepend(t,e)})},getOriginType:function(e){for(e.isClassGenericType&&e.isClassType&&(e=e.types[0]);this.isWrapType(e)&&e.extends&&e.extends[0];)e=e.extends[0];return e&&e.isModule?e.type():e},toTypeUniqueArray:function(e){var i=new Set,n=[];return e.forEach(function(e){var t=e.type().toString();i.has(t)||(i.add(t),n.push(e))}),n},toTypeString:function(e,t){return this.inferTypeValue(e,t).toString()},inferTypeValue:function(e,t){return e&&((e=e.hasGenericType?e.clone(t):e).isComputeType?e.getComputeType().clone(t):e)}},Module=(Utils.checkDirective,Utils.getPropertyModifierName,Utils.getFileStatSync,Utils.readdir,Utils.getStackByName,Utils.isStackByName,Utils.info,Utils.silly,Utils.input,Utils.verbose,Utils.prompt,Utils.data,Utils.help,Utils.warn,Utils.debug,Utils.error,Utils.scalarMap,Utils.isScalar,Utils.isTypeModule,Utils.isWrapType,Utils.isLiteralObjectType,Utils.isClassType,Utils.isLocalModule,Utils.isGlobalModule,Utils.isInterface,Utils.checkTypeForBoth,Utils.isArray,Utils.isObject,Utils.isFunction,Utils.firstToUpper,Utils.checkDepend,Utils.getOriginType,Utils.toTypeUniqueArray,Utils.toTypeString,Utils.inferTypeValue,function(){_inherits(a,Type_1);var i=_createSuper(a);function a(e){var t;return _classCallCheck(this,a),(t=i.call(this,null,null)).compilation=e,t.id=null,t.static=!1,t.abstract=!1,t.isFinal=!1,t.isClass=!1,t.isInterface=!1,t.isEnum=!1,t.isDeclaratorModule=!1,t.isLocalModule=!1,t.namespace=null,t.implements=[],t.methods={},t.members={},t.annotations=[],t.metatypes=[],t.making=!1,t.dependencies=new Set,t.imports=new Map,t.importAlias=new Map,t.isModule=!0,t.methodConstructor=null,t.comments=null,t.file=null,t.used=!1,t.callable=null,t.children=[],t.policy=null,t.dynamic=!1,t.dynamicProperties=new Map,t.isFragment=!1,t.required=!1,t.assets=new Map,t.requires=new Map,t}return _createClass(a,[{key:"addAsset",value:function(e,t,i,n,r){return!this.assets.has(e)&&(this.assets.set(e,{file:t,resolve:e,content:i,type:n,assign:r}),!0)}},{key:"addRequire",value:function(e,t,i,n,r,s){return!this.requires.has(t)&&(this.requires.set(t,{key:e,name:t,from:i,resolve:n,extract:r,stack:s}),!0)}},{key:"definition",value:function(e){var t,i=this.compilation.getStackByModule(this);return i?{kind:t=this.isInterface?"interface":this.isEnum?"enum":"class",comments:this.comments,expre:"".concat(t," ").concat(this.toString(e)),location:(i.id||i).getLocation(),file:this.file,context:i}:null}},{key:"getName",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=this.id;return this.namespace&&(i=this.namespace.getChain().concat(this.id).join(e)),t?i+this.compilation.compiler.suffix:i}},{key:"type",value:function(e){return this.namespace.get(this.id)||this}},{key:"is",value:function(i,e){var n=this;if(!i)return!1;if(e&&e.inference&&(i=e.inference(i)),!this.isNeedCheckType(i))return!0;if("Interface"===this.id&&(!this.namespace||""===this.namespace.identifier)&&Utils.isInterface(i))return!0;if(i.isEnumType)return i.owner===this||i.inherit===this||i.inherit.is(this,e);var e=this.compilation.getGlobalTypeById("nullable"),t=this.compilation.getGlobalTypeById("Object"),r=this.compilation.getGlobalTypeById("Class");if(this===t&&!Utils.isScalar(i))return!0;if(this===r)return!!((i=i.isClassGenericType&&i.extends[0]?i.extends[0]:i)instanceof a&&i.isClass);if(this.isInterface&&i.isLiteralObjectType)return!!Object.keys(this.members).every(function(e){var t=i.attribute(e),e=n.members[e];return t?e.type().check(t):!!e.question})&&(!(0<this.extends.length&&!this.extends.every(function(e){return e.is(i)}))&&!(0<this.implements.length&&!this.implements.every(function(e){return e.is(i)})));if((i=Utils.getOriginType(i))===e||i===this)return!0;if(!(i instanceof a))return!1;function s(t,e){return!!e&&(t===e||(!(!e.extends||!e.extends.some(function(e){return s(t,e)}))||!!(e.implements&&0<e.implements.length)&&e.implements.some(function(e){return s(t,e)})))}return i.isInterface?s(i,this):s(this,i)}},{key:"publish",value:function(){var i,e=this.metatypes.find(function(e){return"Alias"===e.name});e?(i={},e.params.forEach(function(e){var t=e.value?e.name:"name",e=e.value||e.name;i[t]=e}),this.alias=i.name,this.namespace.set(i.name,this),!1!==Boolean(i.origin)&&this.namespace.set(this.id,this)):this.namespace.set(this.id,this)}},{key:"getMethod",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,e=Object.prototype.hasOwnProperty.call(this.methods,e)?this.methods[e]:null;return e&&e.isAccessor?"set"==t?e.set:e.get:e}},{key:"getMember",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=this.members,n=this;i&&!Object.prototype.hasOwnProperty.call(i,e);){if(!n.extends[0]||!n.extends[0].members){i=(n=this.compilation.getModuleById("Object"))&&n.members;break}i=(n=n.extends[0]).members}var r=i&&Object.prototype.hasOwnProperty.call(i,e)?i[e]:null;return r&&r.isAccessor?"set"==t?r.set:r.get:!r&&this.isDeclaratorModule?this.getInterfaceMember(e,t):r}},{key:"dynamicAttribute",value:function(e){var t,i=_createForOfIteratorHelper(this.dynamicProperties);try{for(i.s();!(t=i.n()).done;){var n=_slicedToArray(t.value,2),r=n[0],s=n[1];if(r.check(e))return s}}catch(e){i.e(e)}finally{i.f()}return null}},{key:"getTypeKeys",value:function(){return Array.from(this.getProperties().keys())}},{key:"getProperties",value:function(t){t=t||new Map;var e,i=this.members;for(e in i){var n=i[e];(n=n.isAccessor?n.get:n)&&"public"===Utils.getPropertyModifierName(n)&&t.set(e,n)}var r=this.inherit;return r&&r.isModule&&r.getProperties(t),this.isInterface&&this.implements.forEach(function(e){return e.getProperties(t)}),t}},{key:"getInterfaceMember",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=this.implements,n=i.length,r=0;r<n;r++){var s=i[r].getMember(e,t);if(s)return s}return null}},{key:"getConstructMethod",value:function(e){if(!e)return this.methodConstructor||null;for(var t=this;t;){var i=t.methodConstructor;if(i)return i;t=t.extends?t.extends[0]:null}return null}},{key:"addDepend",value:function(e){e!==this&&(e.used=!0,this.dependencies.add(e))}},{key:"getReferenceNameByModule",value:function(e){return e===this||this.imports.has(e.id)&&this.imports.get(e.id).namespace===e.namespace?e.id:this.importAlias.has(e)?this.importAlias.get(e):e.namespace.getChain().concat(e.id).join("_")}},{key:"addMember",value:function(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=this.isDeclaratorModule||this.compilation.isDescriptionType;t&&t.isConstructor?(this.methodConstructor&&!r&&this.compilation===t.compilation&&t.error(1045,"constructor"),this.methodConstructor=t):(n=!(!t.static&&!this.static)||n?this.methods:this.members,"get"===t.kind||"set"===t.kind?((i=Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]={isAccessor:!0}).isAccessor&&!Object.prototype.hasOwnProperty.call(i,t.kind)||r||this.compilation!==t.compilation||t.error(1045,e),i[t.kind]=t):(!r&&this.compilation===t.compilation&&Object.prototype.hasOwnProperty.call(n,e)&&t.error(1045,e),n[e]=t))}},{key:"addImport",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return t!==this&&(n=n||this.compilation.scope,!(this.imports.has(e)||n.isDefine(e)&&"require"!==n.define(e).annotation)&&(i&&this.importAlias.set(t,e),n.define(e,t),this.imports.set(e,t),!0))}},{key:"getImport",value:function(e){return this.imports.get(e)}},{key:"getModuleGenerics",value:function(){var e=this.compilation.getStackByModule(this);return e&&e.genericity?e.genericity.elements.map(function(e){return e.type()}):null}},{key:"toString",value:function(t){var i,e,n=this.namespace.getChain().concat(this.id).join("."),r=this.compilation.getStackByModule(this);return r&&r.genericity?(e=(t={parent:t,inference:t&&t.inference}).parent&&t.parent.stack&&t.parent.stack.parentStack,t.scopeGenerics=!1,e&&(t.scopeGenerics=!!(e.isClassDeclaration||e.isDeclaratorDeclaration||e.isInterfaceDeclaration||e.isEnumDeclaration)),i=t.scopeGenerics?null:t.parent&&t.parent.inference,e=r.genericity.elements.map(function(e){return Utils.inferTypeValue(e.type(),i).toString(t)}),"".concat(n,"<").concat(e.join(","),">")):n}}]),a}()),Module_1=Module,constant={},dataset={},define=function(e,t,i){if(dataset[e])throw new Error("code '".concat(e,"' already exists."));dataset[e]=i,constant[t]=e},Diagnostic=function(){function a(e,t,i,n,r,s){_classCallCheck(this,a),this.file=e,this.message=t,this.range=i,this.kind=n,this.node=r,this.code=s}return _createClass(a,[{key:"toString",value:function(){var e=this.message,t=this.range;return this.file?e+=" (".concat(this.file,":").concat(t.start.line,":").concat(t.start.column,") ").concat(this.code):e+=" (".concat(t.start.line,":").concat(t.start.column,") ").concat(this.code),e}}],[{key:"defineError",value:function(e,t,i){if(!(1e4<=e))throw new Error("code '".concat(e,"' already exists."));define(e,t,i)}},{key:"getCodeByName",value:function(e){return constant[e]}},{key:"getMessage",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],t=dataset[t]&&dataset[t][e]||"unknown",n=0;return t.replace(/(%([s|S]|\d+))/g,function(e){e=parseInt(e.substr(1,1)),e=0<e?i[e-1]:i[n++];return void 0===e?"unknown":e})}}]),a}(),Diagnostic_1=(Diagnostic.LANG_CN=0,Diagnostic.LANG_EN=1,define(1e3,"MISSING_ARGUMENT",["函数参数期望有%s个，当前给了%s个","Expected %s arguments, but got %s"]),define(1001,"INCONSISTENT_ARGUMENT",["函数参数期望有%s个，当前给了%s个","Expected %s arguments, but got %s"]),define(1002,"TYPE_ASSIGNABLE_NOT_MATCHED",["指定的实参类型(%s), 不能分配给声明的形参类型(%s)","Argument of type '%s' is not assignable to parameter of type '%s'"]),define(1003,"GENERIC_ASSIGNABLE_NOT_CONSTRAINT",["指定的类型(%s)不能满足声明的约束类型(%s)","Type '%s' does not satisfy the constraint '%s'"]),define(1004,"GENERIC_ARGUMENT_NUMBER_INCONFORMITY",["泛型参数期望是 %s 个，但指定了 %s 个","Expected %s type arguments, but got %s"]),define(1005,"GENERIC_ARGUMENT_NUMBER_INCONFORMITY_RANGE",["泛型参数期望是 %s-%s 个，但指定了 %s 个","Expected %s-%s type arguments, but got %s"]),define(1006,"REFS_FUN_IS_NOT_CALLABLE",["引用名(%s)，不是一个可调用的方法","'%s' is not callable"]),define(1007,"REFS_VARIABLE_CANNOT_REDECLARE",["变量不能重复声明(%s)","Variable '%s' cannot redeclare"]),define(1008,"REFS_VARIABLE_CONFLICTS_WITH_CLASS",["声明的变量名(%s)与类名冲突","Variable '%s' conflicts with the current class name."]),define(1009,"REFS_TYPE_ASSIGNABLE_NOT_MATCHED",["指定引用值的类型(%s)与分配给指定变量的类型(%s)不匹配","Type '%s' is not assignable to assignment of type '%s'"]),define(1010,"REFS_VARIABLE_CANNOT_IS_ITSELF",["指定引用的变量不能是自身(%s)","Variable '%s' cannot reference to itself."]),define(1011,"REFS_VARIABLE_CANNOT_IS_ITSELF",["变量名(%s),隐含着(any)类型,但是可以为其赋值后能推断出更适合的类型","Variable '%s' implicitly has an 'any' type, but a better type may be inferred from usage."]),define(1012,"REFS_SPREAD_NOT_IS_ARRAY",["展开数组表达式(%s)的类型必须是一个数组，当前引用的类型(%s)","Spread '%s' expression, must be an array type. give %s"]),define(1013,"REFS_IS_NOT_DEFINED",["引用名(%s)没有定义","'%s' is not defined"]),define(1014,"REFS_SPREAD_ARRAY_OUT_INDEX_RANGE",["展开数组声明的参数,已超出被引用数组的下标索引元素","Spread arguments out of range, is not assign initial value at %s, in the refs '%s'"]),define(1015,"REFS_IS_NOT_WRITABLE",["引用名(%s)是一个不可写的声明","'%s' is not writable"]),define(1016,"PARAMETER_CANNOT_HAVE_QUESTION_AND_INITIAL",["有初始值的参数不需要标记为可选参数","Parameter with an initial value cannot be marked as optional"]),define(1017,"AWAIT_EXPRESSION_MUST_ASYNC_FUN",["表达式(await),只能引用声明为同步的函数","Await expression are only allowed within async function"]),define(1018,"AWAIT_EXPRESSION_MUST_RETURN_PROMISE",["表达式(await),只能引用声明为同步的函数","Await expression needs to return a promise type"]),define(1019,"REFS_IS_NOT_INSTANCE_OBJECT",["引用(%s),不是一个实例对象","The refs '%s' is not instance object"]),define(1020,"REFS_MAYBE_IS_NOT_INSTANCE_OBJECT",["引用(%s),可能不是一个实例对象","The refs '%s' maybe is not instance object"]),define(1021,"OPERATOR_RIGHT_HAND_NOT_IS_CLASS",["实例运算符(%s),在右边表达式中必须是一个类型引用","Operator the '%s' right-hand refs is not class type"]),define(1022,"BREAK_JUMP_CANNOT_CROSS_BLOCK",["语法(Break)指定的标签(%s)表达式不存在或者已跨越边界","Jump target is not exists or has crossed boundary"]),define(1023,"BREAK_NOT_IN_LOOP",["语法(Break)只能出现在循环语句中","Break must be contain in the 'switch,while,do,for'"]),define(1024,"IMPORT_REFS_TO_CIRCULAR_DEPS",["导入指定的模块(%s),是一个循环引用","Import '%s' refs to circular dependency."]),define(1025,"IMPORT_REFS_ALREADY_EXISTS",["导入的模块(%s)已经存在","Import '%s' module already exists."]),define(1026,"IMPORT_REFS_NOT_EXISTS",["导入的模块(%s)没有找到","Import '%s' is not exists."]),define(1027,"CLASS_REFS_NOT_EXISTS",["引用的类(%s)不存在","Class '%s' is not exists"]),define(1028,"IMPLEMENTS_REFS_NOT_INTERFACE",["在类的(implements)表达式中,指定的标识符不是接口类型","Implements '%s' is not interface"]),define(1029,"IMPLEMENTS_REFS_NOT_INTERFACE",["在类的(implements)表达式中,指定的接口类型不存在","Implements '%s' is not exists"]),define(1030,"CLASS_GENERIC_MISSING_ARGS",["指定的泛类型需要有 %s 个类型参数","Generic '%s' requires %s type arguments"]),define(1031,"CLASS_GENERIC_MISSING_ARGS_RANGE",["类泛型(%s)需要有 %s-%s 个类型参数","Generic '%s' requires %s-%s type arguments"]),define(1032,"INTERFACE_MEMBER_NOT_IMPLEMENTED",["指定的接口成员(%1),没有在此类中实现","The '%s' %s in the %s is not implemented in the %s"]),define(1033,"INTERFACE_RETURN_TYPE_NOT_MATCHED",["实现接口成员(%1),返回的类型不兼容","The '%s' %2 return type does not matched with the %2 return type in the %s"]),define(1034,"INTERFACE_MEMBER_INCONFORMITY",["实现接口成员(%1)不兼容","The '%s' inconformity with the %s in the '%s'"]),define(1035,"INTERFACE_MEMBER_MISSING_PARAMS",["实现接口(%1)中,参数缺失","The '%s' %s params missing with the %s params in the '%s'"]),define(1036,"INTERFACE_MEMBER_PARAMS_NOT_MATCHED",["实现接口(%1)中，参数的类型不匹配","The '%s' %s params type not matched with the %s params in the '%s'"]),define(1037,"INTERFACE_MEMBER_GENERIC_PARAMS_NUM_INCONSISTENCY",["实现接口(%1)中，泛型的数目不一致","The '%s' %s declare generics number inconsistency in the '%s'"]),define(1038,"INTERFACE_MEMBER_GENERIC_NOT_SATISFY_CONSTRAINTS",["实现接口(%1),泛型约束类型不匹配","The '%s' %s generics does not satisfy constraint with the '%s'"]),define(1039,"INTERFACE_MEMBER_MODIFIER_NOT_CONSISTENT",["实现接口(%1)中,访问命名空间的修饰符不一致","the '%s' %s modifier is not consistent with the %s modifier in the '%1'"]),define(1040,"DECLARE_ALIAS_TYPE_NOT_ASSIGNMENT_VALUE",["声明的别名类型(%s)必须指定一个类型值","Declare '%s' alias type must assignment a type"]),define(1041,"MISSING_CONDITION",["缺少条件","Missing condition"]),define(1042,"LOOP_MAYBE_INFINITE_EXECUTE",["循环语句体中缺少退出语句，可能会导致无限循环","The absence of an exit statement in the body of a do while statement may result in an infinite loop"]),define(1043,"TOKEN_INVALID",["无效的标识符","Token(%s) invalid"]),define(1044,"PROPERTY_INITIAL_VALUE_NOT_NUMBER",["枚举属性(%s)的初始值只能是数字或者字符串","Enum property the '%s' initial value of can only be number or string"]),define(1045,"PROPERTY_REDEFINED",["属性(%s)已经存在，不能重复定义","Property the '%s' already exists. cannot redefined"]),define(1046,"REFS_VALUE_NOT_OBJECT",["引用的值必须是对象","The refs value of '%s' is not an object"]),define(1047,"LOOP_ONLY_SINGLE_VARIABLE",["循环(%s)中只能声明单个变量","Only a single variable declaration is allowed in a '%s' statement"]),define(1048,"LOOP_CANNOT_HAVE_INITIAL",["循环(%s)声明的变量不能有初始值","The variable declaration of a '%s' statement cannot have an initial"]),define(1049,"REFS_VALUE_MAYBE_NOT_OBJECT",["引用的值可能不是对象值","The refs value of '%s' maybe is not an object"]),define(1050,"PARAMETER_OPTION_ONLY_DECLARE_AFTER",["带有初始值的参数(可选参数)只能跟在必填参数的后面","The '%s' parameter with an initial value in method can only be declared after the parameter"]),define(1051,"PARAMETER_REST_MUST_AT_END",["剩余参数只能在参数的结尾","The '%s' rest parameter can only appear at the end of the params"]),define(1052,"CONSTRUCTOR_NOT_RETURN_VALUE",["构造函数中不需要有返回值","Constructor does not need to return value"]),define(1053,"CONSTRUCTOR_FIRST_CALL_SUPER",["构造函数中必须先调用超类方法(super)","Constructor must first call super"]),define(1054,"FUN_MUST_HAVE_RETURN_VALUE",["函数声明的类型必须有返回值","A function whose declared type is neither 'void' nor 'any' must return a value"]),define(1055,"FUN_ASYNC_MUST_RETURN_PROMISE",["声明为异步的函数必须返回专有类型(%s)","The return type of an async function or method must be the '%s' type"]),define(1056,"GENERIC_DECLARE_ALREADY_EXISTS",["声明的泛型已经存在","Generic '%s' is already exists"]),define(1057,"GENERIC_NAME_CONFLICTS_WITH_TYPE",["声明的泛型与类型名冲突","Generic '%s' conflicts with type name."]),define(1058,"GENERIC_DECLARE_REQUIRED_PARAM_NOT_FOLLOW_OPTIONAL",["声明泛型的参数，不能跟在可选参数的后面","Required type parameters may not follow optional type parameters"]),define(1059,"REFS_TO_TYPE_NOT_USED_VALUE",["当前的引用(%s)指向一个类型，不能当作值传递","'%s' only refers to a type, but is being used as a value here."]),define(1060,"REFS_IS_NOT_EXIST",["引用(%s)不存在","'%s' does not exist."]),define(1061,"REFS_IS_NOT_ACCESSIBLE",["引用(%s)不可访问","'%s' is not accessible."]),define(1062,"GENERIC_CANNOT_DECLARE_ON_CONSTRUCTOR",["不能在构造函数上声明泛型","Generic cannot be declared on constructor"]),define(1063,"METHOD_NOT_HAVE_OVERRIDE",["类中成员方法(%1)在父类中不存在，不需要标记重写(@Override))注解符","The '%s' %s does not exists in the superclass. remove the '@Override' annotator if not overwrite."]),define(1064,"METHOD_NEED_HAVE_OVERRIDE",["类中成员方法(%1)在父类中存在，需要标记重写(@Override)注解符","the '%s' %s already exists in the superclass. use the '@Override' annotator if need overwrite"]),define(1065,"METHOD_GET_ACCESSOR_NOT_PARAM",["获取访问器(%s)不需要声明参数","'%s' getter does not defined param"]),define(1066,"METHOD_GET_ACCESSOR_NOT_PARAM",["获取访问器(%s)需要返回值","'%s' getter accessor must have a return value"]),define(1067,"METHOD_SET_ACCESSOR_NEED_PARAM",["设置访问器(%s)需要声明一个参数","'%s' setter must have one param"]),define(1068,"METHOD_ACCESSOR_TYPE_NOT_MATCHED",["访问器(%s)的接收类型不匹配","'%s' setter and getter parameter types do not match"]),define(1069,"NEW_IS_CANNOT_INSTANTIATED",["当前引用(%s)不是一个可被实例化的类对象","Reference the '%s' is not an instantiable class object"]),define(1070,"NEW_IS_ABSTRACT_CANNOT_INSTANTIATED",["当前引用(%s)是一个抽象类，不能被实例化对象","'%s' is an abstract class. cannot be instantiated."]),define(1071,"REST_TYPE_NOT_MATCHED",["剩余参数只能是一个元组类型","Rest accept type must is tuple type"]),define(1072,"RETURN_MUST_FUN_BODY",["返回表达式只能在函数体中","Return expression must in function body"]),define(1073,"CONNOT_CONVERT_ARRAY",["当前的引用不能转换为一个数组","The '%s' cannot convert a reference to an array"]),define(1074,"CONNOT_CONVERT_OBJECT",["当前的引用不能转换为一个对象","The '%s' cannot convert a reference to an object"]),define(1075,"NOT_CALL_SUPER",["调用超类(super)方法需要在子类中","'super' no inherit parent class"]),define(1076,"SUPER_ONLY_IN_METHODS_CALLED",["超类方法(super)只能在类方法中调用","'super' can only be called in class methods"]),define(1077,"TUPLE_REST_MUST_FOLLOW_END",["元组类型中声明的剩余类型只能出现在元素的结尾","Tuple type rest parameter must follow the end"]),define(1078,"TYPE_DECLARE_ALREADY_EXISTS",["声明的类型(%s)已经存在","Declare type '%s' already exists"]),define(1079,"MISSING_TYPE_EXPRESSION",["缺少类型引用","Missing type expression"]),define(1080,"PROPERTY_NOT_EXISTS",["属性名(%s)不存在","Property '%s' is not exists"]),define(1081,"SPREAD_OBJECT_EXPRES_MUST_HAVE_INITIAL",["展开对象表达式必须设置一个初始值","Spread object expression, must have initial"]),define(1082,"PROPERTY_WITH_PARENT_MEMBER_CONFLICTS",["当前属性(%s)与父类中的成员有冲突","Property '%s' conflicts with a member of the parent class"]),define(1083,"TYPE_IS_NOT_EXISTS",["引用的类型不存在","Type '%s' is not exists"]),define(1084,"REQUIRED_PARAM_NOT_FOLLOW_OPTIONAL",["声明的参数，不能跟在可选参数的后面","Required parameters may not follow optional type parameters"]),define(1085,"ERROR",["编译错误(%s)","%s"]),define(1086,"SPECIFIES_TYPE_ARRAY_ELEMENT_NOT_SPECIFIED_INDEX_TYPE",["指定类型为(%s)的数组元素，不能在数组索引位置指定类型","Specifies an array element of '%s' type. the type cannot be specified at the array index"]),define(1087,"UPDATE_EXPRESSION_MUST_IS_NUMERIC",["更新表达式(%s)的引用类型必须是一个数字类型","The reference type of the update expression '%s' must be a numeric type"]),define(1088,"METHOD_NOT_HAVE_OVERRIDE",["需要重写的方法(%s)参数数目不一致","Inconsistent number of the '%s' method arguments to override"]),define(1089,"METHOD_NOT_HAVE_OVERRIDE",["需要重写的存储器(%s)参数数目不一致","Inconsistent number of the '%s' setter arguments to override"]),define(1090,"INTERFACE_MEMBER_INCONSISTENT_NUMBER_PARAMS",["实现接口(%s)中的参数不兼容","Implemented interface parameters is not compatible in the '%s' method"]),define(1091,"FRAGMENT_EXPRESSION_ERROR",["片段表达式只能出现在结尾","fragment expressions can only appear at the end"]),define(1092,"ANNOTATIONS_RUNTIME_METHOD_PARAM_INVALID",["注解Runtime方法参数值只能是'server,client'","Annotations runtime method parameters can only is 'server' or 'client'"]),define(1093,"ANNOTATIONS_LOCATION_INVALID",["注解方法在此位置未生效","Annotation method not in effect at this location"]),define(1094,"IMPORT_DECLAREATION_STATEMENT_INVALID",["在此处声明的导入语无效","The import declared here is invalid"]),define(1095,"LOAD_TYPE_DESCRIPTION_FILE_INVALID",["指定加载的类型描述文件无效","The type description file specified to load is invalid"]),define(1096,"FUN_GLOBALS_DECLARE_ALREADY_EXISTS",["声明的全局函数(%s)已经存在","Declare globals function '%s' already exists"]),define(1097,"PROP_GLOBALS_DECLARE_ALREADY_EXISTS",["声明的属性(%s)已经存在","Declare globals property '%s' already exists"]),define(1098,"XML_NAMESPACE_NOT_EXISTS",["指定的XML命名空间(%s)没有定义","The specified XML namespace '%s' is not defined"]),define(1099,"REFS_NAMESPACE_NOT_EXISTS",["引用的命名空间不存在","The '%s' namespace does not exist"]),define(1100,"EMBED_FILE_WAS_NOT_FOUND",["嵌入的文件没有找到","Embed file '%s' not found"]),define(1101,"EMBED_FILE_MISSING",["缺失嵌入的文件","Embed file missing"]),define(1102,"EMBED_ANNOTATIONS_ERROR",["嵌入注解符只能定义在包或者顶级域中","Embed annotations can only be defined in a package or top-level scope"]),define(1103,"ANNOTATIONS_ERROR",["注解符(%s)只能定义在顶级域、包或者类中","%s annotations can only be defined in a top-level scope or package or class"]),define(1104,"ANNOTATIONS_ERROR",["注解符(%s)只能定义在方法或者属性上","%s annotations can only be defined in a methods or property of class members"]),define(1105,"ANNOTATIONS_ERROR",["注解符(%s)只能定义在类上","%s annotations can only be defined in a class"]),define(1106,"EMBED_ANNOTATIONS_ASSETS_EXISTS",["嵌入注解符指定的资源已经存在","Embed annotations '%s' assets already exists"]),define(1107,"REFS_DECLARE_ALREADY_EXISTS",["声明的引用(%s)已经存在","Declare refs '%s' already exists"]),define(1108,"JSX_ELEMENT_MISSING_NAMESPACE",["元素标签名不符合标准","JSX element tag name does not is standard"]),define(1109,"JSX_SUBCLASS_PARENT_MUST_COMPONENTS",["子类的父级必须是一个根元素组件","JSX the parent of subclass must be root element components"]),define(1110,"JSX_Unsupported",["不支持的代码块","JSX Unsupported"]),define(1111,"COMPONENT_NOT_EXISTS",["元素组件(%s)不存在","Component '%s' is not exists"]),define(1112,"JSX_SUBCLASS_ALREADY_EXIST",["在根元素组件中的子类已经存在","JSX subclass already exist in the root element components"]),define(1113,"JSX_CAN_ONLY_AN_EXPRESSION",["元素属性的子级只能是一个表达式","JSX the value of element properties can only be a expression"]),define(1114,"JSX_ELEMENT_DIRECTIVE_INVALID",["元素指令无效","JSX element directive '%s' invalid"]),define(1115,"JSX_ROOT_ELEMENT_DIRECTIVE_INVALID",["根元素上不能使用指令","JSX directives cannot be used on the root element"]),define(1116,"JSX_ROOT_ELEMENT_DIRECTIVE_INVALID",["元素指令(each)表达式错误, 正确写法是:'item of fromArray'","JSX element directives 'each' expression error, correct be: 'item of fromArray'"]),define(1117,"XML_NAMESPACE_ONLY_DEFINE_AT_ROOT_ELEMENT",["XML命名空间只能定义在根元素上","JSX namespaces can only be defined on the root element"]),define(1118,"FILE_WAS_NOT_FOUND",["没有找到指定的文件","Not found the '%s'"]),define(1119,"JSX_DIRECTIVE_FOREACH_NOT_ARRAY",["指令FOREACH的引用只能是一个数组","JSX references to the 'foreach' directive can only be an array"]),define(1120,"JSX_DIRECTIVE_FOR_INVALID",["指令FOR的引用允许类型为数组、对象、数字、字符串","JSX references to the 'for' directive allow types: array or object or number or string"]),define(1121,"JSX_ROOT_ELEMENT_DIRECTIVE_FOR_INVALID",["元素指令(for)表达式错误, 正确写法是:'value in fromIteration'","JSX element directives 'for' expression error, correct be: 'value,key[optional],index[optional] in fromIteration'"]),define(1122,"REQUIRE_IS_NOT_EXIST",["加载依赖(%s)文件不存在。请先安装此依赖","Require '%s' does not exist. try npm install %1"]),define(1123,"JSX_MULTIPLE_ELEMENTS_MUST_WRAPPED",["多个元素必须包裹在一个容器中","JSX Multiple elements must be wrapped in a container"]),define(1124,"MEMBER_PROPERTY_NAME_BE_RESERVED",["'%s' 是一个被保留的标识符","The '%s' is a reserved identifier"]),define(1125,"JSX_AVAILABLE_ELEMENTS_IN_SPECIFIED_NAMESPACE",["指定的命名空间下可用元素为:%s","JSX the '%s' available elements in the specified namespace"]),define(1126,"JSX_SLOT_IS_NOT_DEFINED_IN_PARENT_COMPONENT",["引用插槽(%s)在父组件中没有定义","JSX refs of the slot '%s' is not defined in the parent component"]),define(1127,"JSX_PARENT_OF_SLOT_IS_NOT_WEB_COMPONENT",["插槽(%s)的父级不是一个web组件","JSX parent of the slot '%s' is not web-component"]),define(1128,"JSX_SLOT_USED_PARAMS_IS_NOT_DEFINED",["插槽(%s)使用的参数在父级组件的插槽中没有定义","JSX the slot '%s' used parameters is not defined in the slot of the parent component"]),define(1129,"JSX_SLOT_IS_ALREADY_DEFINED",["插槽(%s)已经定义过","JSX the slot (%s) is already defined"]),define(1130,"JSX_SLOT_DOES_NOT_DECLARED_A_SCOPE",["插槽(%s)没有声明作用域","JSX the slot '%s' does not declared scope"]),define(1131,"JSX_COMPONENT_NOT_DEFINED_SLOTS_NEED_DELETE_DISCARD_CHILD_ELEMENTS",["这些子级元素会被抛弃,可以在父级中指定默认插槽来接收这些元素或者删除","JSX these child elements will discarded, can specify default slot in the parent to receive them. also be can removed them"]),define(1132,"REFERENCE_FILE_NOT_EXIST",["引用的文件(%s)不存在","References file '%s' does not exist"]),define(1133,"CONSTRUCTOR_NOT_RETURN_VALUE",["缺少返回表达式","Missing return expression"]),define(1134,"COMPONENT_MUST_INHERIT_WEB_COMPONENT",["JSX 元素组件(%s)必须继承'web-component'","JSX the '%s' element components must inherit 'web-component'"]),define(1135,"ANNOTATION_EXPRESSION_ARGUMENT_IS_INVALID",["注解(%s)表达式参数无效","The '%s' annotation expression arguments is invalid"]),define(1136,"ACCESSOR_CANNOT_OVERRIDE",["成员属性(%s)不能被重写","The '%s' members property cannot be overridden"]),define(1137,"MAIN_ENTER_METHOD_CAN_ONLY_SINGLE",["注解符(%s)不能绑定多个入口方法","Annotation the '%s' cannot bind multiple entry methods in an class"]),define(1138,"MAIN_ENTER_METHOD_CAN_ONLY_STATIC_AND_PUBLIC",["注解符(%s)只能绑定在公开且为静态的方法上","Annotation the '%s' can only be bound to public and static methods"]),define(1139,"PROPERTY_DYNAMIC_CAN_ONLY_IS_STRING",["动态属性的索引(%s)类型只能是字符串或者数字类型","The '%s' index type of dynamic property can only is string or number"]),define(1140,"ANNOTATION_IS_NOT_EXISTS",["注解符(%s)不存在。可以在(compiler.options.annotations)中添加注解符","Annotation the '%s' does not exist. but you can also register annotations through 'compiler.options.annotations'"]),define(1141,"TYPE_REFS_TO_CIRCULAR_DEPS",["类型(%s)是一个循环引用","Type '%s' refs to circular"]),define(1142,"TYPE_REFS_TO_CIRCULAR_DEPS",["成员(%s)是一个只读属性","The '%s' property is readonly"]),define(1143,"DIRECTIVE_CONTAINER_CAN_NO_LONGER_SET_DIRECTIVE_PROPERTY",["容器指令不能再指定属性指令","Directives container can no longer set attribute directive"]),define(1144,"DIRECTIVE_CONTAINER_MISSING_PARAMS",["容器指令缺少属性","Directives container missing attributes. expect '%s'"]),define(1145,"DIRECTIVE_CONTAINER_EXPECT_ATTRIBUTES",["容器指令属性期望%s个,但设置了%1个","Directives container attributes expect %s. but got %s"]),define(1146,"DIRECTIVE_CONTAINER_ATTRIBUTES_MUST_IS_EXPRESSION",["容器指令属性的值只支持表达式","Only expressions be supported for value of container directive properties"]),define(1147,"",["类型(%s)不能继承为终态类(%s)的子类","Type '%s' cannot be inherited as a subclass of the final class '%s'"]),define(1148,"",["终态方法(%s)不能被重写","The final method '%s' cannot be overridden"]),define(1149,"",["终态属性(%s)不能被重写","The final property '%s' cannot be overridden"]),define(1150,"",["类型(%s)不能用作索引类型","Type '%s' cannot be used as an index type"]),define(1151,"",["不能在扩展参数体之外指定类型","Type cannot be specified outside of an spread parameter body"]),define(1152,"",["缺少扩展对象属性(%s)","Missing spread object property the '%s'."]),define(1153,"",["枚举成员必须具有初始化值","Enum member must have initializer"]),define(1154,"",["扩展参数必须具有元组类型或传递给剩余参数","A spread argument must either have a tuple type or be passed to a rest parameter"]),Diagnostic),Range=_createClass(function e(t,i){_classCallCheck(this,e),this.start=t,this.end=i}),Range_1=Range,Constant={POLICY_NONE:1,POLICY_SERVER:2,POLICY_CLIENT:4,POLICY_ALL:7},Constant_1=Constant,UnionType$1=function(){_inherits(r,Type_1);var n=_createSuper(r);function r(e,t){var i;return _classCallCheck(this,r),(i=n.call(this,"$UnionType")).isUnionType=!0,i.target=t,i.elements=e,i.hasGenericType=e.some(function(e){e=e.type();return!!e&&e.hasGenericType}),i}return _createClass(r,[{key:"clone",value:function(t){return t&&this.hasGenericType?new r(this.elements.map(function(e){return e.type().clone(t)}),this.target):this}},{key:"checkItems",value:function(e){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e.every(function(t){return i.elements.some(function(e){return e=e.type(),Utils.inferTypeValue(e,n.inference).check(t,n)})})}},{key:"is",value:function(t){var e,i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(t&&t instanceof Type_1))return!1;if(!this.isNeedCheckType(t))return!0;t.isAliasType&&(e=t.inherit)&&e.isUnionType&&(t=e);function r(e){return Utils.inferTypeValue(e,n.inference)}return t.isUnionType?t.elements.every(function(e){var t=r(e.type());return i.elements.some(function(e){return t.is(e.type(),n)})}):this.elements.some(function(e){return r(e.type()).is(t,n)})}},{key:"toString",value:function(t){return t={parent:t,type:this},this.elements.map(function(e){return e.type().toString(t)}).join(" | ")}}]),r}(),UnionType_1=UnionType$1,LiteralType=function(){_inherits(s,Type_1);var r=_createSuper(s);function s(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return _classCallCheck(this,s),(e=r.call(this,"$LiteralType",e)).isLiteralType=!0,e.target=t,e.value=i,e.compareLiteralValue=n,e}return _createClass(s,[{key:"is",value:function(e,t){var i=this;return!!(e&&e instanceof Type_1)&&(!this.isNeedCheckType(e)||(this.isLiteralValueType?this.inherit.is(e,t)&&e.isLiteralType&&this.value===e.value:e.isUnionType?e.elements.every(function(e){return i.inherit.is(e.type(),t)}):this.inherit.is(e,t)))}},{key:"isLiteralValueType",get:function(){return this.target&&(this.target.isTypeDefinition||this.target.isTypeKeyofDefinition)||this.compareLiteralValue}},{key:"toString",value:function(e){if(this.isLiteralValueType){var t;if("string"==typeof this.value)return t=this.value.replace(/[\'\"]/g,""),'"'.concat(t,'"');if(void 0!==this.value)return this.value}return this.inherit&&this.inherit.toString(e)}}]),s}(),LiteralType_1=LiteralType,Stack=function(){_inherits(o,EventDispatcher_1);var a=_createSuper(o);function o(e,t,i,n,r){var s;return _classCallCheck(this,o),(s=a.call(this)).compilation=e,s.compiler=e.compiler,s.isStack=!0,s.node=Object.freeze(t),s.scope=i,s.parentNode=n,s.parentStack=r,s.childrenStack=[],s.namespace=null,s.module=null,s.isFragment=!1,s.file=e.file,r&&(r.childrenStack.push(_assertThisInitialized(s)),s.isFragment=r.isFragment,s.namespace=r.namespace,s.module=r.module),t&&(!e.compiler.options.enableStackMap||r&&r.isFragment||s.compilation.addStack(_assertThisInitialized(s)),s.comments=t.comments),s}return _createClass(o,[{key:"createTokenStack",value:function(e,t,i,n,r){return o.create(e,t,i,n,r)}},{key:"createCompleted",value:function(){}},{key:"getDescribe",value:function(e,t){var i=this.module;return t?i.getMethod(e):i.getMember(e)}},{key:"getGlobalTypeById",value:function(e){var t=this.compilation.getGlobalTypeById(e);return t||this.error(1083,e),t}},{key:"getTypeById",value:function(e){if(this.module){var t,i=this.module.getImport(e)||this.module.namespace.get(e);if(i)return(t=this.module.importAlias.get(i))&&t!==e?null:i}return this.compilation.getTypeById(e)}},{key:"getModuleById",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(this.module){var i=this.module.getImport(e)||this.module.namespace.get(e);if(i)return(n=this.module.importAlias.get(i))&&n!==e?null:i}if(this.namespace&&this.namespace.has(e))return this.namespace.get(e);if(this.compilation.internalDeclared.has(e))return this.compilation.internalDeclared.get(e);if(this.namespace){var n=this.namespace.getChain().concat(e).join(".");if(this.compilation.internalDeclared.has(n))return this.compilation.internalDeclared.get(n)}return t?this.compilation.getModuleById(e,t):null}},{key:"getLocation",value:function(){return this.node.loc||null}},{key:"getContext",value:function(e,t){var s,a,o,n={isContext:!0,stack:this,parent:e,called:2<arguments.length&&void 0!==arguments[2]&&arguments[2],action:e&&e.action||"default",scope:"default",target:t||this,exclude:e&&e.exclude||[],data:{}};return n.inference=(s=e,a=n.target,o=n,function e(t){if(o.exclude.includes(t))return t;var i=a.description();if(!i)return t;var n=null,r=(i.isParamDeclarator?i:a).getGenericTypes();return(n=(n=!(n=(i.isParamDeclarator?i:a).getRelatedGenericType(r,t))&&s&&s.inference?s.inference(t):n)&&n!==t&&n.hasGenericType?n.clone(e):n)||t}),n.task=e&&e.task||[],n.apply=function(t){var i=this;return t&&t.hasGenericType&&(t=t.clone(this.inference)),n.task.forEach(function(e){t=e.call(i,t)||t}),t},n}},{key:"getParentStackByName",value:function(e){for(var t=this.parentStack;t&&!Utils.isStackByName(t,e);)t=t.parentStack;return t}},{key:"getParentStack",value:function(e){for(var t=this.parentStack;t&&!1===e(t)&&t.parentStack;)t=t.parentStack;return t}},{key:"definition",value:function(e){return this.parentStack?this.parentStack.definition(e):null}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[]}},{key:"description",value:function(){return this}},{key:"type",value:function(){return null}},{key:"getGenericTypes",value:function(){var e=this.compilation.getStackByModule(this.module);return e?e.getGenericTypes():null}},{key:"getRelatedGenericType",value:function(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=null;return e&&0<e.size&&((r=e.get(i=t))&&r.isGenericType&&i!==r&&(r=this.getRelatedGenericType(e,r,!0))),r=n&&!r?t:r}},{key:"getTypeByGeneric",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return e&&e.isGenericType?this.getRelatedGenericType(this.getGenericTypes(),e,t):e}},{key:"inference",value:function(i){return i=i||this,function(e){var t=i.description();return(t.isParamDeclarator?t:i).getTypeByGeneric(e,!0)}}},{key:"checkExpressionType",value:function(e,t,i){var n;e&&(e=e.type(),n=this.getContext(),e&&!e.check(t,n)&&(i||t||this).error(1009,this.getTypeDisplayName(t.type(),n),this.getTypeDisplayName(e,n)))}},{key:"getTypeDisplayName",value:function(e,t){return e?(t=t||this.getContext(),Utils.toTypeString(e,t.inference)):"unknown"}},{key:"checkGenericConstraint",value:function(e,i,n){var r,s=this;e.isGenericType&&e.hasConstraint&&(r=e.inherit,i.isArrayExpression?i.elements.forEach(function(e){r.check(e,n)||e.error(1002,s.getTypeDisplayName(e.type(),n),s.getTypeDisplayName(r,n))}):i.isObjectExpression&&r.isLiteralObjectType?r.properties.forEach(function(e,t){t=i.attribute(t);t&&e.type().check(t,n)||(t&&t.init||t||i).error(1002,s.getTypeDisplayName((i||t).type(),n),s.getTypeDisplayName(r,n))}):r.check(this.getTypeByGeneric(e),n)||i.error(1002,this.getTypeDisplayName(this.getTypeByGeneric(e),n),this.getTypeDisplayName(r,n)))}},{key:"checkArgumentItemType",value:function(r,e,t,s,a){var o=this;if(e.isObjectPattern){var n=r.type();n.isLiteralObjectType||n.isInstanceofType||n.isEnumType||n.isEnum&&n.isModule?e.properties.forEach(function(e){var t=n.isEnum&&n.isModule?n.getMember(e.key.value(),"get"):n.attribute(e.key.value(),"get"),i=r.isObjectExpression&&t&&t.isStack&&t.init?t.init:r;t&&t.isStack?o.checkArgumentItemType(t,e,e.type(),s,i):r.isObjectExpression&&(a||r).error(1152,e.key.value())}):n.isAnyType||((i=this.getGlobalTypeById("object")).is(n,s)||(a||r).error(1002,this.getTypeDisplayName(n,s),this.getTypeDisplayName(i,s)))}else if(e.isArrayPattern){var c=r.type();c.isLiteralArrayType?e.elements.forEach(function(e,t){var i=c.attribute(t),n=r.isArrayExpression&&i&&i.isStack?i:r;if(i)return o.checkArgumentItemType(i,e,e.type(),s,n);r.isArrayExpression&&(a||r).error(1152,"index-property-".concat(t))}):(i=this.getGlobalTypeById("Iterator"),c.is(i,s)||(a||r).error(1002,this.getTypeDisplayName(c,s),this.getTypeDisplayName(i,s),s))}else if(t){var i=t;if(t.isGenericType?(this.checkGenericConstraint(t,r,s),e.parentStack&&e.parentStack.isTypeFunctionDefinition?(e=this.callee.description()).isParamDeclarator&&(t=e.getTypeByGeneric(t)):t=this.getTypeByGeneric(t)):t.hasGenericType&&(t.isTupleType||t.isUnionType||t.isLiteralArrayType?t.elements.forEach(function(e){return o.checkGenericConstraint(e.type(),r,s)}):t.isLiteralObjectType&&(t.properties.forEach(function(e){return o.checkGenericConstraint(e.type(),r,s)}),t.dynamicProperties&&type.dynamicProperties.forEach(function(e){return o.checkGenericConstraint(e.type(),r,s)}))),t)return(r.isArrayExpression||r.isObjectExpression)&&(s.errorHandler=function(e,t,i){return!e&&i&&i.isStack?((i=i.isProperty&&i.init?i.init:i).error(1002,o.getTypeDisplayName(i.type(),s),o.getTypeDisplayName(t,s)),!0):e}),t.type().check(r,s)||(i.hasConstraint?(a||r).error(1003,this.getTypeDisplayName(r.type(),s),this.getTypeDisplayName(i.inherit,s)):(a||r).error(1002,this.getTypeDisplayName(r.type(),s),this.getTypeDisplayName(t,s))),s.errorHandler=null,!1}return!0}},{key:"tryAssignGenericTypeValue",value:function(e,t,n,r){var s,i,a,o,c,l,u,p,h,f=this;e&&(r=r||new WeakSet,s=function(e,t){return e.isLiteralArrayType||e.isTupleType?e.elements.length?e.isTupleType&&e.prefix?e.elements[0]||f.getGlobalTypeById("any"):new UnionType_1(t?e.elements.map(function(e){e=e.type();return e.isLiteralType?new LiteralType_1(e.inherit,e.target,e.value,!0):e}):e.elements,e.target):f.getGlobalTypeById("any"):t&&e.isLiteralType?new LiteralType_1(e.inherit,e.target,e.value,!0):e},i=function(e,t,i){!r.has(e)&&e.isGenericType&&e.isFunGeneric&&(r.add(e),n.set(e,s(t,e.inherit&&e.inherit.isKeyofType)))},e.isObjectPattern?(a=t.type(),o=a.isLiteralObjectType||a.isInstanceofType||a.isEnumType||a.isEnum&&a.isModule,e.properties.forEach(function(e){var t=null;o&&(t=a.isEnum&&a.isModule?a.getMember(e.key.value(),"get"):a.attribute(e.key.value(),"get")),f.tryAssignGenericTypeValue(e,t,n,r)})):e.isArrayPattern?(c=t.type(),e.elements.forEach(function(e,t){f.tryAssignGenericTypeValue(e,c.isLiteralArrayType?c.attribute(t):null,n,r)})):(e=e.type(),l=this.getGlobalTypeById("any"),u=this.getGlobalTypeById("void"),e&&(p=t&&t.type(),e.isFunctionType?(t=e.returnType)&&t.isGenericType&&((h=p&&p.isFunctionType?p.returnType:l)&&h!==u&&i(t,h)):e.hasGenericType&&(e.isGenericType?i(e,p||l):e.isTupleType||e.isLiteralArrayType||e.isUnionType?e.elements.forEach(function(e){i(e.type(),p||l)}):e.isLiteralObjectType&&(e.properties.forEach(function(e,t){i(e.type(),p||l)}),e.dynamicProperties&&e.dynamicProperties.forEach(function(e,t){i(e.type(),p||l)}))))))}},{key:"getFunType",value:function(){return null}},{key:"value",value:function(){return this.node.name||this.node.value}},{key:"raw",value:function(){return this.compilation&&this.compilation.source?this.compilation.source.substr(this.node.start,this.node.end-this.node.start):this.node.raw||this.node.name}},{key:"checker",value:function(){return!this.__checked&&(this.__checked=!0)}},{key:"parser",value:function(){return!this.__parsered&&(this.__parsered=!0)}},{key:"addUseRef",value:function(e){}},{key:"setRefBeUsed",value:function(e){e=e||this.description();e&&e instanceof o&&e!==this&&e.addUseRef(this)}},{key:"interceptAnnotation",value:function(e){var o=this;if(!e||!e.isAnnotationDeclaration)return e;var t=e.name.toLowerCase();return"hostcomponent"===t&&this.isJSXScript?(e.parser(),this.hostComponentAnnotation=e,null):"require"===t?(e.parser(),null):"reference"===t?(e.parentStack&&(e.parentStack.isProgram||e.parentStack.isPackageDeclaration)||e.error(1105,this.name),e.getArguments().forEach(function(a){(function t(e,i){var n,r=o.compiler.getFileAbsolute(e,i,!1),s=r&&Utils.readdir(r,!0);s?(n=o.compiler.options.describePattern,s.forEach(function(e){(Utils.getFileStatSync(e).isDirectory()||e&&n.test(e))&&t(e,r)})):o.compilation.createChildCompilation(e,i,!0)||a.stack.error(1132,e)})(a.value,o.file)}),null):e}},{key:"freeze",value:function(e){Object.freeze(e||this)}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.compilation).error.apply(t,[this.node,e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.compilation).warn.apply(t,[this.node,e].concat(n))}},{key:"toString",value:function(){return"Stack"}}]),o}(),Stack_1=Stack,AnnotationDeclaration=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){_classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isAnnotationDeclaration=!0,s.body=(i.body||[]).map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s._additional=null;var s,e=s.compiler.options.annotations;return e.includes(s.name)||e.includes(Utils.firstToUpper(s.name))||s.error(1140,s.name),s}return _createClass(o,[{key:"name",get:function(){return this.node.name}},{key:"additional",get:function(){return this._additional},set:function(e){var t=this,i=(this._additional=e).scope||this.scope;this.getArguments().forEach(function(e){e.assigned&&(i.isDefine(e.key)?t.error(1007,e.key):i.define(e.key,e.stack))})}},{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.body),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.scope),this.body.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(e){var t=e&&e.stack;if(!t)return!1;e=this.name.toLowerCase();if(!["import","embed","require"].includes(e))return null;if("embed"===e)return r=(n=this.getArguments().find(function(e){return e.stack===t})).resolveFile?this.compiler.normalizePath(n.resolveFile):n.value,{expre:'Embed("'.concat(r,'")'),location:n.stack.getLocation(),range:n.stack.getLocation(),file:this.compilation.file};t.value();function i(e){return e.assigned?e.stack.right===t||e.stack.left===t:e.isObjectPattern?e.extract.find(i):!!e.isProperty&&(e.stack.init.isAssignmentPattern?e.stack.init.right===t||e.stack.init.left===t:e.stack.init===t)}var n,r=this.getArguments().find(i);return r?(n=(r=r.isObjectPattern?r.extract.find(i):r).resolveFile?this.compiler.normalizePath(r.resolveFile):r.value,r.assigned?{expre:"".concat(Utils.firstToUpper(e),"(").concat(r.key,' = "').concat(n,'")'),location:r.stack.left.getLocation(),file:this.compilation.file}:{expre:this.raw(),location:this.getLocation(),file:this.compilation.file}):void 0}},{key:"description",value:function(){return this}},{key:"getArguments",value:function(){if(this._args)return this._args;var r=this._args=[];return this.body.map(function(e,t){var i,n;e.isAssignmentPattern?(n=e.left.value(),i=e.right.value(),r.push({key:n,value:i,assigned:!0,stack:e})):e.isObjectPattern?(n=e.properties.map(function(e){var t=e.key.value();return{key:(e.init.isAssignmentPattern?e.init.right:e.init).value(),value:t,isProperty:!0,stack:e}}),r.push({isObjectPattern:!0,extract:n,stack:e})):e.isArrayPattern||(i=t,n=e.value(),r.push({key:i,value:n,assigned:!1,stack:e}))}),r}},{key:"checkImportParams",value:function(e){!e.length||3<e.length||e[0].isObjectPattern&&e.length<2?this.error(1001,2,e.length):e[0].isObjectPattern&&(!e[1]||e[1].assigned&&"string"==typeof e[1].value)?e[1].stack.error(1135,this.name):e[2]&&!1!==e[2].value&&!0!==e[2].value&&e[2].stack.error(1135,this.name);var t=e[0].isObjectPattern?e[1]:e[0],i=null;return!t.value||1<e.length&&!0===e[e.length-1].value||(i=this.compiler.resolve(t.value,this.file))||t.stack.error(1122,t.value),t.resolveFile=i,e[0].isObjectPattern?[t,e[0].extract]:(t.assigned||(t.key=path__default.default.basename(t.value,path__default.default.extname(t.value))),[t])}},{key:"createRequireModule",value:function(e){var r=this,e=_slicedToArray(e,2),s=e[0];(e[1]||[s]).forEach(function(e){var t=r.compilation.scope,i=e.isProperty?e.value:e.key,n=r.compilation.createModule(r.namespace,i);t.define(i)===n?e.stack.error(1107,i):(t.define(i,n),n.isClass=!0,n.required=!0,r.compilation.addModuleStack(n,r),n.addRequire(e.key,i,s.value,s.resolveFile,!!e.isProperty,e.stack)||e.stack.error(1107,i))})}},{key:"extractDependenceRefs",value:function(e){var e=_slicedToArray(e,2),i=e[0],e=(e=e[1])||[i],n=this.additional&&this.additional.module||this.compilation;e.forEach(function(e){var t=e.isProperty?e.value:e.key;n.addRequire(e.key,t,i.value,i.resolveFile,!!e.isProperty,e.stack)||e.stack.error(1107,e.value)})}},{key:"parser",value:function(){var r=this;if(_get(_getPrototypeOf(o.prototype),"parser",this).call(this)){var e=this.getArguments();switch(this.name.toLowerCase()){case"dynamic":this.additional&&(this.additional.isClassDeclaration||this.additional.isInterfaceDeclaration||this.additional.isDeclaratorDeclaration||this.additional.isEnumDeclaration&&!this.additional.isExpressionDeclare)||this.error(1105,this.name);break;case"require":this.parentStack&&(this.parentStack.isProgram||this.parentStack.isPackageDeclaration)||this.error(1105,this.name),this.createRequireModule(this.checkImportParams(e));break;case"import":this.parentStack&&(this.parentStack.isProgram||this.parentStack.isPackageDeclaration)||this.error(1105,this.name),this.extractDependenceRefs(this.checkImportParams(e));break;case"deprecated":this.additional&&(this.additional.isMethodDefinition||this.additional.isPropertyDefinition)||this.error(1104,this.name);break;case"hostcomponent":(!e.length||1<e.length)&&this.error(1001,1,e.length),this.getModuleById(e[0].value)||this.error(1083,e[0].value);break;case"router":this.additional&&(this.additional.module.isClass||this.additional.isMethodDefinition)||this.error(1105,this.name);break;case"callable":case"post":case"get":case"del":case"put":case"option":case"override":this.additional&&this.additional.isMethodDefinition||this.error(1104,this.name);break;case"syntax":this.additional&&(this.additional.isPackageDeclaration||this.additional.isProgram||this.additional.isClassDeclaration)||this.error(1103,this.name);break;case"runtime":this.additional&&(this.additional.isPackageDeclaration||this.additional.isProgram||this.additional.isClassDeclaration)||this.error(1103,this.name);var t=(e[0].value||"").toLowerCase(),i=this.additional.isClassDeclaration?this.additional.module:null;"server"===t?this.compilation.setPolicy(Constant_1.POLICY_SERVER,i):"client"===t?this.compilation.setPolicy(Constant_1.POLICY_CLIENT,i):"all"===t?this.compilation.setPolicy(Constant_1.POLICY_ALL,i):item.error(1092);break;case"embed":this.additional&&this.additional.module&&!(this.additional.isClassDeclaration||this.additional.isDeclaratorDeclaration||this.additional.isPropertyDefinition)&&this.error(1102),e.length||this.error(1101),e.forEach(function(e){var t=r.compiler.resolve(e.value,r.file),i=e.assigned?e.key:null,n=r.additional;n&&n.isPropertyDefinition&&(i=(n.module&&n.module.methodConstructor?n.module.methodConstructor:r.compilation.getStackByModule(n.module)||n.compilation).scope.generateVarName(n.id.value())),t?(e.resolveFile=t,(n&&n.module||r.compilation).addAsset(t,e.value,null,path__default.default.extname(t),i)||r.error(1106,e.value)):r.error(1100,e.value)});break;case"main":!this.additional||"public"===(this.additional.modifier?this.additional.modifier.value():"public")&&this.additional.static&&this.additional.isMethodDefinition||this.error(1138,this.name)}return!0}return!1}}]),o}(),AnnotationDeclaration_1=AnnotationDeclaration,BlankScope_1=function(){_inherits(i,Scope_1);var t=_createSuper(i);function i(e){return _classCallCheck(this,i),t.call(this,e)}return _createClass(i,[{key:"type",value:function(e){return"blank"===e}}]),i}(),AnnotationExpression=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),n=new BlankScope_1(null),(s=a.call(this,t,i,n,e,r)).isAnnotationExpression=!0,s.body=(i.body||[]).map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s}return _createClass(o,[{key:"name",get:function(){return this.node.name}},{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.body),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.scope),this.body.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return this}},{key:"getArguments",value:function(){if(this._args)return this._args;var r=this._args=[];return this.body.map(function(e,t){var i,n;e.isAssignmentPattern?(n=e.left.value(),i=e.right.value(),r.push({key:n,value:i,assigned:!0,stack:e})):e.isObjectPattern?(n=e.properties.map(function(e){var t=e.key.value();return{key:(e.init.isAssignmentPattern?e.init.right:e.init).value(),value:t,isProperty:!0,stack:e}}),r.push({isObjectPattern:!0,extract:n,stack:e})):e.isArrayPattern||(i=t,n=e.value(),r.push({key:i,value:n,assigned:!1,stack:e}))}),r}},{key:"parser",value:function(){var e;return!!_get(_getPrototypeOf(o.prototype),"parser",this).call(this)&&((e=this.getArguments().find(function(e){return"className"===e.key}))&&(this.getModuleById(e.value)||e.error(1027,e.value),"Provider"===this.name&&this.compilation.setServerPolicy(this.module)),!0)}}]),o}(),AnnotationExpression_1=AnnotationExpression,Expression=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isExpression=!0,e}return _createClass(a,[{key:"reference",value:function(){var e=this.description();return e!==this&&e instanceof Stack_1?e.reference():e}},{key:"referenceItems",value:function(){var e=this.description();return e!==this&&e instanceof Stack_1?e.referenceItems():[e]}}]),a}(),Expression_1=Expression,LiteralArrayType=function(){_inherits(r,Type_1);var n=_createSuper(r);function r(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return _classCallCheck(this,r),(e=n.call(this,"$LiteralArrayType",e)).isLiteralArrayType=!0,e.target=t,e.elements=i||t.elements,e.hasGenericType=e.elements.some(function(e){return e.type().isGenericType}),e}return _createClass(r,[{key:"attribute",value:function(e){return this.target.attribute(e)}},{key:"dynamicAttribute",value:function(e){return this.target&&this.target.isArrayExpression?this.target.dynamicAttribute(e):null}},{key:"clone",value:function(t){if(!t||!this.hasGenericType)return this;var e=this.elements.map(function(e){return e.type().clone(t)});return new r(this.inherit,this.target,e)}},{key:"is",value:function(e,t){return!!(e&&e instanceof Type_1)&&(!this.isNeedCheckType(e)||(e=(e=e.isAliasType&&(i=e.inherit)&&i.isLiteralArrayType?i:e).isLiteralArrayType?e.inherit:e,this.inherit.is(e,t)));var i}},{key:"toString",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this.elements.map(function(e){return e.type().toString(t)}).join(", ");return"[".concat(e,"]")}}]),r}(),LiteralArrayType_1=LiteralArrayType,keySymbol$k=Symbol("key"),ArrayExpression=function(){_inherits(o,Expression_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isArrayExpression=!0,s.elements=i.elements.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s[keySymbol$k]={},s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.elements),this.elements.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"attribute",value:function(e){return"number"==typeof e&&this.elements[e]||null}},{key:"dynamicAttribute",value:function(e){var t=this.getGlobalTypeById("Array");return t&&t.dynamicProperties.get(Utils.getOriginType(e))}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"description",value:function(){return this}},{key:"type",value:function(){return this[keySymbol$k]._type||(this[keySymbol$k]._type=new LiteralArrayType_1(this.getGlobalTypeById("array"),this))}},{key:"parser",value:function(){this.elements.forEach(function(e){e.parser(),e.setRefBeUsed()})}},{key:"value",value:function(){return"[".concat(this.elements.map(function(e){return e.value()}).join(","),"]")}}]),o}(),ArrayExpression_1=ArrayExpression,Declarator=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){_classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isDeclarator=!0,n.acceptType=n.createTokenStack(e,t.acceptType,i,t,_assertThisInitialized(n));e=r&&r.isProperty&&r.parentStack&&r.parentStack.isObjectPattern?r.parentStack:r;return(e=e&&(e.isArrayPattern||e.isObjectPattern)&&e.parentStack?e.parentStack:r)&&(e.isFunctionExpression||e.isTypeFunctionDefinition)&&(n.question=!!t.question,n.isParamDeclarator=!0),n.assignValue=null,n.assignItems=new Set,n.useRefItems=new Set,n._kind="var",n}return _createClass(a,[{key:"addUseRef",value:function(e){this.useRefItems.add(e)}},{key:"freeze",value:function(e){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,e),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.assignItems),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.useRefItems),this.acceptType&&this.acceptType.freeze()}},{key:"definition",value:function(e){var t,i;return e=e||this.getContext(),this.isParamDeclarator?(i=(e?this.type(e.called).clone(e.inference):this.type()).toString(e),t=this.value(),{kind:"parameter",comments:this.comments,identifier:t,expre:"(parameter) ".concat(t,":").concat(i),location:this.getLocation(),file:this.compilation.file,context:this}):this.parentStack.isArrayPattern?(t=this.value(),i=this.description(),e="".concat(this.kind," ").concat(t,":").concat(this.type(e.called).clone(inference).toString()),{kind:this.kind,comments:this.comments,identifier:t,expre:e,location:this.getLocation(),file:this.compilation.file,context:i}):null}},{key:"kind",get:function(){return this._kind},set:function(e){this._kind=e}},{key:"reference",value:function(e){return Utils.isFunction(this.assignValue)?this.assignValue:this.assignValue&&this.assignValue.isStack?this.assignValue.reference(e)||this.assignValue:this}},{key:"referenceItems",value:function(t){var i=[];return this.assignItems.forEach(function(e){!t&&Utils.isFunction(e)?i.push(e):i=i.concat(e.referenceItems(t)||e)}),0<i.length?i:[this]}},{key:"description",value:function(){return this}},{key:"getRelateParamDescription",value:function(e){if(!e||!e.isCallExpression&&!e.isNewExpression)return null;var t=e.description();if(t&&e.isNewExpression){if((t=t.type()).isAnyType)return null;e=Utils.isClassType(t)&&t.getConstructMethod();return e?e.params:null}return t?(Utils.isTypeModule(t)&&this.compilation.addDependency(t,this.module),(t=(t=(t=Utils.isClassType(t)&&t.callable?t.callable:t).isProperty&&!t.hasAssignmentPattern?t.description():t).isDeclarator?t.type():t).params||null):null}},{key:"getRelateParamType",value:function(){if(!this.parentStack.isFunctionExpression)return null;var e=this.parentStack.parentStack,t=this.getRelateParamDescription(e);if(!t)return null;var e=(e.arguments||[]).indexOf(this.parentStack),t=t[e]&&t[e].type();return t&&t.isFunctionType?(e=this.parentStack.params.indexOf(this),t.params[e]&&t.params[e].type()):null}},{key:"getGenericTypes",value:function(){if(!this.parentStack.isFunctionExpression)return null;var e=this.parentStack.parentStack;return e&&e.getGenericTypes()}},{key:"type",value:function(e){if(this.acceptType)return this.acceptType.type(e);if(this.inheritInterfaceAcceptType)return this.inheritInterfaceAcceptType.type(e);if(this._type)return this._type;if(s=this.getRelateParamType(e))return e=this.getContext(e),this._type=e.apply(s);s=this.assignValue;if(1<this.assignItems.size){var t=Array.from(this.assignItems.values()),i=t.find(function(e){return!!e});if(i){var n=this.getGlobalTypeById("Array");if(i.type(e).inherit===n)return this._type=i.type(e);var r=(i.isFunctionExpression?i.parentStack:i).scope,s=t.reverse().find(function(e){var t=(e.isFunctionExpression?e.parentStack:e).scope,e=e.type();return(r===t||r.type("class")||r.type("top"))&&e&&!(e.isNullableType||e.isAnyType)})}}n=s;return n&&(this._type=n.type(e)),this._type||(this._type=this.getGlobalTypeById("any")),this._type}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.acceptType&&this.acceptType.parser(),this.module&&this.module.id===this.value()&&this.error(1008,this.value()),!0)}},{key:"assignment",value:function(e){this.assignValue!==e&&(this.checkExpressionType(this.acceptType||this.assignValue,e,(1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)||this),this.assignItems.add(e),(this.assignValue=e)&&e.isStack&&this.setRefBeUsed(e.description()))}}]),a}(),Declarator_1=Declarator,ArrayPattern=function(){_inherits(i,Stack_1);var t=_createSuper(i);function i(r,s,a,e,o){var c;return _classCallCheck(this,i),(c=t.call(this,r,s,a,e,o)).isArrayPattern=!0,c.elements=s.elements.map(function(e){var t,i,n=null;return"Identifier"===e.type?(n=new Declarator_1(r,e,a,s,_assertThisInitialized(c)),t="var"===o.parentStack.kind?"function":"block",i=n.value(),a.isDefine(i,t)&&c.error(1007,i),a.define(i,n)):n=c.createTokenStack(r,e,a,s,_assertThisInitialized(c)),n}),s.acceptType&&c.compilation.error(s.acceptType,1151),c}return _createClass(i,[{key:"freeze",value:function(){_get(_getPrototypeOf(i.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(i.prototype),"freeze",this).call(this,this.elements),this.elements.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"setKind",value:function(t){this.elements.forEach(function(e){e.kind=t})}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(i.prototype),"parser",this).call(this))return!1;var s=this.parentStack.init,a=s&&s.isArrayExpression,o=s&&s.type(),e=this.getGlobalTypeById("array"),t=this.getGlobalTypeById("Iterator");!s||e.check(o)||t.check(o)||s.error(1012,s.raw(),o.toString());return this.elements.forEach(function(e,t){e.parser();var i,n=e.description(),r=!!e.isAssignmentPattern;n&&(a?(i=s.attribute(t),r||i||e.error(1014,s.raw(),t),i?n.assignment(i):e.right&&n.assignment(e.right)):(r=(r=o&&(o.isLiteralArrayType||o.isTupleType)?o.attribute(t):null)||(o?o.isTupleType?1===(i=Utils.toTypeUniqueArray(o.elements)).length?i[0].type():new UnionType_1(i,o.target):o.isUnionType?o:null:null))?n.assignment(r):e.right&&n.assignment(e.right))}),!0}},{key:"value",value:function(){return this.elements.map(function(e){return e.value()}).join(",")}}]),i}(),ArrayPattern_1=ArrayPattern,FunctionScope_1=function(){_inherits(i,Scope_1);var t=_createSuper(i);function i(e){return _classCallCheck(this,i),(e=t.call(this,e)).arguments=[],e.returnType=null,e.returnItems=[],e.key=null,e.isArrow=!1,e.isExpression=!1,e}return _createClass(i,[{key:"type",value:function(e){return"function"===e}}]),i}(),FunctionType=function(){_inherits(a,Type_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,"$FunctionType",[e])).params=i||t.params||[],e._returnType=n,e.isFunctionType=!0,e.target=t,e.generics=r||t.genericity&&t.genericity.elements||[],e}return _createClass(a,[{key:"returnType",get:function(){return this.inferReturnType()}},{key:"inferReturnType",value:function(e){var t=this._returnType;return!t&&this.target&&(this.target.isFunctionExpression||this.target.isTypeFunctionDefinition)?this.target.getReturnedType(e):t}},{key:"type",value:function(e){return e&&e.called?this.target&&this.target.isFunctionExpression?this._returnType?e.apply(this._returnType):this.target.type(e):e.apply(this.returnType):this}},{key:"hasGenericType",get:function(){return this.checkHasGeneric()}},{key:"checkHasGeneric",value:function(){return void 0===this._hasGenericType&&(this._hasGenericType=this.params.concat(this.returnType,this.generics).some(function(e){e=e&&e.type();if(e)return e.isFunctionType?e.checkHasGeneric():!!e.hasGenericType})),this._hasGenericType}},{key:"clone",value:function(t){if(!t||!this.hasGenericType)return this;var e=this.params.map(function(e){return e.type().clone(t)}),i=[],n=this.target&&this.target.genericity,n=(n&&(i=n.elements.map(function(e){return e.type().clone(t)})),Utils.inferTypeValue(this.returnType,t));return new a(this.inherit,this.target,e,n,i)}},{key:"is",value:function(e,i){var n=this;if(!(e&&e instanceof Type_1&&e.isFunctionType))return!1;if(!this.isNeedCheckType(e))return!0;function r(e){return i&&i.inference?i.inference(e,!0):e}if(0<e.params.length){if(this.params.length<e.params.length)return!1;if(!e.params.every(function(e,t){t=n.params[t];return t&&r(t.type()).is(r(e.type()),i)}))return!1}var t=this.inferReturnType(i),e=e.inferReturnType(i),s=!0;return s=t?e&&r(t.type()).is(r(e.type()),i):s}},{key:"toString",value:function(){for(var s=this,a={parent:a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},type:this},e=this.target.params.map(function(e,t){var i,n,r;return e.isObjectPattern?(i=e.properties.map(function(e){var t=e.key.value(),i=e.type(),e=e.init;return e&&e.isAssignmentPattern?"".concat(e.left.value(),":").concat(i.toString()," = ").concat(e.right.raw()):"".concat(t,":").concat(i.toString())}),"{".concat(i.join(","),"}")):e.isArrayPattern?(i=e.elements.map(function(e){if(e.isAssignmentPattern)return t=e.type(),"".concat(e.left.value(),":").concat(t.toString()," = ").concat(e.right.raw());var t=e.value(),e=e.type();return"".concat(t,":").concat(e.toString())}),"[".concat(i.join(","),"]")):(i=s.params[t].type(),t=e.value(),n=e.isRestElement?"...":"",r=e.question?"?":"",e.isAssignmentPattern&&e.right?(e=e.right.value(),"".concat(n).concat(t).concat(r,": ").concat(i.toString(),"=").concat(e)):"".concat(n).concat(t).concat(r,": ").concat(i.toString(a)))}),t=this.inferReturnType(),i=(a.scopeGenerics=!0,0<this.generics.length?"<"+this.generics.map(function(e){return e.type().toString(a)}).join(", ")+">":""),n=(a.scopeGenerics=!1,a.parent),r=!1;n;){if(n.isTupleUnion){r=!0;break}n=n.parent}return r?"(".concat(i,"(").concat(e.join(", "),")=>").concat(t.toString(a),")"):"".concat(i,"(").concat(e.join(", "),")=>").concat(t.toString(a))}}]),a}(),FunctionType_1=FunctionType,LiteralObjectType=function(){_inherits(a,Type_1);var s=_createSuper(a);function a(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;return _classCallCheck(this,a),(e=s.call(this,"$LiteralObjectType",e)).target=t,e.isLiteralObjectType=!0,e.properties=i||(t?t.attributes:null),e.dynamicProperties=n||(t?t.dynamicProperties:null),e.hasGenericType=Array.from(e.properties.values()).some(function(e){return e.type().isGenericType}),e.questionProperties=r,!e.hasGenericType&&e.dynamicProperties&&(e.hasGenericType=Array.from(e.dynamicProperties.values()).some(function(e){return e.type().isGenericType})),e}return _createClass(a,[{key:"clone",value:function(i){if(!i||!this.hasGenericType)return this;var n=new Map,r=null;return this.properties.forEach(function(e,t){n.set(t,e.type().clone(i))}),this.dynamicProperties&&(r=new Map,this.dynamicProperties.forEach(function(e,t){r.set(t,e.type().clone(i))})),new a(this.inherit,this.target,n,r)}},{key:"attribute",value:function(e){return this.properties.get(e)}},{key:"dynamicAttribute",value:function(e){var t=this.dynamicProperties;if(t){var i,n=_createForOfIteratorHelper(t);try{for(n.s();!(i=n.n()).done;){var r=_slicedToArray(i.value,2),s=r[0],a=r[1];if(s.check(e))return a}}catch(e){n.e(e)}finally{n.f()}}return null}},{key:"attributes",get:function(){return this.properties}},{key:"check",value:function(e,t){return this.constraint(e.type(),t)}},{key:"constraint",value:function(r){var e,s=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(r&&r instanceof Type_1))return!1;if(!this.isNeedCheckType(r))return!0;r.isAliasType&&(e=r.inherit)&&e.isLiteralObjectType&&(r=e);var o=a.errorHandler||function(e){return e},c=this.questionProperties||{};return!(!(r.isLiteralObjectType||r.isGenericType&&r.hasConstraint)||!this.is(r,a))&&Array.from(this.properties).every(function(e){var t,e=_slicedToArray(e,2),i=e[0],e=e[1],n=r.attribute(i),e=(e=e.type(),Utils.inferTypeValue(e,a.inference));return!n&&s.target?(t=(t=s.target.attribute(i))&&t.question||c[i],o(!!t,e,n)):o(e.check(n,a),e,n)})}},{key:"is",value:function(e,t){return!!(e&&e instanceof Type_1)&&(!this.isNeedCheckType(e)||(e=(e=e.isAliasType&&(i=e.inherit)&&i.isLiteralObjectType?i:e).isLiteralObjectType?e.inherit:e,this.inherit.is(e,t)));var i}},{key:"toString",value:function(){for(var n=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=(r={parent:r,isLiteralObjectType:!0,depth:1}).parent;e;){if(e.isLiteralObjectType){r.depth=e.depth+1;break}e=e.parent}var i=Array.from(this.properties).map(function(e){var e=_slicedToArray(e,2),t=e[0],e=e[1].type(),i=n.target&&n.target.attribute(t);if(i&&i.computed)return"[".concat(t,"]: ")+e.toString(r);i=i&&i.question?"?":"";return n.questionProperties&&n.questionProperties[t]&&(i="?"),"".concat(t).concat(i,": ")+e.toString(r)}),t=(this.dynamicProperties&&this.dynamicProperties.forEach(function(e,t){i.push("[".concat(t.type().toString(),"]: ")+e.type().toString(r))}),"\t".repeat(r.depth)),s=1<r.depth?"\t".repeat(r.depth-1):"";return"{".concat("\r\n").concat(t).concat(i.join(",".concat("\r\n").concat(t))).concat("\r\n").concat(s,"}")}}]),a}(),LiteralObjectType_1=LiteralObjectType,TupleType=function(){_inherits(a,Type_1);var s=_createSuper(a);function a(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=4<arguments.length&&void 0!==arguments[4]&&arguments[4],t=(_classCallCheck(this,a),(e=s.call(this,"$TupleType",e)).elements=[].concat(t),e.elements.length);return e.rest=n,e.requireCount=n&&1<t?t-1:t,e.isTupleType=!0,e.prefix=!(!i||!i.prefix),e.isTupleUnion=!!r||!(!i||!i.isTypeTupleUnionDefinition),e.target=i,e}return _createClass(a,[{key:"hasGenericType",get:function(){return this.elements.some(function(e){return(e=e.type())&&e.hasGenericType})}},{key:"attribute",value:function(e){return!this.prefix&&!this.isTupleUnion&&this.elements[e]||null}},{key:"dynamicAttribute",value:function(e){var t=Namespace_1.globals.get("Array");return t&&t.dynamicProperties.get(Utils.getOriginType(e))}},{key:"clone",value:function(t){if(!t||!this.hasGenericType)return this;var e=this.elements.map(function(e){return e.type().clone(t)});return new a(this.inherit,e,this.target,this.rest,this.isTupleUnion)}},{key:"checkItems",value:function(e){function s(e){return Utils.inferTypeValue(e,o.inference)}function i(e,t){var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=s(e.type()),r=s(t.type());return(!(e.isThisType||e.target&&e.target.isThisType)||r.isInstanceofType)&&!(n&&!n.is(r,o))||(a.push(t),!!i&&c(!1,n,t))}var n=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=o.errorHandler||function(e){return e};if(this.prefix||this.rest||this.isTupleUnion)return e.every(function(t){return c(n.elements.some(function(e){return i(e,t,!1)}),n.elements[0].type(),t)});var t=this.elements.length,r=0<t?this.elements[t-1]:null,l=r&&r.type().rest,t=l?this.requireCount-1:this.requireCount;return!(l&&e.length<t)&&(!(!l&&e.length!==t)&&e.every(function(t,e){e=n.elements[e];return!e||l&&e===r?l&&r?i(r,t):c(n.elements.some(function(e){return i(e,t,!1)}),n.elements[0].type(),t):i(e,t)}))}},{key:"is",value:function(e,t){if(!(e&&e instanceof Type_1))return!1;if(!this.isNeedCheckType(e))return!0;if(!e.isAliasType||(i=e.inherit)&&i.isTupleType&&(e=i),this.isTupleUnion&&!this.inherit.is(e.inherit,t))return!1;var i=[];if(e.isTupleType||e.isLiteralArrayType)i=e.elements;else if(e.isClassGenericType&&e.inherit===this.inherit)i=e.types;else if(!this.rest)return this.inherit.is(e,t);return this.checkItems(i,[],t)}},{key:"toString",value:function(t){var e=this.isTupleUnion||this.elements.some(function(e){e=e.type();return!!(e=e.isComputeType&&!e.object.isThisType?e.property.type():e).isUnionType}),i=(t={parent:t,type:this,isTupleUnion:e},this.elements.map(function(e){return e.type().toString(t)})),n=this.rest&&this.target&&!this.target.isRestElement?"...":"";return e?(e=(e=this.elements[0]).isComputeType?e.getComputeType():e,1<i.length||(e.isUnionType||e.isKeyofType)&&1<e.elements.length?"(".concat(i.join(" | "),")[]"):(console.log(this.elements[0].id),"".concat(i[0],"[]"))):1===i.length&&(this.prefix||this.rest)?"".concat(n).concat(i[0],"[]"):"".concat(n,"[").concat(i.join(","),"]")}}]),a}(),TupleType_1=TupleType,MergeType=function(){function a(e){_classCallCheck(this,a),this.originType=e,this.types=new Map,this.question={},this.target=null,this.dataGroup=null}return _createClass(a,[{key:"createGroup",value:function(e,n){var r,t=this.dataGroup||(this.dataGroup=new Map),s=t.get(e);return s||t.set(e,s=new a(e)),n.isLiteralObjectType?(r=0<s.types.size,null===s.target&&(s.target=n.target),r&&s.types.forEach(function(e,t){n.properties.has(t)||(s.question[t]=!0)}),n.properties.forEach(function(e,t){var i=s.types.get(t),t=(i||(s.types.set(t,i=new Map),r&&(s.question[t]=!0)),n.questionProperties&&n.questionProperties[t]&&(s.question[t]=!0),e.type()),t=t.isLiteralValueType?t.value:Utils.getOriginType(t);i.has(t)||i.set(t,e)})):(n.isLiteralArrayType||n.isTupleType)&&n.elements.forEach(function(e,t){e=e.type();e&&s.types.set(e.isLiteralValueType?e.value:Utils.getOriginType(e),e)}),s}},{key:"add",value:function(e){var t,i=this;e&&(e.isLiteralValueType?this.types.set(e.value,e):e.isLiteralArrayType||e.isTupleType?(t=Namespace_1.globals.get("Array"),this.types.set(t,this.createGroup(t,e))):e.isLiteralObjectType?(t=Namespace_1.globals.get("Object"),this.types.set(t,this.createGroup(t,e))):e.isUnionType?e.elements.forEach(function(e){i.types.set(e.type(),e.type())}):this.types.set(Utils.getOriginType(e),e))}},{key:"type",value:function(){var t,n,e=Namespace_1.globals.get("Array"),i=Namespace_1.globals.get("Object");if(this.originType===e)return t=[],this.types.forEach(function(e){t.push(e)}),t.length||t.push(Namespace_1.globals.get("any")),new TupleType_1(e,t,null,!1,!0);if(this.originType===i)return n=new Map,this.types.forEach(function(e,t){var i=Array.from(e.values());1<e.size?n.set(t,new UnionType_1(i,null)):n.set(t,i[0])}),new LiteralObjectType_1(i,this.target,n,null,this.question);var r=new Set,e=(this.types.forEach(function(e){e instanceof a?r.add(e.type()):r.add(e)}),Array.from(r.values()));return!r.size||e.some(function(e){return e.isAnyType})?Namespace_1.globals.get("any"):1<r.size?new UnionType_1(e,null):e[0]}}],[{key:"forOfItem",value:function(e){return e&&(e.isLiteralArrayType||e.isTupleType||e.isLiteralObjectType?(t=new a,e.isLiteralArrayType||e.isTupleType?e.elements.forEach(function(e){t.add(e.type())}):e.properties.forEach(function(e){t.add(e.type())}),t.type()):e);var t}},{key:"to",value:function(e){var t;return e?e.isLiteralArrayType?(t=new a(Namespace_1.globals.get("Array")),e.elements.forEach(function(e){t.add(e.type())}),t.type()):e:Namespace_1.globals.get("any")}}]),a}(),MergeType_1=MergeType,keySymbol$j=Symbol("key"),FunctionExpression=function(){_inherits(l,Expression_1);var c=_createSuper(l);function l(i,n,r,e,t){_classCallCheck(this,l),r=new FunctionScope_1(r),s=c.call(this,i,n,r,e,t),t&&t.isMethod&&(r.isMethod=!0,t.isConstructor&&(r.isConstructor=!0,s.isConstructor=!0)),s.isFunctionExpression=!0,s.genericity=s.createTokenStack(i,n.genericity,r,n,_assertThisInitialized(s)),s._returnType=s.createTokenStack(i,n.returnType,r,n,_assertThisInitialized(s)),s.hasReturnType=!!n.returnType;var s,a=null,o=null;return s.params=n.params.map(function(e){var t;return"Identifier"==e.type?(t=new Declarator_1(i,e,r,n,_assertThisInitialized(s)),a&&a.error(1050,a.value()),r.define(t.value(),t),t):((t=s.createTokenStack(i,e,r,n,_assertThisInitialized(s))).isRestElement&&(o=t),a=t)}),o&&s.params[s.params.length-1]!==o&&o.error(1051,o.value()),s.awaitCount=0,s.async=r.async=!!n.async,s.async&&(r.asyncParentScopeOf=r),t.isMethod||(s.callable=!0),s.body=s.createTokenStack(i,n.body,r,n,_assertThisInitialized(s)),s[keySymbol$j]={},s}return _createClass(l,[{key:"freeze",value:function(){_get(_getPrototypeOf(l.prototype),"freeze",this).call(this),_get(_getPrototypeOf(l.prototype),"freeze",this).call(this,this.params),this.genericity&&this.genericity.freeze(),this._returnType&&this._returnType.freeze(),this.body&&this.body.freeze(),this.params.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(e){var t=(this.parentStack.isProperty||this.parentStack.isMethodDefinition?this.parentStack:this).key,s=e||this.getContext(),e=this.type(s).toString(s),i=(s.display=this.key===s.stack,s.called=!0,this.params.map(function(e){var t,i,n,r;return e.isObjectPattern?(t=e.properties.map(function(e){var t=e.key.value(),i=e.type().clone(s.inference),e=e.init;return e&&e.isAssignmentPattern?"".concat(e.left.value(),":").concat(i.toString()," = ").concat(e.right.raw()):"".concat(t,":").concat(i.toString())}),"{".concat(t.join(","),"}")):e.isArrayPattern?(t=e.elements.map(function(e){if(e.isAssignmentPattern)return t=e.type().clone(s.inference),"".concat(e.left.value(),":").concat(t.toString()," = ").concat(e.right.raw());var t=e.value(),e=e.type().clone(s.inference);return"".concat(t,":").concat(e.toString())}),"[".concat(t.join(","),"]")):(t=e.value(),i=e.type().clone(s.inference).toString(),n=e.isRestElement?"...":"",r=e.question?"?":"",e.isAssignmentPattern&&e.right?(e=e.right.value(),"".concat(n).concat(t).concat(r,": ").concat(i,"=").concat(e)):"".concat(n).concat(t).concat(r,": ").concat(i))})),n=(s.scopeGenerics=!0,(this.genericity?this.genericity.elements:[]).map(function(e){return Utils.inferTypeValue(e.type(),s.inference).toString(s)})),n=(s.scopeGenerics=!1,0<n.length?"<".concat(n.join(", "),">"):""),r=this.isDeclaratorFunction||this.isFunctionDeclaration?"function":"method",a=t?t.value():"";return{kind:r,comments:this.comments,identifier:a,expre:"(".concat(r,") ").concat(a).concat(n,"(").concat(i.join(", "),"): ").concat(e),location:t.getLocation(),file:this.compilation.file,context:this}}},{key:"reference",value:function(e){return e?this.scope.returnItems[this.scope.returnItems.length-1]||null:this}},{key:"referenceItems",value:function(t){var i;return t?(i=[],this.scope.returnItems.forEach(function(e){i=i.concat(e.referenceItems(t))}),i):[this]}},{key:"description",value:function(){return this}},{key:"returnType",get:function(){return this._returnType||(this[keySymbol$j]._loaded||(this[keySymbol$j]._loaded=!0,this[keySymbol$j]._impsReturnType=null,this.parentStack.isMethodDefinition&&(a=this.parentStack.value(),o=this.parentStack.isMethodGetterDefinition?"get":this.parentStack.isMethodSetterDefinition?"set":null,(e=(e=function e(t){if(!t)return null;var i,n=_createForOfIteratorHelper(t);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r){var s=r.getMember(a,o)||e(r.implements)||e(r.extends);if(s&&s.returnType)return s}}}catch(e){n.e(e)}finally{n.f()}return null})(this.module.implements)||e(this.module.extends))&&(this[keySymbol$j]._impsReturnType=e.returnType))),this[keySymbol$j]._impsReturnType);var a,o,e}},{key:"inferReturnType",value:function(){if(this.__inferReturnType)return this.__inferReturnType;if(this.isArrowFunctionExpression&&this.scope.isExpression)return e=this.body.type(),this.__inferReturnType=e;var e=this.scope.returnItems;if(!e||!e.length)return this.__inferReturnType=this.getGlobalTypeById("void");if(1<e.length){var t,i=new MergeType_1,n=null,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var s=t.value,a=s.parentStack;if(a.isBlockStatement&&a.parentStack.isIfStatement)a.parentStack.alternate===a&&a.parentStack.parentStack&&a.parentStack.parentStack.parentStack===this&&(n=a.parentStack.parentStack),i.add(s.type());else if(a.isSwitchCase)i.add(s.type());else{if(n===a&&a.parentStack===this)return;i.add(s.type())}}}catch(e){r.e(e)}finally{r.f()}return this.__inferReturnType=i.type()}return e=e[0].type(),this.__inferReturnType=MergeType_1.to(e)}},{key:"normalization",value:function(e){if(e&&e.isUnionType){if(e.elements.some(function(e){return e.type().isAnyType}))return this.getGlobalTypeById("any");var t=e.elements.filter(function(e){return!e.type().isNullableType});if(1===t.length)return e.elements[0].type();if(!t.length)return e.elements[0];if(t.length!==e.elements.length)return new UnionType_1(t,e.target)}return e}},{key:"getReturnedType",value:function(){if(this.__getReturnedType)return this.__getReturnedType;var e=this.returnType;return this.__getReturnedType=e?this.normalization(e.type()):this.inferReturnType()}},{key:"type",value:function(e){return e&&e.called?e.apply?e.apply(this.getReturnedType()):this.getReturnedType():this.getFunType()}},{key:"getFunType",value:function(){return this[keySymbol$j]._funType||(this[keySymbol$j]._funType=new FunctionType_1(this.getGlobalTypeById("Function"),this))}},{key:"parser",value:function(){var e,t;return!!_get(_getPrototypeOf(l.prototype),"parser",this).call(this)&&(this.genericity&&this.genericity.parser(),this.params.forEach(function(e){return e.parser()}),this._returnType&&this._returnType.parser(),this.body&&this.body.parser(),this.isDeclaratorFunction||(e=this.module&&(this.module.isDeclaratorModule||this.module.isInterface),this.isConstructor&&this.module&&!e&&!this.module.callable?(0<this.scope.returnItems.length&&this.scope.returnItems[this.scope.returnItems.length-1].error(1052),this.module.extends[0]&&1!=this.scope.firstSuperIndex&&(this.body.childrenStack[0]||this.key).error(1053)):e||(e=this.returnType)&&this.getGlobalTypeById("void")!==e.type()&&(this.async?(t=this.getGlobalTypeById("Promise"))&&!t.is(e.type())&&(this._returnType||this).error(1055,t.toString()):this.scope.returnItems.length||this.scope.isArrow&&this.scope.isExpression||((this.parentStack.isMethodDefinition?this.parentStack:this).key||this).error(1133))),!0)}}]),l}(),FunctionExpression_1=FunctionExpression,ArrowFunctionExpression=function(){_inherits(a,FunctionExpression_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isArrowFunctionExpression=!0,e.scope.isArrow=!0,e.scope.isExpression=!!t.expression,e}return _createClass(a,[{key:"type",value:function(e){return e&&e.called?this.node.expression?e.apply(this.body.type(e)):_get(_getPrototypeOf(a.prototype),"type",this).call(this,e):this.getFunType()}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.scope.isExpression&&(e=this.returnType)&&!e.check(this.body)&&this.body.error(1002,this.body.type().toString(),e.toString()),!0);var e}},{key:"reference",value:function(){return this.scope.isExpression?this.body:_get(_getPrototypeOf(a.prototype),"reference",this).call(this)}},{key:"referenceItems",value:function(){return this.scope.isExpression?[this.body]:_get(_getPrototypeOf(a.prototype),"referenceItems",this).call(this)}},{key:"definition",value:function(e){var r=e&&e.inference,e=this.type().clone(r).toString(),t=this.params.map(function(e){var t=e.value(),i=e.type().clone(r),n=e.isRestElement?"...":"";return e.question?"".concat(n).concat(t,"?:").concat(i.toString()):e.isAssignmentPattern&&e.right?(e=e.right.value(),"".concat(n).concat(t,":").concat(i.toString(),"=").concat(e)):"".concat(n).concat(t,":").concat(i.toString())});return{kind:"function",comments:this.comments,expre:"type (".concat(t.join(", "),")=>").concat(e),location:this.getLocation(),file:this.compilation.file,context:this}}}]),a}(),ArrowFunctionExpression_1=ArrowFunctionExpression,AssignmentExpression=function(){_inherits(a,Expression_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isAssignmentExpression=!0,n.left=n.createTokenStack(e,t.left,i,t,_assertThisInitialized(n)),n.right=n.createTokenStack(e,t.right,i,t,_assertThisInitialized(n)),n.left.accessor="set",n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.left.freeze(),this.right.freeze()}},{key:"definition",value:function(e){return this.left.definition(e)}},{key:"description",value:function(){var e=this.left.description();return e&&e.isPropertyDefinition?e.description():e}},{key:"type",value:function(e){return this.right.type(e)}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;this.left.parser(),this.right.parser();var e=this.description();return e&&e.isComputeType?(e=this.left.type(),this.checkExpressionType(e,this.right)):e&&!e.isAnyType&&("const"!==e.kind&&e.assignment?e.assignment(this.right,this):e.isTypeObjectPropertyDefinition?this.checkExpressionType(e,this.right):this.error(1015,this.left.value())),!0}},{key:"value",value:function(){return this.left.value()}},{key:"raw",value:function(){return this.left.raw()}}]),a}(),AssignmentExpression_1=AssignmentExpression,AssignmentPattern=function(){_inherits(a,Declarator_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isAssignmentPattern=!0,n.left=n.createTokenStack(e,t.left,i,t,_assertThisInitialized(n)),n.right=n.createTokenStack(e,t.right,i,t,_assertThisInitialized(n)),n.acceptType=n.createTokenStack(e,t.left.acceptType,i,t,_assertThisInitialized(n)),n.isParamDeclarator&&t.left.question&&n.left.error(1016),n.parentStack.isAnnotationDeclaration||(r=n.getParentStack(function(e){return!(!e.isVariableDeclaration&&!e.isBlockStatement)}),e=n.left.value(),t=void 0,r&&r.isVariableDeclaration&&(t="var"===r.kind?"function":"block"),i.isDefine(e,t)&&n.error(1007,e),i.define(e,_assertThisInitialized(n)),n.assignValue=n.right,n.assignItems.add(n.right)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.left.freeze(),this.right.freeze()}},{key:"type",value:function(e){if(this.parentStack&&this.parentStack.isAnnotationDeclaration&&"embed"===this.parentStack.name.toLowerCase()){var t=this.getArguments()[0];if(t.assigned&&/\.(css|less|scss|sass)$/i.test(t.value))return this.getGlobalTypeById("object")}return _get(_getPrototypeOf(a.prototype),"type",this).call(this,e)}},{key:"definition",value:function(e){var t=this.type().toString(),i=this.value();return this.parentStack.isFunctionExpression?_get(_getPrototypeOf(a.prototype),"definition",this).call(this,e):this.parentStack.isAnnotationDeclaration?this.parentStack.definition(e):this.isParamDeclarator?_get(_getPrototypeOf(a.prototype),"definition",this).call(this,e):this.parentStack.isProperty?this.parentStack.definition(e):{kind:this.kind,identifier:i,expre:"".concat(this.kind," ").concat(i,":").concat(t),location:this.left.getLocation(),file:this.compilation.file,context:this}}},{key:"value",value:function(){return this.left.value()}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.left).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.left).warn.apply(t,[e].concat(n))}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;this.acceptType&&this.acceptType.parser(),this.right.parser(),this.module&&this.module.id===this.left.value()&&this.left.error(1008,this.left.value());var e=this.parentStack.isFunctionExpression,t=this.right.type();return t&&e&&t===this.getGlobalTypeById("nullable")||this.checkExpressionType(this.acceptType,this.right),this.left.description()===this.right.description()&&this.error(1010,this.right.value()),!0}}]),a}(),AssignmentPattern_1=AssignmentPattern,AwaitExpression=function(){_inherits(o,Expression_1);var a=_createSuper(o);function o(e,t,i,n,r){_classCallCheck(this,o),t.name="await",(n=a.call(this,e,t,i,n,r)).isAwaitExpression=!0,n.argument=n.createTokenStack(e,t.argument,i,t,_assertThisInitialized(n)),r&&(r.isAwaitExpression=!0);for(var s=r;s&&!s.isFunctionExpression;)s.scope.hasChildAwait=!0,s.hasAwait=!0,s=s.parentStack;return s.isFunctionExpression&&(s.hasAwait=!0),n}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),this.argument.freeze()}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return this.argument.description()}},{key:"type",value:function(e){return this.argument.type(e)}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(o.prototype),"parser",this).call(this))return!1;this.argument.parser();this.getParentStack(function(e){return!!e.isFunctionExpression}).async||this.error(1017);var e=this.type();return e&&(e.isInstanceofType&&e.extends&&e.extends[0]?e.extends[0]:e)!==this.getGlobalTypeById("Promise")&&this.warn(1018),!0}}]),o}(),AwaitExpression_1=AwaitExpression,BinaryExpression=function(){_inherits(a,Expression_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isBinaryExpression=!0,n.left=n.createTokenStack(e,t.left,i,t,_assertThisInitialized(n)),n.right=n.createTokenStack(e,t.right,i,t,_assertThisInitialized(n)),n.operator=n.node.operator,n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.left.freeze(),this.right.freeze()}},{key:"definition",value:function(){return null}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"description",value:function(){return this}},{key:"type",value:function(e){var t=this.operator;if("instanceof"===t||"is"===t)return this.getModuleById("boolean");t=t.charCodeAt(0);if(60===t||61===t||62===t)return this.getModuleById("boolean");if(43===t){t=this.getGlobalTypeById("string");if(t.check(this.left)||t.check(this.right))return t}return this.getModuleById("number")}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;this.left.parser(),this.left.setRefBeUsed(),this.right.parser(),this.right.setRefBeUsed();var e,t=this.node.operator;return"instanceof"!==t&&"is"!==t||(!(e=this.left.type())||e.isInstanceofType||(e=this.left.referenceItems()).every(function(e){return!!e.type().isInstanceofType})||(1===e.length?this.left.error(1019,this.left.value()):this.left.warn(1020,this.left.value())),e=this.right.description(),Utils.isTypeModule(e)?this.compilation.addDependency(e,this.module):(e=this.right.referenceItems()).every(function(e){return Utils.isTypeModule(e.description())})||(1===e.length?this.right.error(1021,t):this.right.warn(1021,t))),!0}}]),a}(),BinaryExpression_1=BinaryExpression,BlockScope_1=function(){_inherits(i,Scope_1);var t=_createSuper(i);function i(e){return _classCallCheck(this,i),t.call(this,e)}return _createClass(i,[{key:"type",value:function(e){return"block"===e}}]),i}(),BlockStatement=function(){_inherits(p,Stack_1);var u=_createSuper(p);function p(e,t,i,n,r){_classCallCheck(this,p),r&&!(r.isFunctionDeclaration||r.isFunctionExpression||r.isArrowFunctionExpression||r.isWhenStatement)&&(i=new BlockScope_1(i)),(s=u.call(this,e,t,i,n,r)).isBlockStatement=!0,s.body=[];var s,a,o=_createForOfIteratorHelper(t.body);try{for(o.s();!(a=o.n()).done;){var c=a.value,l=s.createTokenStack(e,c,i,t,_assertThisInitialized(s));l&&s.body.push(l)}}catch(e){o.e(e)}finally{o.f()}return s}return _createClass(p,[{key:"freeze",value:function(){_get(_getPrototypeOf(p.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(p.prototype),"freeze",this).call(this,this.scope),_get(_getPrototypeOf(p.prototype),"freeze",this).call(this,this.body),this.body.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(p.prototype),"parser",this).call(this)&&(this.body.forEach(function(e){return e.parser()}),!0)}}]),p}(),BlockStatement_1=BlockStatement,BreakStatement=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(e,t,i,n,r){_classCallCheck(this,o),(n=a.call(this,e,t,i,n,r)).isBreakStatement=!0,n.label=n.createTokenStack(e,t.label,i,t,_assertThisInitialized(n));for(var s=r;s&&!s.isFunctionExpression;){if(s.isSwitchCase||s.isSwitchStatement||s.isWhileStatement||s.isDoWhileStatement||s.isBlockStatement){s.hasBreak=!0;break}s=s.parentStack}return n}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this),this.label.freeze()}},{key:"getLabelStackByName",value:function(e){for(var t=this.getParentStack(function(e){return!(!e.isLabeledStatement&&!e.isFunctionExpression)});t&&t.isLabeledStatement;){if(t.label.value()===e)return t;t=t.labelParent}return null}},{key:"definition",value:function(e){if(this.label){var t=this.getLabelStackByName(this.label.value());if(t)return t.definition(e)}return null}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(o.prototype),"parser",this).call(this))return!1;!this.label||(e=this.getLabelStackByName(this.label.value()))&&e.isLabeledStatement||this.label.error(1022);for(var e,t=this.parentStack;t;){if(t.isSwitchCase||t.isDoWhileStatement||t.isWhileStatement||t.isForStatement||t.isForOfStatement||t.isForInStatement)return!0;if(t.isFunctionExpression)break;t=t.parentStack}this.error(1023)}}]),o}(),BreakStatement_1=BreakStatement,UnknownType=function(){_inherits(i,Type_1);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this,"$UnknownType")).isAnyType=!0,e.isUnknownType=!0,e}return _createClass(i,[{key:"check",value:function(){return!0}},{key:"is",value:function(){return!0}},{key:"toString",value:function(){return"unknown"}}]),i}(),UnknownType_1=UnknownType,keySymbol$i=Symbol("key"),CallExpression=function(){_inherits(g,Expression_1);var a=_createSuper(g);function g(t,i,n,e,r){var s;return _classCallCheck(this,g),(s=a.call(this,t,i,n,e,r)).isCallExpression=!0,s.callee=s.createTokenStack(t,i.callee,n,i,_assertThisInitialized(s)),s.arguments=i.arguments.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s.genericity=null,i.genericity&&(s.genericity=i.genericity.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))})),s[keySymbol$i]={},s}return _createClass(g,[{key:"freeze",value:function(){_get(_getPrototypeOf(g.prototype),"freeze",this).call(this,this),this.callee.freeze(),_get(_getPrototypeOf(g.prototype),"freeze",this).call(this,this.genericity),(this.genericity||[]).forEach(function(e){return e.freeze()})}},{key:"definition",value:function(e){var t=this.callee.value(),i=this.description(!0);if(!i&&this.parentStack.isWhenStatement)return n=this.arguments.map(function(e){return e.value()}),{kind:"method",comments:this.comments,identifier:t,expre:"(method) ".concat(t,"(").concat(n.join(","),"):").concat("boolean"),location:this.callee.getLocation(),file:this.compilation.file};if(!i)return null;if(i&&i.isType&&i.isAnyType)return{kind:"call",identifier:t,expre:"any"};(e=this.getContext(e)).action="definition";var n=i.definition(e);return n&&this.callee.node.loc&&(n.range=this.callee.node.loc),n}},{key:"reference",value:function(){var e=this.description();if(e){if(e instanceof Stack_1)return e.reference(!0);if(e.isFunctionType)return e.type(this.getContext(null,this,!0))}return null}},{key:"referenceItems",value:function(){var e=this.description();if(e){if(e instanceof Stack_1)return e.referenceItems(!0);if(e.isFunctionType)return[].concat(e.type(this.getContext(null,this,!0)))}return[]}},{key:"description",value:function(e){var t=this.callee.description();return t?(Utils.isTypeModule(t)&&this.compilation.addDependency(t,this.module),t&&Utils.isClassType(t)&&t.callable&&(t=t.callable),e||(t=t&&t.isProperty&&!t.hasAssignmentPattern?t.description():t)&&t.isDeclarator&&(t=t.type()),t):this.getGlobalTypeById("any")}},{key:"value",value:function(){return this.callee.value()}},{key:"getReferenceInstanceOriginType",value:function(e){if(!this.callee.isMemberExpression){var t=this.callee.description();if(e.isFunctionType&&t.isDeclarator){t=t.reference();if(t){t=((t=t.isCallExpression&&(t=t.callee).isMemberExpression&&"bind"===t.property.value()?t.object:t).isMemberExpression?t.object:t).type();if(t&&(t.isLiteralArrayType||t.isTupleType||t.isLiteralObjectType||t.isLiteralType||t.isInstanceofType&&t.target&&t.target.isNewExpression))return t}}}return e}},{key:"getGenericTypes",value:function(){var o=this;if(this[keySymbol$i]._relatedGenericTypes)return this[keySymbol$i]._relatedGenericTypes;var e,n,r,t,s,a,c=this[keySymbol$i]._relatedGenericTypes=new Map,l=(this.callee.isMemberExpression?this.callee.object:this.callee).type(),i=this.description(),u=function(e){e&&e.forEach(function(e,t){c.set(t,e)})},p=this.compilation.getStackByModule(this.module),p=(p&&u(p.getGenericTypes()),i&&i.genericity?i.genericity.elements:[]);return p.forEach(function(e){e=e.type();e.hasConstraint?c.set(e,e.inherit):c.set(e,e.assignType||new UnknownType_1)}),l&&(e=function(e){var t,i,n,r,s=Utils.getOriginType(e),a=null;s&&s.isModule&&((n=o.compilation.getStackByModule(s))&&u(n.getGenericTypes()),(a=s.getModuleGenerics())&&(e.isTupleType||e.isLiteralArrayType?(t=e.isTupleUnion&&1<e.elements.length?new UnionType_1(e.elements,e.target):0===e.elements.length?o.getGlobalTypeById("any"):1===e.elements.length?e.elements[0].type():e.elements&&e.elements.length?e.isLiteralArrayType?(i=new Set,e.elements.map(function(e){e=e.type();i.add(e.isLiteralType?e.inherit:e)}),1<(n=Array.from(i.values())).length?new UnionType_1(n,e):n[0]):new UnionType_1(e.elements.map(function(e){e=e.type();return e.rest?e.elements[0].type():e}),e.target):o.getGlobalTypeById("any"),a.forEach(function(e){c.set(e.type(),t)})):a.forEach(function(e){var e=e.type(),t=e.hasConstraint?e:e.assignType;c.set(e,t||new UnknownType_1)}))),e.isInstanceofType?(e.target&&u(e.target.getGenericTypes()),e.isInstanceofType&&l.generics&&0<l.generics.length&&(s=l.inherit,r=s.isModule&&s.getModuleGenerics()||[],l.generics.forEach(function(e,t){t=r[t];t&&c.set(t,e)}))):e.isClassGenericType&&!e.isClassType&&(e.target&&u(e.target.getGenericTypes()),a&&a.forEach(function(e,t){e=e.type();l.types[t]&&c.set(e,l.types[t].type())}))},(t=this.getReferenceInstanceOriginType(l)).isUnionType?t.elements.forEach(e):e(t)),this.genericity?p.forEach(function(e,t){var e=e.type(),i=o.genericity?o.genericity[t]:null;i?c.set(e,i.type()):(i=o.arguments[t]?o.arguments[t].type():e.assignType)&&c.set(e,i)}):i&&((e=i.returnType)&&(t=e.type()).isGenericType&&t.isFunGeneric&&(p=i.inferReturnType())&&p!==this.getGlobalTypeById("void")&&c.set(t,p),e=i.params,n=new WeakSet,r=this.arguments.length-1,t=this.arguments[r],s=t&&t.isSpreadElement?t:null,a=s&&s.type(),e&&e.forEach(function(e,t){var i=o.arguments[t];s&&r<=t&&(i=null,(a.isTupleType&&!a.prefix||a.isLiteralArrayType)&&(i=a.elements[t-r])),o.tryAssignGenericTypeValue(e,i,c,n)})),c}},{key:"getFunDeclareParams",value:function(e){return((e=e.isTypeObjectPropertyDefinition?e.type():e).isFunctionType&&e.target?e.target:e).params||[]}},{key:"getContext",value:function(e){var r=this,t=this.description(!0),s=this.getFunDeclareParams(t),t=_get(_getPrototypeOf(g.prototype),"getContext",this).call(this,e,this,!0);return t.scope="call",t.task.push(function(t){var i;if(t.isComputeType)return i=t.originProperty&&t.originProperty.isStack&&t.originProperty.description(),e=0<=(e=0<r.arguments.length&&i?s.findIndex(function(e){return e===i}):null)?r.arguments[e]:null,t.getComputeType(e);if(t.isUnionType){var e=0<r.arguments.length?s.findIndex(function(e){return e.type()===t}):null,n=r.arguments[e];if(n){e=t.elements.find(function(e){return e.type().check(n)});if(e)return e.type()}}return t}),t}},{key:"type",value:function(e){var t=this.description();if(t){if(e=this.getContext(e),t.isTypeObjectPropertyDefinition&&(t=t.type(e)),this.callee.isMemberExpression){var i=this.callee.object.type(e);if(i&&i.isFunctionType){var n=i.inherit;if(n&&n.getMember("bind")===t)return i}}return t.type(e)}return this.getGlobalTypeById("any")}},{key:"parser",value:function(){var n=this;if(!1===_get(_getPrototypeOf(g.prototype),"parser",this).call(this))return!1;this.callee.parser(),this.callee.setRefBeUsed(),this.arguments.forEach(function(e){e.parser(),e.setRefBeUsed()});var e=this.description();if(e&&!e.isAnyType){if(!((e=e.isTypeObjectPropertyDefinition?e.type():e).callable||this.callee.isSuperExpression||e.isFunctionType))return this.error(1006,this.value());var r,t,s,a,o,c,i,l,u=this.getContext(),p=e.genericity?e.genericity.elements:[],h=(this.genericity&&(y=this.genericity[this.genericity.length-1],p.length<1&&y.error(1004,0,this.genericity.length),(d=p.filter(function(e){return!e.isGenericTypeAssignmentDeclaration})).length>this.genericity.length&&(d.length===p.length?y.error(1004,d.length,this.genericity.length):y.error(1005,d.length,p.length,this.genericity.length)),this.genericity.forEach(function(e,t){e.parser();t=p[t]&&p[t].type();t&&t.hasConstraint&&!t.check(e,u)&&e.error(1003,n.getTypeDisplayName(e.type(),u),n.getTypeDisplayName(t,u))})),(e.isFunctionType&&e.target?e.target:e).params),f=e.params,y=h.length,d=y,e=!1,m=!1;return 0<y&&(t=(r=h[y-1].isRestElement?h[y-1]:null)?f[y-1]:null,s=this.arguments.filter(function(e,t){return e.isSpreadElement?(m=!0,n.arguments[n.arguments.length-1]!==e&&e.error(1084),!1):(h[t]&&h[t]!==r&&(i=(i=f[t])&&i.type(),t=h[t],n.checkArgumentItemType(e,t,i,u)),!0);var i}),m&&(a=this.arguments.length-1,o=t?y-1:1e3,(l=(c=this.arguments[a]).type()).isTupleType&&!l.prefix||l.isLiteralArrayType?l.elements.forEach(function(e,t){var i,t=a+t;t<o&&(i=(i=f[t])&&i.type(),t=h[t],n.checkArgumentItemType(e.type(),t,i,u,c)),s.push(e)}):c.error(1154)),t&&(e=!0,d=y-1,l=[],(i=t.type()).checkItems(s.slice(y-1),l,u)||l.forEach(function(e){(e.isStack?e:n.arguments[n.arguments.length-1]).error(1002,n.getTypeDisplayName(e.type(),u),n.getTypeDisplayName(i,u))})),h.every(function(e,t){return!!(e.isAssignmentPattern||e.isRestElement||e.question)||!!s[t]})||this.callee.error(1e3,d,s.length)),!e&&this.arguments.length>y&&this.callee.error(1e3,h.length,this.arguments.length),!0}}},{key:"raw",value:function(){var e,t=this.callee.raw(),i=this.arguments.map(function(e){return e.raw()});return this.genericity?(e=this.genericity.map(function(e){return e.raw()}),"".concat(t,"<").concat(e.join(","),">(").concat(i.join(","),")")):"".concat(t,"(").concat(i.join(","),")")}}]),g}(),CallExpression_1=CallExpression,ClassScope_1=function(){_inherits(r,Scope_1);var n=_createSuper(r);function r(e,t){var i;return _classCallCheck(this,r),(i=n.call(this,e)).isStatic=t,i.level=e?e.level+1:1,i}return _createClass(r,[{key:"type",value:function(e){return"class"===e}}]),r}(),ClassDeclaration=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(i,n,r,e,t){_classCallCheck(this,o),r=r&&r.type("class")?r:new ClassScope_1(r),(s=a.call(this,i,n,r,e,t)).isClassDeclaration=!0,s._metatypes=[],s._annotations=[],s.imports=[],s.id=s.createTokenStack(i,n.id,r,n,_assertThisInitialized(s)),s.modifier=s.createTokenStack(i,n.modifier,r,n,_assertThisInitialized(s));var s,e=s.module=i.createModule(s.namespace,s.id.value(),!!s.modifier&&"internal"===s.modifier.value());return s.id.module=e,s.abstract=s.createTokenStack(i,n.abstract,r,n,_assertThisInitialized(s)),s.inherit=s.createTokenStack(i,n.superClass,r,n,_assertThisInitialized(s)),n.superClass&&n.superClass.genericity&&(s.inherit.assignGenerics=n.superClass.genericity.map(function(e){return s.createTokenStack(i,e,r,n,_assertThisInitialized(s))})),s.isFinal=e.isFinal=!!n.final,s.static=s.createTokenStack(i,n.static,r,n,_assertThisInitialized(s)),s.implements=(n.implements||[]).map(function(e){var t=s.createTokenStack(i,e,r,n,_assertThisInitialized(s));return e.genericity&&(t.assignGenerics=e.genericity.map(function(e){return s.createTokenStack(i,e,r,n,_assertThisInitialized(s))})),t}),s.body=[],s.genericity=s.createTokenStack(i,n.genericity,r,n,_assertThisInitialized(s)),s.dynamic=!1,s.relatedGenericTypes=new Map,e.abstract=!!s.abstract,e.isClass=!0,e.dynamic=!1,e.static=!!s.static,e.genericity=s.genericity,e.comments=s.comments,e.isLocalModule=!0,i.addModuleStack(e,_assertThisInitialized(s)),s}return _createClass(o,[{key:"getGenericTypes",value:function(){return this.relatedGenericTypes}},{key:"metatypes",get:function(){return this._metatypes},set:function(e){var t=this;e.forEach(function(e){e.additional=t}),this._metatypes=e}},{key:"annotations",get:function(){return this._annotations},set:function(e){var t=this;e.forEach(function(e){e.additional=t}),this._annotations=e,this.dynamic=e.some(function(e){return"dynamic"===e.name.toLowerCase()}),this.module.dynamic=this.dynamic}},{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.id),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.scope),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.inherit),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.abstract),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.metatypes),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.annotations),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.implements),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.imports),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.modifier),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.genericity),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.module),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.body),this.body.forEach(function(e){return e.freeze()})}},{key:"createCompleted",value:function(){var t,i,n,r,s,e,a,o,c,l=this;this._createCompletedFlag||(this._createCompletedFlag=!0,t=[],i=[],n=this.compilation,r=this.scope,s=this.node,this.imports.forEach(function(e){var t,i=n.getModuleById(e.value());i&&i.isType?(Utils.checkDepend(l.module,i)&&e.error(1024,e.value()),t=e.alias?e.alias.value():i.id,l.module.addImport(t,i,i.id!=t,l.parentStack.scope)||e.error(1025,t)):e.error(1026,e.value())}),this.inherit&&(e=this.getModuleById(this.inherit.value()),(this.module.extends=e)?(e.used=!0,e.children.push(n.module),this.compilation.addDependency(e,this.module),e.inherit&&(a=this.compilation.getStackByModule(e.inherit))&&a.relatedGenericTypes.forEach(function(e,t){l.relatedGenericTypes.set(t,e)}),this.inherit.assignGenerics&&(o=this.inherit.assignGenerics,(c=this.compilation.getStackByModule(e))&&c.genericity&&this.compilation.once("onBeforeParser",function(){c.genericity.elements.forEach(function(e,t){o[t]&&l.relatedGenericTypes.set(e.type(),o[t].type())})}))):this.inherit.error(1027,this.inherit.value())),this.module.implements=this.implements.map(function(e){var i,t,n=l.getModuleById(e.value());return n?(n.isInterface?(n.used=!0,l.compilation.addDependency(n,l.module)):e.error(1028,e.value()),n.inherit&&(t=l.compilation.getStackByModule(n.inherit))&&t.relatedGenericTypes.forEach(function(e,t){l.relatedGenericTypes.set(t,e)}),e.assignGenerics&&(i=e.assignGenerics,(t=l.compilation.getStackByModule(n))&&t.genericity&&t.genericity.elements.forEach(function(e,t){l.relatedGenericTypes.set(e.type(),i[t].type())}))):e.error(1029,e.value()),n}),this.body=(s.body.body||[]).map(function(e){e=l.createTokenStack(n,e,r,s,l);if(e.isMetatypeDeclaration)t.push(e);else{if(!e.isAnnotationDeclaration)return e.metatypes=t.splice(0,t.length),e.annotations=i.splice(0,i.length),e;i.push(e)}}).filter(function(e){return!!e}))}},{key:"genericsCheck",value:function(e,t,i){var n,r,s=this.compilation.getStackByModule(e);s&&(s=(n=s.genericity?s.genericity.elements:[]).filter(function(e){return!e.isGenericTypeAssignmentDeclaration}),t&&t.length?(r=t[t.length-1],(s.length>t.length||t.length>n.length)&&(s.length===n.length?r.error(1030,e.toString(),s.length):r.error(1031,e.toString(),s.length,n.length)),0<n.length&&t.forEach(function(e,t){t=n[t]&&n[t].type();t&&t.hasConstraint&&!t.check(e)&&e.error(1003,e.type().toString(),t.toString(!0))})):0<n.length&&i.error(1030,e.toString(),n.length))}},{key:"implementCheck",value:function(s){function e(e,n){if(e&&(!e.modifier||"private"!==e.modifier.value())){var t,i,r=e.isAccessor?"set"==e.kind?"setter":"getter":e.isPropertyDefinition?"property":"method";if(!n)return a.implements.find(function(e){return s===a.getModuleById(e.value())}).error(1032,e.value(),r,s.getName(),a.module.getName());Utils.checkTypeForBoth(e.type(),n.type())||n.error(1033,n.value(),r,s.getName()),e.isMethodDefinition?(n.isMethodDefinition||n.error(1034,e.value(),r,s.getName()),((t=e.params.length)!=n.params.length||0<t&&!!e.params[t-1].isRestElement!=!!n.params[t-1].isRestElement)&&n.error(1090,e.value(),s.getName()),e.params.every(function(e,t){if(n.params[t]&&!n.params[t].acceptType)return n.params[t].inheritInterfaceAcceptType=e,!0;t=n.params[t]&&n.params[t].type();return!!t&&Utils.checkTypeForBoth(e.type(),t)})||n.error(1036,e.value(),r,s.getName()),t=e.genericity?e.genericity.elements.length:0,i=n.genericity?n.genericity.elements.length:0,0<t&&t!==i&&n.error(1037,e.value(),r,s.getName()),0<t&&(e.genericity.elements.every(function(e,t){var i,t=n.genericity.elements[t];return!!t&&(e=e.type(),i=t.type(),!e.hasConstraint&&!i.hasConstraint||e.check(t,!0))})||n.error(1038,e.value(),r,s.getName()))):n.isPropertyDefinition||n.error(1034,e.value(),r,s.getName()),n.modifier&&"public"!==n.modifier.value()&&n.error(1039,n.value(),r,s.getName())}}var a=this;if(Utils.isInterface(s)&&s!==this.module){var t,i=s.members||{};for(t in i){var n=i[t];n.isAccessor?(e(n.get,this.module.getMember(t,"get")),e(n.set,this.module.getMember(t,"set"))):e(n,this.module.getMember(t))}s.dynamicProperties&&s.dynamicProperties.forEach(function(e,t){a.module.dynamic=!0,a.module.dynamicProperties.has(t)||a.module.dynamicProperties.set(t,e)})}Utils.isInterface(s)&&s.extends.forEach(function(e){a.implementCheck(e)}),(s&&s.implements||[]).forEach(function(e){a.implementCheck(e)})}},{key:"definition",value:function(){return{kind:"Module",comments:this.comments,identifier:this.id.value(),expre:"(".concat("Class",") ").concat(this.module.getName()),location:this.id.getLocation(),file:this.file,context:this}}},{key:"value",value:function(){return this.id.value()}},{key:"parser",value:function(){var i=this;return!!_get(_getPrototypeOf(o.prototype),"parser",this).call(this)&&(this.inherit&&this.module.extends[0]&&(this.module.policy=this.module.extends[0].policy,this.genericsCheck(this.module.extends[0],this.inherit.assignGenerics,this.inherit),this.module.extends[0].isFinal&&this.inherit.error(1147,this.module.getName(),this.module.extends[0].getName())),this.genericity&&(this.genericity.parser(),this.genericity.elements.forEach(function(e){e=e.type();e.hasConstraint?i.relatedGenericTypes.set(e,e.inherit):e.assignType?i.relatedGenericTypes.set(e,e.assignType):i.relatedGenericTypes.set(e,i.getGlobalTypeById("any"))})),this.metatypes.forEach(function(e){return e.parser()}),this.annotations.forEach(function(e){return e.parser()}),this.module.implements.forEach(function(e,t){i.genericsCheck(e,i.implements[t].assignGenerics,i.implements[t])}),this.implementCheck(this.module),this.body.forEach(function(e){e.parser()}),!0)}}]),o}(),ClassDeclaration_1=ClassDeclaration,ConditionalExpression=function(){_inherits(a,Expression_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isBinaryExpression=!0,n.test=n.createTokenStack(e,t.test,i,t,_assertThisInitialized(n)),n.consequent=n.createTokenStack(e,t.consequent,i,t,_assertThisInitialized(n)),n.alternate=n.createTokenStack(e,t.alternate,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.consequent.freeze(),this.alternate.freeze()}},{key:"definition",value:function(){return null}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return this.consequent.referenceItems().concat(this.alternate.referenceItems())}},{key:"description",value:function(){return this}},{key:"type",value:function(e){if(t=this._type)return t;var t=new MergeType_1;return t.add(this.consequent.type(e)),t.add(this.alternate.type(e)),this._type=t.type()}},{key:"parser",value:function(){this.test.parser(),this.test.setRefBeUsed(),this.consequent.parser(),this.consequent.setRefBeUsed(),this.alternate.parser(),this.alternate.setRefBeUsed()}}]),a}(),ConditionalExpression_1=ConditionalExpression,ContinueStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isBreakStatement=!0,n.label=n.createTokenStack(e,t.label,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this),this.label&&this.label.freeze()}},{key:"getLabelStackByName",value:function(e){for(var t=this.getParentStack(function(e){return!(!e.isLabeledStatement&&!e.isFunctionExpression)});t&&t.isLabeledStatement;){if(t.label.value()===e)return t;t=t.labelParent}return null}},{key:"definition",value:function(e){if(this.label){var t=this.getLabelStackByName(this.label.value());if(t)return t.definition(e)}return null}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;!this.label||(e=this.getLabelStackByName(this.label.value()))&&e.isLabeledStatement||this.label.error(1022);for(var e,t=this.parentStack;t;){if(t.isSwitchCase||t.isDoWhileStatement||t.isWhileStatement||t.isForStatement||t.isForOfStatement||t.isForInStatement)return!0;if(t.isFunctionExpression)break;t=t.parentStack}this.error(1022)}}]),a}(),ContinueStatement_1=ContinueStatement,DeclaratorDeclaration=function(){_inherits(c,Stack_1);var o=_createSuper(c);function c(i,n,r,e,t){_classCallCheck(this,c),r=new ClassScope_1(r),(s=o.call(this,i,n,r,e,t))._metatypes=[],s._annotations=[],s.isDeclaratorDeclaration=!0,s.id=s.createTokenStack(i,n.id,r,n,_assertThisInitialized(s)),s.modifier=s.createTokenStack(i,n.modifier,r,n,_assertThisInitialized(s));var s,a=s.module=i.createModule(s.namespace,s.id.value(),!!s.modifier&&"internal"===s.modifier.value());switch(s.id.module=a,s.inherit=null,s.isFinal=a.isFinal=!!n.final,s.static=s.createTokenStack(i,n.static,r,n,_assertThisInitialized(s)),n.extends&&(s.inherit=s.createTokenStack(i,n.extends,r,n,_assertThisInitialized(s)),n.extends.genericity&&(s.inherit.assignGenerics=n.extends.genericity.map(function(e){return s.createTokenStack(i,e,r,n,_assertThisInitialized(s))}))),s.implements=(n.implements||[]).map(function(e){var t=s.createTokenStack(i,e,r,n,_assertThisInitialized(s));return e.genericity&&(t.assignGenerics=e.genericity.map(function(e){return s.createTokenStack(i,e,r,n,_assertThisInitialized(s))})),t}),s.body=[],s.imports=[],s.genericity=s.createTokenStack(i,n.genericity,r,n,_assertThisInitialized(s)),s.dynamic=!1,s.relatedGenericTypes=new Map,a.dynamic=!1,a.static=!!s.static,a.comments=s.comments,a.isDeclaratorModule=!0,n.kind){case"class":a.isClass=!0;break;case"interface":a.isInterface=!0}return i.addModuleStack(a,_assertThisInitialized(s)),s}return _createClass(c,[{key:"getGenericTypes",value:function(){return this.relatedGenericTypes}},{key:"metatypes",get:function(){return this._metatypes},set:function(e){var t=this;e.some(function(e){e.additional=t}),this._metatypes=e}},{key:"annotations",get:function(){return this._annotations},set:function(e){var t=this;e.forEach(function(e){e.additional=t}),this._annotations=e,this.dynamic=e.some(function(e){return"dynamic"===e.name.toLowerCase()}),this.module.dynamic=this.dynamic}},{key:"freeze",value:function(){_get(_getPrototypeOf(c.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(c.prototype),"freeze",this).call(this,this.id),_get(_getPrototypeOf(c.prototype),"freeze",this).call(this,this.inherit),_get(_getPrototypeOf(c.prototype),"freeze",this).call(this,this.implements),_get(_getPrototypeOf(c.prototype),"freeze",this).call(this,this.imports),_get(_getPrototypeOf(c.prototype),"freeze",this).call(this,this.modifier),_get(_getPrototypeOf(c.prototype),"freeze",this).call(this,this.genericity),_get(_getPrototypeOf(c.prototype),"freeze",this).call(this,this.module),_get(_getPrototypeOf(c.prototype),"freeze",this).call(this,this.body),(this.body||[]).forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return{kind:"Module",comments:this.comments,identifier:this.id.value(),expre:"(".concat("Class",") ").concat(this.module.getName()),location:this.id.getLocation(),file:this.file,context:this}}},{key:"createCompleted",value:function(){var e,t,i,n,r=this,s=this.compilation,a=[],o=[];this.imports.forEach(function(e){var t,i=s.getModuleById(e.value());i&&i.isType?(Utils.checkDepend(r.module,i)&&e.error(1024,e.value()),t=e.alias?e.alias.value():i.id,r.module.addImport(t,i,i.id!=t)||e.error(1025,t)):e.error(1026,e.value())}),this.inherit&&((e=this.getModuleById(this.inherit.value()))?(e.inherit&&(t=this.compilation.getStackByModule(e.inherit))&&t.relatedGenericTypes.forEach(function(e,t){r.relatedGenericTypes.set(t,e)}),this.inherit.assignGenerics&&(i=this.inherit.assignGenerics,(n=this.compilation.getStackByModule(e))&&n.genericity&&this.compilation.once("onBeforeParser",function(){n.genericity.elements.forEach(function(e,t){r.relatedGenericTypes.set(e.type(),i[t].type())})})),this.module.extends=e,this.compilation.addDependency(e,this.module)):this.inherit.error(1027,this.inherit.value())),this.module.implements=this.implements.map(function(e){var i,t,n=r.getModuleById(e.value());return n?(n.isInterface||n.isDeclarator?r.compilation.addDependency(n,r.module):e.error(1028,e.value()),n.inherit&&(t=r.compilation.getStackByModule(n.inherit))&&t.relatedGenericTypes.forEach(function(e,t){r.relatedGenericTypes.set(t,e)}),e.assignGenerics&&(i=e.assignGenerics,(t=r.compilation.getStackByModule(n))&&t.genericity&&t.genericity.elements.forEach(function(e,t){r.relatedGenericTypes.set(e.type(),i[t].type())}))):e.error(1029,e.value()),n}),this.body=this.node.body.map(function(e){e=r.createTokenStack(s,e,r.scope,r.node,r);if(e.isMetatypeDeclaration)a.push(e);else{if(!e.isAnnotationDeclaration)return e.metatypes=a.splice(0,a.length),e.annotations=o.splice(0,o.length),e;o.push(e)}}).filter(function(e){return!!e})}},{key:"genericsCheck",value:function(e,t){var i,n,r=this.compilation.getStackByModule(e);r&&(t=t||[],r=(i=r.genericity?r.genericity.elements:[]).filter(function(e){return!e.isGenericTypeAssignmentDeclaration}),n=t[t.length-1]||this.inherit,(r.length>t.length||t.length>i.length)&&(r.length===i.length?n.error(1030,e.toString(),r.length):n.error(1031,e.toString(),r.length,i.length)),0<i.length&&t.forEach(function(e,t){t=i[t]&&i[t].type();t&&t.hasConstraint&&!t.check(e)&&e.error(1003,e.type().toString(),t.toString())}))}},{key:"value",value:function(){return this.id.value()}},{key:"parser",value:function(){var i=this;return!!_get(_getPrototypeOf(c.prototype),"parser",this).call(this)&&(this.genericity&&(this.genericity.parser(),this.genericity.elements.forEach(function(e){e=e.type();e.hasConstraint?i.relatedGenericTypes.set(e,e.inherit):e.assignType?i.relatedGenericTypes.set(e,e.assignType):i.relatedGenericTypes.set(e,i.getGlobalTypeById("any"))})),this.metatypes.forEach(function(e){return e.parser()}),this.annotations.forEach(function(e){return e.parser()}),this.inherit&&(this.genericsCheck(this.module.extends[0],this.inherit.assignGenerics),this.module.extends[0]&&this.module.extends[0].isFinal&&this.inherit.error(1147,this.module.getName(),this.module.extends[0].getName())),this.module.implements.forEach(function(e,t){i.genericsCheck(e,i.implements[t].assignGenerics)}),this.body.forEach(function(e){return e.parser()}),!0)}}]),c}(),DeclaratorDeclaration_1=DeclaratorDeclaration,DeclaratorFunction=function(){_inherits(a,FunctionExpression_1);var s=_createSuper(a);function a(e,t,i,n,r){_classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isDeclaratorFunction=!0,n.key=n.createTokenStack(e,t.id,i,t,_assertThisInitialized(n)),n.modifier=n.createTokenStack(e,t.modifier,i,t,_assertThisInitialized(n));r=n.key.value();return n.namespace.has(r)&&n.namespace.get(r).compilation===n.compilation&&n.key.error(1096,r),n.modifier&&"internal"===n.modifier.value()?e.internalDeclared.set(n.namespace.namespace.getChain().concat(r).join("."),n.getFunType()):n.namespace.set(r,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.key.freeze()}}]),a}(),DeclaratorFunction_1=DeclaratorFunction,AnyType=function(){_inherits(i,Type_1);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this,"$any")).isAnyType=!0,e}return _createClass(i,[{key:"check",value:function(){return!0}},{key:"definition",value:function(){return{expre:"(type) any"}}},{key:"is",value:function(){return!0}},{key:"toString",value:function(){return"any"}}]),i}(),AnyType_1=AnyType,VoidType=function(){_inherits(i,Type_1);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this,"$void")).isVoidType=!0,e}return _createClass(i,[{key:"is",value:function(e){return!!(e&&e instanceof Type_1)&&e===this}},{key:"toString",value:function(){return"void"}}]),i}(),VoidType_1=VoidType,AliasType=function(){_inherits(n,Type_1);var i=_createSuper(n);function n(e,t){return _classCallCheck(this,n),(e=i.call(this,"$AliasType",e)).isAliasType=!0,"string"==typeof(e.target=t)?e.typeName=t:t&&t.isStack&&(e.typeName=t.value()),e}return _createClass(n,[{key:"id",get:function(){return this.toString()}},{key:"clone",value:function(e){return e&&this.inherit.isGenericType?new n(e(this.inherit),this.target):this}},{key:"check",value:function(e,t){var i=e&&e.type();return!!i&&(i&&i.isAliasType?this.is(i,t):this.inherit.check(e,t))}},{key:"is",value:function(e,t){return!!(e&&e instanceof Type_1)&&(!this.isNeedCheckType(e)||("object"!==this.toString()||!Utils.isScalar(e))&&this.inherit.is(e,t))}},{key:"toString",value:function(){return this.typeName||this.target.value()}}]),n}(),AliasType_1=AliasType,NullableType=function(){_inherits(i,Type_1);var t=_createSuper(i);function i(e){return _classCallCheck(this,i),(e=t.call(this,"$NullableType",e)).isNullableType=!0,e}return _createClass(i,[{key:"is",value:function(e){return!!(e&&e instanceof Type_1)}},{key:"toString",value:function(){return"null"}}]),i}(),NullableType_1=NullableType,NeverType=function(){_inherits(i,Type_1);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this,"$never")).isNeverType=!0,e}return _createClass(i,[{key:"definition",value:function(){return{expre:"(type) never"}}},{key:"is",value:function(e){return e===this}},{key:"toString",value:function(){return"never"}}]),i}(),NeverType_1=NeverType,DeclaratorTypeAlias=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isDeclaratorTypeAlias=!0,n.left=n.createTokenStack(e,t.left,i,t,_assertThisInitialized(n)),n.right=n.createTokenStack(e,t.right,i,t,_assertThisInitialized(n)),n.modifier=n.createTokenStack(e,t.modifier,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this),this.left.freeze(),this.right.freeze()}},{key:"definition",value:function(){return{kind:"type",comments:this.comments,expre:"(type) ".concat(this.left.value()),location:this.left.getLocation(),file:this.file,context:this}}},{key:"metatypes",get:function(){return this._metatypes},set:function(e){this._metatypes=e}},{key:"annotations",get:function(){return this._annotations},set:function(e){this._annotations=e}},{key:"id",get:function(){return this.left.value()}},{key:"createCompleted",value:function(){var e=this.type();e.file=this.compilation.file,this.modifier&&"internal"===this.modifier.value()?this.compilation.internalDeclared.set(this.namespace.getChain().concat(this.left.value()).join("."),e):this.namespace.set(this.left.value(),e)}},{key:"reference",value:function(){return this.right.reference()}},{key:"referenceItems",value:function(){return this.right.referenceItems()}},{key:"description",value:function(){return this.right.description()}},{key:"type",value:function(e){if(this._type)return this._type;var t=this.right.value();switch(t){case"any":return this._type=new AnyType_1(t);case"nullable":return this._type=new NullableType_1(t);case"void":return this._type=new VoidType_1(t);case"never":return this._type=new NeverType_1(t)}return this._type=new AliasType_1(this.right.type(e),this)}},{key:"parser",value:function(){this.right.parser(!0)}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.left).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.left).warn.apply(t,[e].concat(n))}},{key:"value",value:function(){return this.left.value()}},{key:"raw",value:function(){return this.left.raw()}},{key:"emit",value:function(){}}]),a}(),DeclaratorTypeAlias_1=DeclaratorTypeAlias,InstanceofType=function(){_inherits(a,Type_1);var s=_createSuper(a);function a(e,t,i,n){var r;return _classCallCheck(this,a),(r=s.call(this,"$InstanceofType",e)).target=t,r.isInstanceofType=!0,r.isThisType=!!n,i||n||!e||(i=(e.isModule&&e.getModuleGenerics()||[]).map(function(e){return e.type()})),r.generics=i||[],r.hasGenericType=r.generics.some(function(e){return!!e.hasGenericType}),r}return _createClass(a,[{key:"clone",value:function(t){return t&&this.hasGenericType?new a(this.inherit,this.target,this.generics.map(function(e){return e.clone(t)}),this.isThisType):this}},{key:"getTypeKeys",value:function(){return this.inherit.getTypeKeys()}},{key:"attribute",value:function(e){return this.inherit.getMember(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"get")}},{key:"is",value:function(e,i){if(!(e&&e instanceof Type_1))return!1;if(!this.isNeedCheckType(e))return!0;if(e.target===this.target&&e.isInstanceofType)return!0;if(this.isThisType&&e.isInstanceofType&&!e.isThisType)return!1;if(this.target.isNewExpression&&this.target.genericity){var t=this.target.genericity,n=e.isInstanceofType&&e.target.isNewExpression?e.target.genericity:null;if(!n||t.length!=n.length)return!1;if(!t.every(function(e,t){return e.type().is(n[t].type(),i)}))return!1}return e=e.isInstanceofType?e.inherit:e,this.inherit.type().is(e,i)}},{key:"toString",value:function(t){return this.isThisType?"this":0<this.generics.length?"".concat(this.inherit.getName(),"<").concat(this.generics.map(function(e){return e.toString(t)}).join(", "),">"):this.inherit.toString(t)}}]),a}(),InstanceofType_1=InstanceofType,DeclaratorVariable=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isDeclaratorVariable=!0,s.modifier=s.createTokenStack(t,i.modifier,n,i,_assertThisInitialized(s)),s.declarations=i.expression.declarations.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s.declarations.forEach(function(e){s.namespace.has(e.id.value())&&s.namespace.get(e.id.value()).compilation===s.compilation&&e.id.error(1097,e.id.value()),s.modifier&&"internal"===s.modifier.value()?s.compilation.internalDeclared.set(s.namespace.namespace.getChain().concat(e.id.value()).join("."),_assertThisInitialized(s)):s.namespace.set(e.id.value(),_assertThisInitialized(s))}),s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.declarations),this.declarations.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(e){var t=this.value(),e=this.declarations[0].definition(e);return{kind:"property",comments:this.comments,identifier:t,expre:"(global) ".concat(e.expre),location:this.declarations[0].getLocation(),file:this.compilation.file,context:this}}},{key:"metatypes",get:function(){return this._metatypes},set:function(e){this._metatypes=e}},{key:"annotations",get:function(){return this._annotations},set:function(e){this._annotations=e}},{key:"kind",get:function(){return this.declarations[0].kind}},{key:"init",get:function(){return this.declarations[0].init}},{key:"id",get:function(){return this.declarations[0].value()}},{key:"acceptType",get:function(){return this.declarations[0].acceptType}},{key:"assignItems",get:function(){return this.declarations[0].assignItems}},{key:"reference",value:function(){return this.declarations[0].reference()}},{key:"referenceItems",value:function(){return this.declarations[0].referenceItems()}},{key:"description",value:function(){return this}},{key:"type",value:function(e){return this._type||(this._type=new InstanceofType_1(this.declarations[0].type(e),this))}},{key:"parser",value:function(){this.declarations[0].parser()}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.declarations[0]).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.declarations[0]).warn.apply(t,[e].concat(n))}},{key:"value",value:function(){return this.declarations[0].value()}},{key:"raw",value:function(){return this.declarations[0].raw()}}]),o}(),DeclaratorVariable_1=DeclaratorVariable,DoWhileStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isDoWhileStatement=!0,n.condition=n.createTokenStack(e,t.test,i,t,_assertThisInitialized(n)),n.body=n.createTokenStack(e,t.body,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.condition.freeze(),this.body.freeze()}},{key:"definition",value:function(){return null}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.condition?(this.condition.parser(),this.condition.setRefBeUsed(),this.body.parser(),this.condition.description().isLiteral&&!this.body.body.some(function(e){return e.isReturnStatement||e.isBreakStatement})&&this.condition.warn(1042)):this.error(1041),!0)}}]),a}(),DoWhileStatement_1=DoWhileStatement,EmptyStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isEmptyStatement=!0,e}return _createClass(a)}(),EmptyStatement_1=EmptyStatement,EnumType=function(){_inherits(r,Type_1);var n=_createSuper(r);function r(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return _classCallCheck(this,r),(e=n.call(this,"$EnumType",e)).target=t,e.isEnumType=!0,e.owner=i,e.acceptProperties=[],e}return _createClass(r,[{key:"accept",value:function(e){this.acceptProperties.push(e)}},{key:"attribute",value:function(e){return this.target.attribute(e)}},{key:"attributes",get:function(){return this.target.attributes}},{key:"is",value:function(e,t){return!!(e&&e instanceof Type_1)&&(!this.isNeedCheckType(e)||(this.owner?this.inherit.type().is(e,t):e.isEnumType&&e.owner===this))}},{key:"toString",value:function(){if(this.owner)return this.owner.isEnumType?"".concat(this.owner.target.key.value()):"".concat(this.owner.id,".").concat(this.target.value());var e=[],t=this.inherit,e=t&&t.isModule&&t.isEnum?Object.keys(t.methods):this.target.properties.map(function(e){return e.value()});return"enum {".concat(e.join(","),"}")}}]),r}(),EnumType_1=EnumType,EnumDeclaration=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(n,e,r,t,i){var s;return _classCallCheck(this,o),(s=a.call(this,n,e,r,t,i)).isEnumDeclaration=!0,s.isDeclarator=!0,s.key=s.createTokenStack(n,e.key,r,e,_assertThisInitialized(s)),s.inherit=s.createTokenStack(n,e.extends,r,e,_assertThisInitialized(s)),s.increment=0,s.mapProperties=new Map,s.imports=[],s._metatypes=[],s._annotations=[],s.isExpressionDeclare=!(i.isPackageDeclaration||i.isProgram),s.isExpressionDeclare?(s.properties=e.properties.map(function(e,t){var e=s.createTokenStack(n,e,r,e,_assertThisInitialized(s)),i=e.init&&e.init.value();return e.key.isIdentifier||e.error(1043,e.raw()),i&&("number"==typeof i?s.increment=i+1:"string"==typeof i?s.increment=i:e.error(1044,e.raw())),s.mapProperties.has(e.value())&&e.error(1045,e.raw()),s.mapProperties.set(e.value(),e),e}),r.define(s.value(),_assertThisInitialized(s))):(s.modifier=s.createTokenStack(n,e.modifier,r,e),(t=s.module=n.createModule(s.namespace,s.key.value())).id=s.key.value(),t.comments=s.comments,t.isEnum=!0,t.isLocalModule=!0,t.increment=s.increment,n.addModuleStack(t,_assertThisInitialized(s))),s}return _createClass(o,[{key:"metatypes",get:function(){return this._metatypes},set:function(e){var t=this;e.some(function(e){e.additional=t}),this._metatypes=e}},{key:"annotations",get:function(){return this._annotations},set:function(e){var t=this;e.forEach(function(e){e.additional=t}),this._annotations=e,this.dynamic=e.some(function(e){return"dynamic"===e.name.toLowerCase()}),this.module.isFinal=e.some(function(e){return"final"===e.name.toLowerCase()})}},{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.properties),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.mapProperties),this.parentStack.isPackageDeclaration&&(_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.id),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.module),(this.properties||[]).forEach(function(e){return e.freeze()}))}},{key:"createCompleted",value:function(){var n,r,e,s=this;this.isExpressionDeclare||(n=this.compilation,r=this.module,this.imports.forEach(function(e){var t,i=n.getModuleById(e.value());i?(s.checkDepend(s.module,i)&&e.error(1024,e.value()),t=e.alias?e.alias.value():i.id,s.module.addImport(t,i,i.id!=t)||e.error(1025,t)):e.error(1026,e.value())}),this.inherit&&((e=this.getModuleById(this.inherit.value()))||this.inherit.error(1027,this.inherit.value()),r.extends=e,this.increment=e.increment),this.properties=this.node.properties.map(function(e,t){var e=s.createTokenStack(n,e,s.scope,e,s),i=e.init&&e.init.value();return e.key.isIdentifier||e.error(1043,e.raw()),i&&("number"==typeof i?s.increment=i+1:"string"==typeof i?s.increment=i:e.error(1044,e.raw())),s.mapProperties.has(e.value())&&e.error(1045,e.raw()),s.mapProperties.set(e.value(),e),r.addMember(e.value(),e,!0),e}),r.increment=this.increment)}},{key:"assignment",value:function(e){((1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)||this).error(1015,this.raw())}},{key:"definition",value:function(){this.properties.map(function(e){return"".concat(e.value(),"=").concat(e.init.value())});var e="enum ".concat(this.value());return{kind:"enum",comments:this.comments,identifier:this.value(),expre:e,location:this.key.getLocation(),file:this.compilation.file,context:this}}},{key:"attributes",get:function(){return this.mapProperties}},{key:"attribute",value:function(e){return this.mapProperties.get(e)||null}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"description",value:function(){return this}},{key:"type",value:function(){return this.parentStack.isPackageDeclaration&&this.module.isEnum?this.module:this._type||(this._type=new EnumType_1(this.getGlobalTypeById("object"),this))}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(o.prototype),"parser",this).call(this)&&(this.metatypes.forEach(function(e){return e.parser()}),this.annotations.forEach(function(e){return e.parser()}),this.inherit&&this.inherit.parser(),this.properties.forEach(function(e){return e.parser()}),!0)}},{key:"value",value:function(){return this.key.value()}}]),o}(),EnumDeclaration_1=EnumDeclaration,EnumProperty=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(e,t,i,n,r){_classCallCheck(this,o),(n=a.call(this,e,t,i,n,r)).isEnumProperty=!0,n.key=n.createTokenStack(e,t.key,i,t,_assertThisInitialized(n));var s=t.init;return s||("string"==typeof r.increment?n.key.error(1153,n.key.value()):((s=Object.assign({},t)).type="Literal",s.value=r.increment++,s.raw="".concat(s.value),s.start=-1,s.end=-1,s.loc=null)),n.init=n.createTokenStack(e,s,i,t,_assertThisInitialized(n)),n}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.init),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.key)}},{key:"definition",value:function(){var e="(enum member) ".concat(this.parentStack.value(),".").concat(this.value(),"=").concat(this.init.value());return{kind:"enum",comments:this.comments,identifier:this.value(),expre:e,location:this.getLocation(),file:this.compilation.file,context:this}}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"description",value:function(){return this}},{key:"type",value:function(){return this._type||(this._type=new EnumType_1("string"==typeof this.init.value()?this.getGlobalTypeById("String"):this.getGlobalTypeById("Number"),this,this.parentStack.type()))}},{key:"raw",value:function(){return this.key.raw()}},{key:"value",value:function(){return this.key.value()}}]),o}(),EnumProperty_1=EnumProperty,ExpressionStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isExpressionStatement=!0,n.expression=n.createTokenStack(e,t.expression,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.expression.freeze()}},{key:"definition",value:function(){return null}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.expression).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.expression).warn.apply(t,[e].concat(n))}},{key:"reference",value:function(){return this.expression.reference()}},{key:"referenceItems",value:function(){return this.expression.referenceItems()}},{key:"description",value:function(){return this.expression.description()}},{key:"parser",value:function(){this.expression.parser()}},{key:"value",value:function(){return this.expression.value()}},{key:"raw",value:function(){return this.expression.raw()}}]),a}(),ExpressionStatement_1=ExpressionStatement,ForInStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isForInStatement=!0,n.left=n.createTokenStack(e,t.left,i,t,_assertThisInitialized(n)),n.right=n.createTokenStack(e,t.right,i,t,_assertThisInitialized(n)),n.body=n.createTokenStack(e,t.body,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.left.freeze(),this.right.freeze(),this.body.freeze()}},{key:"definition",value:function(){return null}},{key:"parser",value:function(){var r=this;if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;this.left.parser(),this.left.setRefBeUsed(),this.right.parser(),this.right.setRefBeUsed(),this.body&&this.body.parser();var e=this.right.description(),t=e.type(),i=this.getGlobalTypeById("Iterator"),n=this.getGlobalTypeById("Object");if(!t.isAnyType){if(i.check(t)||n.check(t))return;this.right.error(1046,this.right.raw())}this.left.isVariableDeclaration&&(1<this.left.declarations.length&&this.left.declarations[1].error(1047,"for-in"),this.left.declarations[0].init&&this.left.declarations[0].init.error(1048,"for-in"));var s=new Set;return function i(e){if(!e)return[];var t,n=[];e.isDeclarator||e.isPropertyDefinition?e.acceptType&&!e.acceptType.type().isAnyType?s.add(e.acceptType.type()):n=Array.from(e.assignItems):e.isMethodDefinition||e.isFunctionDeclaration?e.returnType&&!e.returnType.type().isAnyType?s.add(e.returnType.type()):(n=e.scope.returnItems.map(function(e){return e.argument}),e.isMethodGetterDefinition&&(t=e.key.value(),(t=r.module.getMember(t,"set"))&&(n=n.concat(Array.from(t.assignItems))))):n.push(e),n.forEach(function(e){var t;e.isArrayExpression||e.isLiteral||e.isObjectExpression||e.isModule?e.isModule?s.add(e):s.add(e.type()):(t=e.description(),e!==t&&i(t))})}(e),Array.from(s).every(function(e){return e.is(i)||e.is(n)})||this.right.warn(1049,this.right.raw()),!1}}]),a}(),ForInStatement_1=ForInStatement,ForOfStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isForOfStatement=!0,n.left=n.createTokenStack(e,t.left,i,t,_assertThisInitialized(n)),n.right=n.createTokenStack(e,t.right,i,t,_assertThisInitialized(n)),n.body=n.createTokenStack(e,t.body,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.left.freeze(),this.right.freeze(),this.body.freeze()}},{key:"definition",value:function(){return null}},{key:"parser",value:function(){var r=this;if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;this.left.parser(),this.left.setRefBeUsed(),this.right.parser(),this.right.setRefBeUsed(),this.body&&this.body.parser();var e=this.right.description(),t=this.getGlobalTypeById("Iterator"),i=e.type();if(!(i=i.isLiteralArrayType?i.extends[0]:i).isAnyType){if(i.is(t))return;this.right.error(1049,this.right.raw())}this.left.isVariableDeclaration&&(1<this.left.declarations.length&&this.left.declarations[1].error(1047,"for-of"),this.left.declarations[0].init&&this.left.declarations[0].init.error(1048,"for-of"));var s=new Set;return function i(e){if(!e)return[];var t,n=[];e.isStack&&e.isDeclarator||e.isPropertyDefinition?e.acceptType&&!e.acceptType.type().isAnyType?s.add(e.acceptType.type()):n=Array.from(e.assignItems):e.isMethodDefinition||e.isFunctionDeclaration?e.returnType&&!e.returnType.type().isAnyType?s.add(e.returnType.type()):(n=e.scope.returnItems.map(function(e){return e.argument}),e.isMethodGetterDefinition&&(t=e.key.value(),(t=r.module.getMember(t,"set"))&&(n=n.concat(Array.from(t.assignItems))))):n.push(e),n.forEach(function(e){var t;e.isArrayExpression||e.isLiteral||e.isObjectExpression||e.isModule?e.isModule?s.add(e):s.add(e.type()):(t=e.description(),e!==t&&i(t))})}(e),Array.from(s).every(function(e){return e.is(t)})||this.right.warn(1049,this.right.raw()),!0}}]),a}(),ForOfStatement_1=ForOfStatement,ForStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isForStatement=!0,n.init=n.createTokenStack(e,t.init,i,t,_assertThisInitialized(n)),n.condition=n.createTokenStack(e,t.test,i,t,_assertThisInitialized(n)),n.update=n.createTokenStack(e,t.update,i,t,_assertThisInitialized(n)),n.body=n.createTokenStack(e,t.body,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.init&&this.init.freeze(),this.condition&&this.condition.freeze(),this.update&&this.update.freeze(),this.body.freeze()}},{key:"definition",value:function(){return null}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.init&&(this.init.parser(),this.init.setRefBeUsed()),this.condition&&(this.condition.parser(),this.condition.setRefBeUsed()),this.update&&(this.update.parser(),this.update.setRefBeUsed()),this.body&&this.body.parser(),!0)}}]),a}(),ForStatement_1=ForStatement,FunctionDeclaration=function(){_inherits(a,FunctionExpression_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isFunctionDeclaration=!0,n.key=n.createTokenStack(e,t.id,i,t,_assertThisInitialized(n)),i.define(n.key.value(),_assertThisInitialized(n)),n.scope.define("this",new InstanceofType_1(n.getGlobalTypeById("Object"),_assertThisInitialized(n),null,!0)),n.useRefItems=new Set,n}return _createClass(a,[{key:"addUseRef",value:function(e){this.useRefItems.add(e)}},{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.key.freeze(),Object.freeze(this.useRefItems)}}]),a}(),FunctionDeclaration_1=FunctionDeclaration,GenericDeclaration=function(){_inherits(o,Stack_1);var i=_createSuper(o);function o(n,r,s,e,t){var a;return _classCallCheck(this,o),(a=i.call(this,n,r,s,e,t)).isGenericDeclaration=!0,a.elements=r.elements.map(function(e){var e=a.createTokenStack(n,e,s,r,_assertThisInitialized(a)),t=s.getScopeByType("function"),i=e.value();return s.isDefine(i)&&s.define(i).scope.getScopeByType("function")===t?e.error(1056,i):a.getTypeById(i)?e.error(1057,i):s.define(i,e),e}),a}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.elements)}},{key:"description",value:function(){return this}},{key:"definition",value:function(){return null}},{key:"type",value:function(){return null}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(o.prototype),"parser",this).call(this))return!1;var i=!1;return this.elements.forEach(function(e){e.parser();var t=e.isGenericTypeAssignmentDeclaration;i&&!t&&e.error(1058),i=e.isGenericTypeAssignmentDeclaration}),!0}},{key:"value",value:function(){var e=this.elements.map(function(e){return e.value()});return"<".concat(e.join(","),">")}},{key:"raw",value:function(){return this.raw()}}]),o}(),GenericDeclaration_1=GenericDeclaration,GenericType=function(){_inherits(a,Type_1);var s=_createSuper(a);function a(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return _classCallCheck(this,a),(t=s.call(this,"$GenericType",i)).target=e,t.isGenericType=!0,t.assignType=n,t.hasConstraint=!!i,t.isFunGeneric=r,t.hasGenericType=!0,t}return _createClass(a,[{key:"attribute",value:function(e){var t=this.inherit;return t?t.isLiteralObjectType?t.attribute(e):t.isModule?t.getMember(e,"get"):null:null}},{key:"clone",value:function(e){return e?e(this):this}},{key:"is",value:function(e,t){if(!(e&&e instanceof Type_1))return!1;if(!this.isNeedCheckType(e))return!0;e.isInstanceofType&&(e=e.inherit);var i=this.inherit;return!!i&&(i.isLiteralObjectType?i.constraint(e,t):(e.isGenericType&&e.hasConstraint&&(e=e.inherit),i.type().is(e,t)))}},{key:"toString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=[];if(!e.scopeGenerics)return this.target.value();var i=this.inherit;return t.push(this.target.value()),i?t.push(" extends ".concat(i.toString(e))):this.assignType&&t.push(" = "+this.assignType.toString(e)),t.join("")}}]),a}(),GenericType_1=GenericType,GenericTypeAssignmentDeclaration=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isGenericTypeAssignmentDeclaration=!0,n.left=n.createTokenStack(e,t.left,i,t,_assertThisInitialized(n)),n.right=n.createTokenStack(e,t.right,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.left),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.right)}},{key:"definition",value:function(){var e=this.type();if(e.isModule)return e.definition();var t=this.left.value();return{kind:this.kind,comments:this.comments,identifier:t,expre:"(Type) ".concat(e.toString()),location:this.left.getLocation(),file:this.compilation.file,context:this}}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.left).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.left).warn.apply(t,[e].concat(n))}},{key:"description",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(e){var t;return this._type||(t=!!(this.parentStack&&this.parentStack.parentStack&&this.parentStack.parentStack.isFunctionExpression),this._type=new GenericType_1(this,null,this.right.type(),t)),this._type}},{key:"parser",value:function(){this.right.parser()}},{key:"value",value:function(){return this.left.value()}}]),a}(),GenericTypeAssignmentDeclaration_1=GenericTypeAssignmentDeclaration,GenericTypeDeclaration=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isGenericTypeDeclaration=!0,n.valueType=n.createTokenStack(e,t.value,i,t,_assertThisInitialized(n)),n.extends=n.createTokenStack(e,t.extends,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.valueType),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.extends)}},{key:"definition",value:function(e){var t=this.type(),i=this.valueType.value(),n=this.parentStack.parentStack,e=n.module.toString(e),r=n.isFunctionExpression?n.type().toString():e,e=n.isFunctionExpression&&n.parentStack&&n.parentStack.key?e+"."+n.parentStack.key.value():"";return{kind:this.kind,comments:this.comments,identifier:i,expre:"(type parameter) ".concat(t.toString()," in ").concat(e).concat(r),location:this.valueType.getLocation(),file:this.compilation.file,context:this}}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.valueType).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.valueType).warn.apply(t,[e].concat(n))}},{key:"description",value:function(){return this}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(e){var t;return this._type||(this.extends&&this.scope.define(this.extends.value())===this?this._type=this.getGlobalTypeById("never"):(t=!!(this.parentStack&&this.parentStack.parentStack&&this.parentStack.parentStack.isFunctionExpression),this._type=new GenericType_1(this,this.extends?this.extends.type():null,null,t))),this._type}},{key:"parser",value:function(){this.extends&&(this.scope.define(this.extends.value())===this?this.extends.error(1141,this.extends.value()):this.extends.parser())}},{key:"value",value:function(){return this.valueType.value()}},{key:"raw",value:function(){return this.valueType.raw()}}]),a}(),GenericTypeDeclaration_1=GenericTypeDeclaration,keySymbol$h=Symbol("key"),Identifier=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isIdentifier=!0,e[keySymbol$h]={},e}return _createClass(a,[{key:"definition",value:function(e){var t=this.description();if((e=e||this.getContext()).action="definition",t&&t!==this){var i=this.parentStack;if((i.isCallExpression||i.isNewExpression)&&i.callee===this)return i.definition(e);if(i.isMemberExpression){if(i.parentStack.isImportDeclaration||i.property===this)return i.definition(e)}else{if(i.isTypeObjectPropertyDefinition||i.isTypeTupleRestDefinition)return this.parentStack.definition(e);if(i.isTypeDefinition)return i.parentStack.isTypeTupleDefinition&&i.parentStack.prefix||i.parentStack.isTypeTupleRestDefinition?i.parentStack.definition(e):null}if(t.isType||t.isStack){i=t.definition(e);if(i)return i}}return this.parentStack?this.parentStack.definition(e):null}},{key:"reference",value:function(e){var t=this.value(),t=this.scope.define(t);return t&&t!==this&&t instanceof Stack_1?t.reference(e):this}},{key:"referenceItems",value:function(e){var t=this.value(),t=this.scope.define(t);return t&&t!==this&&t instanceof Stack_1?t.referenceItems(e):[this]}},{key:"description",value:function(){var e=this.value();if(this.module&&(this.module.isFragment||this.compilation.JSX||this.parentStack&&this.parentStack.isFragment&&this.parentStack.parentStack.isJSXAttribute)){var t=this.module,t=this.scope.define(e)||t.getMember(e,"get");if(t)return t}if(this.parentStack){if(this.parentStack.isDeclaratorDeclaration||this.parentStack.isClassDeclaration||this.parentStack.isInterfaceDeclaration||this.parentStack.isEnumDeclaration&&!this.isExpressionDeclare)return this.getModuleById(e);if(this.parentStack&&this.parentStack.parentStack.isAnnotationDeclaration)return this.scope.define(e)}return this.scope.define(e)||this.getModuleById(e)||Namespace_1.fetch(e)}},{key:"parser",value:function(){if(!1===_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;var e,t=this.description();return t?(t.isAliasType||t.isGenericTypeDeclaration||t.isTypeStatement)&&!this.scope.isDirective?(e=this.parentStack).isTypeTransformExpression||e.isTypeDefinition||e.isTypeTupleRestDefinition||e.isTypeTupleDefinition||e.isGenericTypeDeclaration||e.isGenericDeclaration||e.isTypeObjectDefinition||e.isTypeObjectPropertyDefinition||e.isTypeFunctionDefinition||e.isTypeUnionDefinition||this.error(1059,this.value()):t.isStack?t.parser():t.isModule&&t.compilation&&t.compilation.parser():this.error(1013,this.value()),!0}},{key:"type",value:function(e){if(this[keySymbol$h]._type)return this[keySymbol$h]._type;var t=this.description();return t?t.isNamespace?t:this[keySymbol$h]._type=t&&(t.isStack||t.isType)?t.type(e):this.getGlobalTypeById("any"):this.getGlobalTypeById("any")}},{key:"value",value:function(){return this.node.name}},{key:"raw",value:function(){return this.node.name}}]),a}(),Identifier_1=Identifier,IfStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isIfStatement=!0,n.condition=n.createTokenStack(e,t.test,i,t,_assertThisInitialized(n)),n.consequent=n.createTokenStack(e,t.consequent,i,t,_assertThisInitialized(n)),n.alternate=n.createTokenStack(e,t.alternate,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.condition),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.consequent),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.alternate)}},{key:"definition",value:function(){return null}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.condition?(this.condition.parser(),this.condition.setRefBeUsed()):this.error(1041),this.consequent&&this.consequent.parser(),this.alternate&&this.alternate.parser(),!0)}}]),a}(),IfStatement_1=IfStatement,ImportDeclaration=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isImportDeclaration=!0,n.specifiers=n.createTokenStack(e,t.specifiers,i,t,_assertThisInitialized(n)),n.alias=n.createTokenStack(e,t.alias,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.alias),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.specifiers)}},{key:"definition",value:function(){var e,t,i,n,r=this.description();if(r.isType&&r.isModule&&(r.isClass||r.isDeclarator||r.isInterface))return e=this.type().toString(),t=this.value(),i=r.isClass?"class":r.isDeclarator?"declarator":"interface",n=r.getName(),{kind:"import",comments:r.comments,identifier:t,expre:"(import) ".concat(i," ").concat(n),type:e,start:this.node.start,end:this.node.end,file:r.compilation.file,context:r}}},{key:"description",value:function(){return this.specifiers.description()}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.parentStack&&this.parentStack.isProgram&&((e=this.getModuleById(this.specifiers.value()))&&e.id?(t=this.alias?this.alias.value():e.id,this.scope.define(t,e)):this.specifiers.error(1026,this.specifiers.value())),!0);var e,t}},{key:"type",value:function(){return this.specifiers.type()}},{key:"value",value:function(){return this.specifiers.value()}},{key:"raw",value:function(){return this.specifiers.raw()}}]),a}(),ImportDeclaration_1=ImportDeclaration,InterfaceDeclaration=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(i,n,r,e,t){_classCallCheck(this,o),r=new ClassScope_1(r),(s=a.call(this,i,n,r,e,t)).isInterfaceDeclaration=!0,s._metatypes=[],s._annotations=[],s.id=s.createTokenStack(i,n.id,r,n,_assertThisInitialized(s));var s,e=s.module=i.createModule(s.namespace,s.id.value());return s.id.module=e,s.inherit=s.createTokenStack(i,n.extends,r,n,_assertThisInitialized(s)),n.extends&&n.extends.genericity&&(s.inherit.assignGenerics=n.extends.genericity.map(function(e){return s.createTokenStack(i,e,r,n,_assertThisInitialized(s))})),s.implements=(n.implements||[]).map(function(e){var t=s.createTokenStack(i,e,r,n,_assertThisInitialized(s));return e.genericity&&(t.assignGenerics=e.genericity.map(function(e){return s.createTokenStack(i,e,r,n,_assertThisInitialized(s))})),t}),s.imports=[],s.body=[],s.relatedGenericTypes=new Map,s.modifier=s.createTokenStack(i,n.modifier,r,n),s.genericity=s.createTokenStack(i,n.genericity,r,n,_assertThisInitialized(s)),e.comments=s.comments,e.isInterface=!0,e.isLocalModule=!0,i.addModuleStack(e,_assertThisInitialized(s)),s}return _createClass(o,[{key:"getGenericTypes",value:function(){return this.relatedGenericTypes}},{key:"metatypes",get:function(){return this._metatypes},set:function(e){var t=this;e.forEach(function(e){e.additional=t}),this._metatypes=e}},{key:"annotations",get:function(){return this._annotations},set:function(e){var t=this;e.forEach(function(e){e.additional=t}),this._annotations=e}},{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.id),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.scope),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.inherit),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.implements),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.imports),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.modifier),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.genericity),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.module),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.body),(this.body||[]).forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return{kind:"Module",comments:this.comments,identifier:this.id.value(),expre:"(".concat("Interface",") ").concat(this.module.getName()),location:this.id.getLocation(),file:this.file,context:this}}},{key:"createCompleted",value:function(){var e,t,i,n,r=this,s=this.compilation,a=(this.imports.forEach(function(e){var t,i=s.getModuleById(e.value());i&&i.isType?(r.checkDepend(r.module,i)&&e.error(1024,e.value()),t=e.alias?e.alias.value():i.id,r.module.addImport(t,i,i.id!=t)||e.error(1025,t)):e.error(1026,e.value())}),this.inherit&&((e=this.getModuleById(this.inherit.value()))?(e.used=!0,this.module.extends=e,this.compilation.addDependency(e,this.module),e.inherit&&(t=this.compilation.getStackByModule(e.inherit))&&t.relatedGenericTypes.forEach(function(e,t){r.relatedGenericTypes.set(t,e)}),this.inherit.assignGenerics&&(i=this.inherit.assignGenerics,(n=this.compilation.getStackByModule(e))&&n.genericity&&this.compilation.once("onBeforeParser",function(){n.genericity.elements.forEach(function(e,t){r.relatedGenericTypes.set(e.type(),i[t].type())})}))):this.inherit.error(1027,this.inherit.value())),this.module.implements=this.implements.map(function(e){var i,t,n=r.getModuleById(e.value());return n?(n.isInterface||n.isDeclarator||e.error(1028,e.value()),r.compilation.addDependency(n,r.module),n.inherit&&(t=r.compilation.getStackByModule(n.inherit))&&t.relatedGenericTypes.forEach(function(e,t){r.relatedGenericTypes.set(t,e)}),e.assignGenerics&&(i=e.assignGenerics,(t=r.compilation.getStackByModule(n))&&t.genericity&&t.genericity.elements.forEach(function(e,t){r.relatedGenericTypes.set(e.type(),i[t].type())}))):e.error(1029,e.value()),n}),[]),o=[];this.body=this.node.body.map(function(e){e=r.createTokenStack(s,e,r.scope,r.node,r);if(e.isMetatypeDeclaration)a.push(e);else{if(!e.isAnnotationDeclaration)return e.metatypes=a.splice(0,a.length),e.annotations=o.splice(0,o.length),e;o.push(e)}}).filter(function(e){return!!e})}},{key:"genericsCheck",value:function(e,t){var i,n,r=this.compilation.getStackByModule(e);r&&(t=t||[],r=(i=r.genericity?r.genericity.elements:[]).filter(function(e){return!e.isGenericTypeAssignmentDeclaration}),n=t[t.length-1]||this.inherit,(r.length>t.length||t.length>i.length)&&(r.length===i.length?n.error(1030,e.toString(),r.length):n.error(1031,e.toString(),r.length,i.length)),0<i.length&&t.forEach(function(e,t){t=i[t]&&i[t].type();t&&t.hasConstraint&&!t.check(e)&&e.error(1003,e.type().toString(),t.toString())}))}},{key:"parser",value:function(){var i=this;return!!_get(_getPrototypeOf(o.prototype),"parser",this).call(this)&&(this.genericity&&(this.genericity.parser(),this.genericity.elements.forEach(function(e){e=e.type();e.hasConstraint?i.relatedGenericTypes.set(e,e.inherit):e.assignType?i.relatedGenericTypes.set(e,e.assignType):i.relatedGenericTypes.set(e,i.getGlobalTypeById("any"))})),this.metatypes.forEach(function(e){return e.parser()}),this.annotations.forEach(function(e){return e.parser()}),this.inherit&&this.genericsCheck(this.module.extends[0],this.inherit.assignGenerics),this.module.implements.forEach(function(e,t){i.genericsCheck(e,i.implements[t].assignGenerics)}),this.body.forEach(function(e){return e.parser()}),!0)}},{key:"value",value:function(){return this.id.value()}},{key:"raw",value:function(){return this.node.name}}]),o}(),InterfaceDeclaration_1=InterfaceDeclaration,Parser=Parser_1.Parser,nameRegExp=/^[_a-zA-Z]+([\w]+)?$/,JSXAttribute=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(i=s.call(this,e,t,i,n,r)).isJSXAttribute=!0,i.jsxElement=r.jsxElement,i.name=i.createTokenStack(e,t.name,i.scope,t,_assertThisInitialized(i)),i.value=i.createTokenStack(e,t.value,i.scope,t,_assertThisInitialized(i)),i.hasNamespaced=!!i.name.isJSXNamespacedName,i.isAttributeXmlns=!!i.hasNamespaced&&"xmlns"===i.name.namespace.value().toLowerCase(),i.isAttributeDirective=!1,i.isMemberProperty=!1,i.isAttributeXmlns&&r&&r.parentStack.isJSXElement&&r.parentStack.xmlns.push(_assertThisInitialized(i)),i.isAttributeXmlns&&i.jsxElement.jsxRootElement!==i.jsxElement&&i.name.error(1117),i.hasNamespaced&&!i.isAttributeXmlns&&(n=i.name.getXmlNamespace(),e=i.compiler.options.jsx||{},t=null,(t=n&&n.value?n.value.value().toLowerCase():(r=i.getNamespaceStack(),e.xmlns&&e.xmlns.default[r.namespace.value().toLowerCase()]||t))&&(n=(e.xmlns&&e.xmlns.sections)["@directives"],"@directives"===t&&(i.value&&i.jsxElement.jsxRootElement===i.jsxElement&&i.value.error(1115),n&&!n.includes(i.name.value())?i.value.error(1125,n.join(",")):i.isAttributeDirective=!0,(e.xmlns.context||[]).includes(i.name.value())&&(i.scope=new BlockScope_1(i.scope),i.scope.isDirective=!0,i.parentStack.scope=i.scope,i.parentStack.parentStack.scope=i.scope)))),i}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.name.freeze(),this.value.freeze()}},{key:"definition",value:function(e){if(this.isAttributeXmlns)return t=[this.name.name.value(),this.value&&this.value.value()].filter(function(e){return!!e}).join(": "),{kind:"namespace",comments:null,identifier:this.name.name.value(),expre:"(xmlns) ".concat(t),location:(this.value||this.name.name).getLocation(),file:this.compilation.file,range:this.name.node.loc};if(this.hasNamespaced){var t=this.getXmlNamespace(),t=t&&t.value?t.value.value():null;if(t&&t.includes("::")){t=_slicedToArray(t.split("::",2),2),t=(t[0],t[1]),t=this.getModuleById(t);if(t){t=this.getAttributeDescription(t,"get");if(t){t=t.definition(e);if(t)return t.range=this.name.name.getLocation(),t}}}}t=this.description();if(t)return t.definition(e);t=this.parentStack.parentStack;return t&&t.isJSXStyle&&t.absoluteFile?{kind:"attr",comments:null,identifier:this.name.value(),expre:"(attr) ".concat(this.name.value(),": ").concat(t.absoluteFile.replace(/\\/g,"/")),location:{start:{column:0,line:1},end:{column:0,line:1}},range:(e.stack||this.value).getLocation(),file:t.absoluteFile}:null}},{key:"reference",value:function(){return null}},{key:"referenceItems",value:function(){return[]}},{key:"getNamespaceStack",value:function(){return this.name.isJSXNamespacedName?this.name:this.name.isJSXMemberExpression&&this.name.object.isJSXNamespacedName?this.name.object:null}},{key:"getXmlNamespace",value:function(e){var t;return this.parentStack.isJSXOpeningElement?(t=this.getNamespaceStack(),this.parentStack.getXmlNamespace(e||t.namespace.value())):null}},{key:"getAttributeDescription",value:function(e){return this.name.getAttributeDescription(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"set")}},{key:"description",value:function(){if(this.isAttributeDirective)return this._directiveDesc;if(!this.isAttributeXmlns){var e=this.parentStack.parentStack;if(e.isJSXElement&&e.isComponent)return this.getAttributeDescription(e.description())}return null}},{key:"type",value:function(){return this.getGlobalTypeById("void")}},{key:"createType",value:function(e,t,i){var n,r=this;return i=i||e.type(),e&&i?((n=MergeType_1.forOfItem(i))!==i&&(n.definition=function(){return{kind:"identifier",identifier:t,expre:"(local var) ".concat(t,":").concat(n.toString()),location:r.value.getLocation(),file:r.compilation.file}}),n):this.getGlobalTypeById("any")}},{key:"parserDirective",value:function(){var t=this;if(void 0!==this._directiveDesc)return this._directiveDesc;this._directiveDesc=null,this.valueArgument={};function e(e){return t.scope.define(e)}var i,n,r,s,a,o,c=this.name.value(),l=null;return"if"===c||"elseif"===c?(l=this.parserAttributeValueStack(),this.valueArgument={expression:l,declare:{}}):"each"===c||"for"===c?this.value&&this.value.isJSXExpressionContainer?(this.valueArgument={expression:l,declare:{item:"item",key:"key"},isExpression:isExpression},this.scope.define("key",this.getGlobalTypeById("string")),this.scope.define("item",this.createType(l,"item"))):(n=this.value.value().trim(),o=(i=_slicedToArray((n="each"===c?n.split(/\s+of\s+/,2):n.split(/\s+in\s+/,2)).map(function(e){return e.trim()}),2))[0],i=i[1],i={expression:l=this.parserAttributeValueStack(i),declare:{}},"each"===c?2===n.length&&nameRegExp.test(o)?l&&this.getGlobalTypeById("array").check(l)||this.value.error(1119):this.value.error(1116):(40===o.charCodeAt(0)&&(41!==o.charCodeAt(o.length-1)?this.value.error(1043):o=o.slice(1,-1)),r=(a=_slicedToArray(n=o.split(",").map(function(e){return e.trim()}),3))[0],s=a[1],a=a[2],o=r,(!(1<=n.length&&n.length<=3)||o&&!nameRegExp.test(o)||s&&!nameRegExp.test(s)||a&&!nameRegExp.test(a))&&this.value.error(1121),!l||this.getGlobalTypeById("array").check(l)||this.getGlobalTypeById("number").check(l)||this.getGlobalTypeById("string").check(l)||this.getGlobalTypeById("object").check(l)||this.value.error(1120),s&&(e(s)?this.value.error(1045,s):(i.declare.key=s,this.scope.define(s,{type:function(){return t.getGlobalTypeById("string")}}))),a&&(e(a)?this.value.error(1045,a):(i.declare.index=a,this.scope.define(a,{type:function(){return t.getGlobalTypeById("number")}})))),e(o)&&this.value.error(1045,o),this.scope.define(o,this.createType(l,o,null)),i.declare.item=o,this.valueArgument=i):"else"!==c&&("show"===c?(l=this.parserAttributeValueStack(),this.valueArgument={expression:l,declare:{}}):this.name.error(1114,c)),this._directiveDesc=l}},{key:"parserAttributeValueStack",value:function(e){var t=this;if(void 0!==this._attributeValueStack&&!e)return this._attributeValueStack;function i(e){if(r)return t.value;if(!e)return null;try{return t.value.module=t.module||n,t.value.isFragment=!0,t.createTokenStack(t.compilation,Parser.parseExpressionAt(e,0,{}),t.scope,t.value.node,t.value)}catch(e){t.value.error(1121)}}var n=this.jsxElement.getSubClassDescription();if(e)return i(e);var e="",r=!1;return this.value&&(this.value.isJSXExpressionContainer?r=!0:e=this.value.value()),this._attributeValueStack=i(e)}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;if(this.jsxElement.isDirective){var e=this.name.value();if("condition"===e||"name"===e)return this.parserAttributeValueStack(),!0}var t,i,n,r,s;return this.isAttributeDirective?this.parserDirective():(e=this.getNamespaceStack(),r=this.compiler.options.jsx||{xmlns:{}},this.isAttributeXmlns?(n=this.value&&this.value.value())&&(n.includes("::")&&(s=(i=_slicedToArray(n.split("::",2),2))[0],i=i[1],t=this.getModuleById(i),n=s,Utils.isClassType(t)||this.name.error(1027,i)),r.xmlns.sections[n]||Namespace_1.fetch(n)||this.value.error(1099,n)):this.hasNamespaced&&((s=this.getXmlNamespace()||r.xmlns.default[e.namespace.value().toLowerCase()])?(t=s.value&&s.value.value())&&t.includes("::")&&((i=_slicedToArray(t.split("::",2),2))[0],n=i[1],(s=(r=this.getModuleById(n))&&r.getMethod(e.name.value(),"get"))?(this.setRefBeUsed(s),this.compilation.addDependency(r,this.module)):this.value.error(1080,e.name.value())):this.error(1098,e.namespace.value())),this.value&&this.value.parser()),!0}}]),a}(),JSXAttribute_1=JSXAttribute,keySymbol$g=Symbol("key"),Literal=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isLiteral=!0,e[keySymbol$g]={},e}return _createClass(a,[{key:"definition",value:function(e){return null}},{key:"reference",value:function(){return this}},{key:"description",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(){if(this[keySymbol$g]._type)return this[keySymbol$g]._type;var e="string",t=this.node;return t.regex?e="regexp":t.value==t.raw?(e="uint",this.parentStack.isUnaryExpression?e="int":t.raw.includes(".")&&(e="float")):"false"===t.raw||"true"===t.raw?e="boolean":"null"===t.raw&&(e="nullable"),this[keySymbol$g]._type=this.getGlobalTypeById(e),"regexp"!==e&&"nullable"!==e&&(this[keySymbol$g]._type=new LiteralType_1(this[keySymbol$g]._type,this,this.node.value)),this[keySymbol$g]._type}},{key:"value",value:function(){return this.node.value}},{key:"raw",value:function(){return this.node.raw}}]),a}(),Literal_1=Literal,JSXCdata=function(){_inherits(a,Literal_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).jsxElement=r.jsxElement,e.isJSXCdata=!0,e}return _createClass(a)}(),JSXCdata_1=JSXCdata,JSXClosingElement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isJSXClosingElement=!0,n.jsxElement=r.jsxElement,n.name=n.createTokenStack(e,t.name,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.name&&this.name.freeze()}},{key:"definition",value:function(e){var t,i=e&&e.stack;if(this.parentStack&&this.parentStack.hasNamespaced){if(i)return t=(t=this.parentStack.getXmlNamespace())&&t.value&&t.value.value(),t=this.parentStack.isProperty?Namespace_1.fetch(t):Namespace_1.create(t,!0),(t=this.name.description(t,i))?t.definition(e):null;i=this.parentStack.description();if(i)return i.definition(e)}else if(this.parentStack.isJSXElement)return this.parentStack.definition(e);return null}},{key:"reference",value:function(){return null}},{key:"referenceItems",value:function(){return[]}},{key:"description",value:function(){return null}},{key:"type",value:function(){return this.getGlobalTypeById("void")}},{key:"parser",value:function(){}}]),a}(),JSXClosingElement_1=JSXClosingElement,JSXClosingFragment=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isJSXClosingFragment=!0,e.jsxElement=r.jsxElement,e}return _createClass(a,[{key:"definition",value:function(){return null}},{key:"reference",value:function(){return null}},{key:"referenceItems",value:function(){return[]}},{key:"description",value:function(){return null}},{key:"type",value:function(){return this.getGlobalTypeById("void")}},{key:"parser",value:function(){}}]),a}(),JSXClosingFragment_1=JSXClosingFragment,JSXElement=function(){_inherits(u,Stack_1);var o=_createSuper(u);function u(t,i,e,n,r){var s,a;return _classCallCheck(this,u),(s=o.call(this,t,i,e,n,r)).isJSXElement=!0,s.jsxRootElement=r.jsxRootElement||_assertThisInitialized(s),s.jsxElement=_assertThisInitialized(s),s.xmlns=[],s.directives=null,s.isSlot=!1,s.isSlotDeclared=!1,s.isDirective=!1,s.isWebComponent=!1,s.isSkinComponent=!1,s.ownerProperty=null,s.newCreatedScope=!1,s.openingElement=s.createTokenStack(t,i.openingElement,s.scope,i,_assertThisInitialized(s)),s.hasNamespaced&&(n=(e=s.getNamespaceStack()).name.value(),(a=(r=s.compiler.options.jsx||{}).xmlns&&r.xmlns.context)&&a.includes(n)&&("@directives"===((a=s.getXmlNamespace())&&a.value?a.value.value():r.xmlns.default[e.namespace.value()])&&(s.scope=new BlockScope_1(s.scope),s.scope.isDirective=!0))),s.children=i.children.map(function(e){return s.createTokenStack(t,e,s.scope,i,_assertThisInitialized(s))}),s.jsxRootElement===_assertThisInitialized(s)&&s.children.sort(function(e,t){return e.isJSXScript||e.isJSXStyle?-1:0}),s.closingElement=s.createTokenStack(t,i.closingElement,s.scope,i,_assertThisInitialized(s)),s}return _createClass(u,[{key:"hasNamespaced",get:function(){return!!this.openingElement.hasNamespaced}},{key:"nodeName",get:function(){var e,t,i;return this.hasNamespaced?(e=this.getNamespaceStack().namespace.value(),t=this.openingElement.value(),(i=this.getXmlNamespace(e))?(i=i.value&&i.value.value())&&"@"!==i?"".concat(i,".").concat(t):t:"".concat(e,".").concat(t)):this.openingElement.name.value()}},{key:"attributes",get:function(){return this.isAttrClone?this._attributes:this.openingElement.attributes.slice(0)}},{key:"isComponent",get:function(){var e=this.description();return!(!e||this.getGlobalTypeById("Node")===e||!e.isModule)}},{key:"isProperty",get:function(){if(this.parentStack&&this.parentStack.isJSXElement){var e=this.getXmlNamespace();if(e){if(this.openingElement.name.isJSXMemberExpression)return!0;if(this.openingElement.name.isJSXNamespacedName)return e=e.value&&e.value.value(),e=Namespace_1.fetch(e),this.parentStack.description()===e}}return!1}},{key:"freeze",value:function(){_get(_getPrototypeOf(u.prototype),"freeze",this).call(this),this.children.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(e){var t,i=e&&e.stack;if(i&&this.hasNamespaced)return t=(t=this.getXmlNamespace())&&t.value&&t.value.value(),t=this.isProperty?Namespace_1.fetch(t):Namespace_1.create(t,!0),(t=this.openingElement.name.description(t,i))?t.definition(e):null;i=this.description();return i&&i!==this.getGlobalTypeById("Node")?i.definition(e):null}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"isFirstUppercase",value:function(e){return!!e&&(65<=(e=e.charCodeAt(0))&&e<=90)}},{key:"description",value:function(){var e,t,i,n,r;return void 0===this.__desc&&(this.__desc=null,this.hasNamespaced?(e=this.getXmlNamespace(),i=(n=this.compiler.options.jsx||{}).xmlns&&n.xmlns.sections,t=this.getNamespaceStack(),r=!0,(e=e&&e.value?e.value.value():n.xmlns.default[t.namespace.value()])&&i[e]&&("*"===(n=i[e])[0]||n.includes(this.openingElement.name.value())?(r=!1,"@slots"===e?this.isSlot=!0:"@directives"===e&&(this.isDirective=!0)):this.openingElement.name.error(1125,n.join(","))),r&&(t=this.isProperty?this.parentStack.getSubClassDescription():Namespace_1.create(e,!0),this.__desc=this.openingElement.name.description(t),this.__desc&&this.__desc.isModule&&this.compilation.addDependency(this.__desc,this.module),this.__desc?this.isModuleForWebComponent(this.__desc)?this.isWebComponent=!0:this.isModuleForSkinComponent(this.__desc)&&(this.isSkinComponent=!0):(i=t&&t.isNamespace?t.getChain().concat(this.openingElement.name.value()).join("."):this.openingElement.name.value(),this.isProperty?this.openingElement.name.error(1080,i):this.openingElement.name.error(1111,i)))):(n=this.openingElement.name.value(),(r=this.scope.define(n)||this.getModuleById(n))?(r=r.type(),this.__desc=r,this.isModuleForWebComponent(r)?(this.isWebComponent=!0,this.compilation.addDependency(r,this.module)):this.isModuleForSkinComponent(r)&&(this.isSkinComponent=!0,this.compilation.addDependency(r,this.module))):this.__desc=this.getGlobalTypeById("Node"))),this.__desc}},{key:"isModuleForWebComponent",value:function(e){if(!(e&&e.isModule&&e.isClass))return!1;for(var t=e;t;){var i=this.compilation.getStackByModule(t);if(i&&i.annotations&&i.annotations.some(function(e){return"webcomponent"===e.name.toLowerCase()}))return!0;t=t.inherit}return!1}},{key:"isModuleForSkinComponent",value:function(e){if(!(e&&e.isModule&&e.isClass))return!1;for(var t=e;t;){var i=this.compilation.getStackByModule(t);if(i&&i.annotations&&i.annotations.some(function(e){return"skinclass"===e.name.toLowerCase()}))return!0;t=t.inherit}return!1}},{key:"type",value:function(e){if(this._type)return this._type;var t;if(this.isSlotDeclared)return 0<this.openingElement.attributes.length?(t=new Map,this.openingElement.attributes.forEach(function(e){t.set(e.name.value(),e.value.description())}),this._type=new LiteralObjectType_1(this.getGlobalTypeById("object"),this,t)):this._type=this.getGlobalTypeById("void");var i=this.description();return this._type=i?new InstanceofType_1(i,this):this.getGlobalTypeById("nullable")}},{key:"getNamespaceStack",value:function(){return this.openingElement.name.isJSXNamespacedName?this.openingElement.name:this.openingElement.name.isJSXMemberExpression&&this.openingElement.name.object.isJSXNamespacedName?this.openingElement.name.object:null}},{key:"getXmlNamespace",value:function(t){var e=this;if(!(t=t||this.hasNamespaced&&this.getNamespaceStack().namespace.value()))return null;var i=this.__xmlns||(this.__xmlns={});if(void 0!==i[t])return i[t];var n=this.xmlns.find(function(e){return e.name.name.value()===t});return i[t]=n||(this.parentStack.isJSXElement?this.parentStack.getXmlNamespace(t):(i=e.getParentStack(function(e){return!!e.isJSXElement}))&&i.isJSXElement?i.getXmlNamespace(t):null)}},{key:"getSubClassDescription",value:function(){var e=this.module,t=this.description();return t&&t.isModule&&e&&e.extends[0]===t?e:t}},{key:"filterPropertyChildren",value:function(){return this.children.filter(function(e){return e.isJSXText?!!e.value().trim():!!e})}},{key:"getDescriptionAcceptType",value:function(e){if(e){if(e.isMethodSetterDefinition||e.isPropertyDefinition)return e.params[0]&&e.params[0].type();if(e.isPropertyDefinition)return e.type()}return null}},{key:"parserPropertyValue",value:function(e){var t=this.children;if(1===t.length&&t[0].isJSXExpressionContainer)return t[0].description();this.error(1113)}},{key:"getSlotDescription",value:function(n,e){for(var r=this,t=e||this.parentStack&&this.parentStack.description();t;){var i=t.jsxDeclaredSlots;if(i&&i.has(n))return i.get(n);i=function(e){e=r.compilation.getStackByModule(e);if(e){var t,i,e=e.annotations&&e.annotations.find(function(e){if("define"===e.name.toLowerCase()){e=e.getArguments();if(e&&1<e.length&&e[0].value&&"slot"===e[0].value.toLowerCase())return e.slice(1).some(function(e){return e.assigned&&"name"===e.key&&e.value===n||!e.assigned&&e.value===n})}return!1});if(e)return t=e.getArguments(),i={name:n,args:{},isAnnotation:!0,annotation:e},t.slice(1).forEach(function(e){e.assigned&&"name"!==e.key.toLowerCase()&&(i.args[e.key]=e.value)}),i}}(t);if(i)return i;t=t.inherit}return null}},{key:"checkDirective",value:function(){var e,t,r,s,a=this,i=this.openingElement.name.value(),n=this.openingElement.attributes;switch(n.forEach(function(e){e.isAttributeDirective&&e.name.error(1143)}),i){case"if":case"show":case"elseif":1!==n.length?this.openingElement.name.error(1145,1,n.length):n.every(function(e){return"condition"===e.name.value()})||this.openingElement.name.error(1144,"condition");break;case"else":0<n.length&&this.openingElement.name.error(1145,0,n.length);break;case"each":case"for":n.length<2||4<n.length?this.openingElement.name.error(1145,2,n.length):n.every(function(e){return["name","item","key","index"].includes(e.name.value())})?(t=(e=n.find(function(e){return"name"===e.name.value()})).parserAttributeValueStack(),r=t&&t.description(),"each"===i?r&&this.getGlobalTypeById("array").check(r)||e.value.error(1119):r&&(this.getGlobalTypeById("array").check(r)||this.getGlobalTypeById("number").check(r)||this.getGlobalTypeById("string").check(r)||this.getGlobalTypeById("object").check(r))||e.value.error(1120),s=[],n.forEach(function(e){var t=e.value.value(),i=e.name.value(),n=(s.push(i),null);switch(i){case"key":n=e.createType(e.value,t,new AliasType_1(a.getGlobalTypeById("String"),"string"));break;case"index":n=e.createType(e.value,t,new AliasType_1(a.getGlobalTypeById("Number"),"number"));break;case"item":n=e.createType(r,t)}n&&a.scope.define(t,n)})):this.openingElement.name.error(1144,["name","item","key","index"].join(", "))}}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(u.prototype),"parser",this).call(this))return!1;var e,t,i,n=this.compiler.options.jsx||{xmlns:{}},r=this.description(),s=(this.children=this.filterPropertyChildren(),this.parentStack.isJSXElement&&(this.ownerProperty=this.parentStack.ownerProperty||(this.isProperty?this:null)),!this.hasNamespaced||this.getXmlNamespace()||n.xmlns.default[this.getNamespaceStack().namespace.value().toLowerCase()]||this.error(1098,this.getNamespaceStack().namespace.value()),this.isComponent),a=this.getSubClassDescription();s&&this.jsxRootElement===this&&(this.compilation.JSX&&this.parentStack&&this.parentStack.isProgram&&(this.isModuleForWebComponent(r)||this.isModuleForSkinComponent(r))?(this.module.extends=r,this.scope.define("this",new InstanceofType_1(this.module,this))):this.isWebComponent),this.isSlot&&this.module&&(e=this.openingElement.name.value(),(t=this.getParentStack(function(e){return!(!e.isComponent&&e.isJSXElement)}))?(c=this.module.jsxDeclaredSlots||(this.module.jsxDeclaredSlots=new Map),!t.isComponent||this.compilation.JSX&&t.jsxRootElement===t?(this.isSlotDeclared=!0,c.has(e)?this.openingElement.name.error(1129,e):c.set(e,this)):this.parentStack!==t?this.openingElement.name.error(1127,e):((c=this.getSlotDescription(e))||this.openingElement.name.warn(1126,e),t.isComponent&&(0<this.openingElement.attributes.length&&(i=this.openingElement.attributes.find(function(e){return e.name.value()===n.slot.scopeName}),c&&c.openingElement&&!(0<c.openingElement.attributes.length)&&i&&i.name.error(1130,i.name.value()),i=i&&i.value?i.value.value():n.slot.scopeValue,this.scope.define(i,c||this)),!0===(i=t.componentsUseSlots||(t.componentsUseSlots={}))[e]?this.openingElement.name.error(1129,e):i[e]=!0))):this.openingElement.name.error(1127,e));this.openingElement.attributes.forEach(function(e){var t,i;e.parser(),!e.isAttributeXmlns&&s&&(t=e.getAttributeDescription(a))&&(e.isMemberProperty=!0,t.isMethodSetterDefinition||t.isPropertyDefinition?t.isPropertyDefinition&&t.isReadonly&&e.name.error(1142,e.name.value()):e.name.error(1080,e.name.value()),e.value&&(i=e.value.description())&&t.assignment(i,e.value))}),this.isProperty&&r&&r.assignment(this.parserPropertyValue(this.getDescriptionAcceptType(r)),this),s||this.isProperty||this.isSlot||this.isDirective||!this.openingElement.name.isJSXMemberExpression||this.warn(1108),this.isDirective?this.checkDirective():this.directives=this.openingElement.attributes.filter(function(e){return e.isAttributeDirective});var o=!1,c=null,l=!1;return!this.isWebComponent||!r||r.isDeclaratorModule||(r.isSkinComponent||r.isWebComponent)&&this.jsxRootElement===this||(o=!0,c=r.jsxDeclaredSlots,l=!(!c||!c.has("default"))||!!this.getSlotDescription("default",r)),this.children.forEach(function(e){e.parser(),e.isSlot||!o||l||e.warn(1131,r.getName())}),!0}},{key:"value",value:function(){return this.openingElement.value()}}]),u}(),JSXElement_1=JSXElement,JSXEmptyExpression=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).jsxElement=r.jsxElement,e.isJSXEmptyExpression=!0,e}return _createClass(a)}(),JSXEmptyExpression_1=JSXEmptyExpression,JSXExpressionContainer=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isJSXExpressionContainer=!0,n.jsxElement=r.jsxElement,n.expression=n.createTokenStack(e,t.expression,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.expression.freeze()}},{key:"definition",value:function(e){var t=this.expression.description();if(t){t=t.definition(e);if(t)return t}return null}},{key:"reference",value:function(){return this.expression.reference()}},{key:"referenceItems",value:function(){return this.expression.referenceItems()}},{key:"description",value:function(){return this.expression.description()}},{key:"type",value:function(e){return this.expression.type(e)}},{key:"parser",value:function(){this.expression.parser()}}]),a}(),JSXExpressionContainer_1=JSXExpressionContainer,JSXFragment=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isJSXFragment=!0,s.jsxRootElement=r.jsxRootElement||_assertThisInitialized(s),s.children=i.children.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),this.children.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"description",value:function(){return null}},{key:"getXmlNamespace",value:function(e){var t=this.xmlns;return t&&e&&t.name.value()===e?t:this.parentStack.isJSXElement||this.parentStack.isJSXFragment?this.parentStack.getXmlNamespace(e):null}},{key:"type",value:function(){return this.getGlobalTypeById("NodeList")}},{key:"parser",value:function(){this.children.forEach(function(e){return e.parser()})}}]),o}(),JSXFragment_1=JSXFragment,JSXIdentifier=function(){_inherits(a,Identifier_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).jsxElement=r.jsxElement,e.isJSXIdentifier=!0,e}return _createClass(a,[{key:"reference",value:function(){return null}},{key:"referenceItems",value:function(){return[]}},{key:"description",value:function(){return null}},{key:"type",value:function(){return this.getGlobalTypeById("void")}},{key:"definition",value:function(e){return this.parentStack.definition(this.getContext(e))}},{key:"parser",value:function(){}},{key:"getAttributeDescription",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"set";return e?this.compilation.getReference(this.value(),e,!1,t):null}}]),a}(),JSXIdentifier_1=JSXIdentifier,JSXMemberExpression=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isJSXMemberExpression=!0,n.jsxElement=r.jsxElement,n.object=n.createTokenStack(e,t.object,i,t,_assertThisInitialized(n)),n.property=n.createTokenStack(e,t.property,i,t,_assertThisInitialized(n)),n.hasNamespaced=!!n.object.isJSXNamespacedName,n}return _createClass(a,[{key:"reference",value:function(e){return null}},{key:"referenceItems",value:function(e){return[]}},{key:"definition",value:function(e){return this.parentStack.definition(e)}},{key:"getFirstMemberStack",value:function(){return this.object.isJSXMemberExpression?this.object.getFirstMemberStack():this.object}},{key:"getXmlNamespace",value:function(e){return this.parentStack.isJSXOpeningElement?this.parentStack.getXmlNamespace(e):null}},{key:"description",value:function(e,t){var i=this.property.value(),n=null;return this.object.isJSXMemberExpression?n=this.object.description(e,t):e&&(e.isModule?(n=e,this.jsxElement.isProperty||(n=e.getMember(this.object.value(),"get"))):e.isNamespace&&(n=e.get(this.object.value()))),t&&t!==this.property?n:n?(n=n.isModule?n:Utils.getOriginType(n.type())).getMember(i,"set"):null}},{key:"type",value:function(){return this.getGlobalTypeById("void")}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.object.parser(),this.property.parser(),!0)}},{key:"raw",value:function(){return"".concat(this.object.raw(),".").concat(this.property.raw())}},{key:"value",value:function(){return"".concat(this.object.value(),".").concat(this.property.value())}}]),a}(),JSXMemberExpression_1=JSXMemberExpression,JSXNamespacedName=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isJSXNamespacedName=!0,n.jsxElement=r.jsxElement,n.namespace=n.createTokenStack(e,t.namespace,i,t,_assertThisInitialized(n)),n.name=n.createTokenStack(e,t.name,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.name&&this.name.freeze(),this.namespace&&this.namespace.freeze()}},{key:"getXmlNamespace",value:function(){return this.parentStack.isJSXOpeningElement||this.parentStack.isJSXAttribute||this.parentStack.isJSXMemberExpression?this.parentStack.getXmlNamespace(this.namespace.value()):null}},{key:"getAttributeDescription",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"set";return e?this.compilation.getReference(this.name.value(),e,!1,t):null}},{key:"definition",value:function(e){var t,i=e&&e.stack;return i===this.namespace?(t=this.getXmlNamespace())?{kind:"namespace",comments:null,identifier:t.name.value(),expre:"(refs) ".concat(t.value.value()),location:t.value.getLocation(),file:t.compilation.file,range:i.getLocation()}:null:this.parentStack.definition(e)}},{key:"reference",value:function(){return null}},{key:"referenceItems",value:function(){return[]}},{key:"description",value:function(e,t){var i=this.name.value();return this.name.isJSXMemberExpression?this.name.description(e,t):e?e.isModule?e.getMember(i,"set"):e.isNamespace?this.compilation.getModuleById(e.getChain().concat(i).join(".")):null:this.compilation.getModuleById(i)}},{key:"type",value:function(){return this.getGlobalTypeById("void")}},{key:"value",value:function(){return this.name.value()}},{key:"parser",value:function(){}}]),a}(),JSXNamespacedName_1=JSXNamespacedName,JSXOpeningElement=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,e,n,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,e,n,r)).isJSXOpeningElement=!0,s.jsxElement=r.jsxElement,s.name=s.createTokenStack(t,i.name,s.scope,i,_assertThisInitialized(s)),s.attributes=i.attributes.map(function(e){return s.createTokenStack(t,e,s.scope,i,_assertThisInitialized(s))}),s.selfClosing=!!i.selfClosing,s.hasNamespaced=!(!s.name.isJSXNamespacedName&&!s.name.hasNamespaced),s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),this.attributes&&this.attributes.forEach(function(e){return e.freeze()}),this.name&&this.name.freeze()}},{key:"getXmlNamespace",value:function(e){return this.parentStack.isJSXElement?this.parentStack.getXmlNamespace(e):null}},{key:"definition",value:function(e){return this.parentStack.isJSXElement?this.parentStack.definition(e):null}},{key:"reference",value:function(){return null}},{key:"referenceItems",value:function(){return[]}},{key:"description",value:function(){return null}},{key:"type",value:function(){return this.getGlobalTypeById("void")}},{key:"parser",value:function(){this.name.parser(),this.attributes.forEach(function(e){return e.parser()})}},{key:"raw",value:function(){return this.name.raw()}},{key:"value",value:function(){return this.name.value()}}]),o}(),JSXOpeningElement_1=JSXOpeningElement,JSXOpeningFragment=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isJSXOpeningFragment=!0,s.jsxElement=r.jsxElement,s.attributes=i.attributes.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s.selfClosing=!!i.selfClosing,s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),this.attributes&&this.attributes.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"reference",value:function(){return null}},{key:"referenceItems",value:function(){return[]}},{key:"description",value:function(){return null}},{key:"type",value:function(){return this.getGlobalTypeById("void")}},{key:"parser",value:function(){}}]),o}(),JSXOpeningFragment_1=JSXOpeningFragment,JSXScript=function(){_inherits(u,Stack_1);var l=_createSuper(u);function u(n,i,r,e,t){var s,a,o,c;return _classCallCheck(this,u),(s=l.call(this,n,i,r,e,t)).isJSXScript=!0,s.jsxElement=t.jsxElement,s.body=[],s.hasClassDeclared=!1,s.isScriptProgram=!0,s.compilation.JSX||s.error(1109),s.openingElement=s.createTokenStack(n,i.openingElement,r,i,_assertThisInitialized(s)),s.closingElement=s.createTokenStack(n,i.closingElement,r,i,_assertThisInitialized(s)),t.isJSXElement&&t.isComponent&&t.jsxRootElement===t||(s.isScriptProgram=!1),s.isScriptProgram?(s.relatedGenericTypes=new Map,a=[],o=[],c=[],i.children.forEach(function(e){var t,e=s.createTokenStack(n,e,s.scope,i,_assertThisInitialized(s));e&&(e.isMetatypeDeclaration?o.push(e):e.isAnnotationDeclaration?(t=s.interceptAnnotation(e))&&a.push(t):e.isImportDeclaration?c.push(e):(e.annotations=a.splice(0,a.length),e.metatypes=o.splice(0,o.length),e.isClassDeclaration&&(s.hasClassDeclared=!0,s.module=e.module,e.imports=c.splice(0,c.length)),s.body.push(e)))}),s.imports=c,0<a.length&&a.forEach(function(e){e.error(1093)}),0<o.length&&o.forEach(function(e){e.error(1093)}),s.hasClassDeclared&&s.body.forEach(function(e){e.createCompleted&&e.createCompleted()}),s.imports.forEach(function(e){var t,i=n.getModuleById(e.value());i&&i.isModule?(Utils.checkDepend(s.module,i)&&e.error(1024,e.value()),t=e.alias?e.alias.value():i.id,s.module.addImport(t,i,i.id!=t,r)||e.error(1025,t)):e.error(1026,e.value())}),s.compilation.addModuleStack(s.module,_assertThisInitialized(s))):i.children.forEach(function(e){e=s.createTokenStack(n,e,s.scope,i,_assertThisInitialized(s));s.body.push(e)}),s}return _createClass(u,[{key:"getGenericTypes",value:function(){return this.relatedGenericTypes}},{key:"freeze",value:function(){_get(_getPrototypeOf(u.prototype),"freeze",this).call(this),_get(_getPrototypeOf(u.prototype),"freeze",this).call(this,this.scope),_get(_getPrototypeOf(u.prototype),"freeze",this).call(this,this.body),this.body.forEach(function(e){return e.freeze()})}},{key:"parser",value:function(){var e,t,i;this.isScriptProgram&&(this.imports.forEach(function(e){return e.parser()}),this.hostComponentAnnotation&&(e=(e=this.parentStack.description())&&e.getModuleGenerics(),i=this.hostComponentAnnotation.getArguments(),e&&i[0]&&((t=this.getModuleById(i[0].value))&&(e[0].hasConstraint&&!e[0].check(t)?i[0].stack.error(1003,t.toString(),e[0].toString(!0)):(i=this.compilation.getStackByModule(this.module))&&i.relatedGenericTypes&&i.relatedGenericTypes.set(e[0],t))))),this.body.forEach(function(e){e.parser()})}}]),u}(),JSXScript_1=JSXScript,JSXSpreadAttribute=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isJSXSpreadAttribute=!0,n.jsxElement=r.jsxElement,n.argument=n.createTokenStack(e,t.argument,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.argument&&this.argument.freeze()}},{key:"definition",value:function(){return null}},{key:"getAttributeDescription",value:function(e){return null}},{key:"reference",value:function(){return null}},{key:"referenceItems",value:function(){return[]}},{key:"description",value:function(){return this.argument.description()}},{key:"type",value:function(){}},{key:"parser",value:function(){}}]),a}(),JSXSpreadAttribute_1=JSXSpreadAttribute,JSXStyle=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isJSXStyle=!0,n.jsxElement=r.jsxElement,n.openingElement=n.createTokenStack(e,t.openingElement,i,t,_assertThisInitialized(n)),n.closingElement=n.createTokenStack(e,t.closingElement,i,t,_assertThisInitialized(n)),n.absoluteFile=null,n.attributeFile=n.openingElement.attributes.find(function(e){return"file"===e.name.value().toLowerCase()}),n.styleContent=t.children.map(function(e){return e.raw}).join(""),n}return _createClass(a,[{key:"attributes",get:function(){return this.isAttrClone?this._attributes:this.openingElement.attributes.slice(0)}},{key:"description",value:function(){return null}},{key:"parser",value:function(){var e,t,i,n=this.attributeFile,r=this.module||this.compilation;n?(n=n.value.value(),(e=this.compiler.resolve(n,this.file))?(this.absoluteFile=e,r.addAsset(e,n,null,path__default.default.extname(n),null)||this.error(1107,n)):this.error(1118,n)):(e=this.styleContent.trim(),n=lodash.uniqueId(e.length),i=".css",(t=this.openingElement.attributes.find(function(e){return"type"===e.name.value().toLowerCase()}))&&(i="."+t.value.value().replace(/^\./,"")),r.addAsset(n+i,null,e,"style",null)||this.error(1107,n))}},{key:"value",value:function(){return this.styleContent}}]),a}(),JSXStyle_1=JSXStyle,JSXText=function(){_inherits(a,Literal_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).jsxElement=r.jsxElement,e.isJSXText=!0,e}return _createClass(a)}(),JSXText_1=JSXText,LabeledStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){_classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isLabeledStatement=!0,n.labelChildren=[],n.labelParent=null,n.label=n.createTokenStack(e,t.label,i,t,_assertThisInitialized(n)),n.body=n.createTokenStack(e,t.body,i,t,_assertThisInitialized(n));e=r&&r.getParentStack(function(e){return!(!e.isLabeledStatement&&!e.isFunctionExpression)});return e&&e.isLabeledStatement&&(n.labelParent=e).labelChildren.push(_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.label),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.labelChildren),this.body.freeze()}},{key:"definition",value:function(){return{kind:"label",comments:this.label.comments,identifier:this.label.value(),expre:null,location:this.label.getLocation(),file:this.compilation.file,context:this}}},{key:"parser",value:function(){this.body.parser()}}]),a}(),LabeledStatement_1=LabeledStatement,LogicalExpression=function(){_inherits(a,Expression_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isLogicalExpression=!0,n.left=n.createTokenStack(e,t.left,i,t,_assertThisInitialized(n)),n.right=n.createTokenStack(e,t.right,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.left.freeze(),this.right.freeze()}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return this}},{key:"type",value:function(e){if(t=this._type)return t;var t=this.left.type(e);if(t.isLiteralType)return t.value?this._type=t:this._type=this.right.type(e);var i=new MergeType_1;return i.add(t),i.add(this.right.type(e)),this._type=i.type()}},{key:"parser",value:function(){this.left.parser(),this.left.setRefBeUsed(),this.right.parser(),this.right.setRefBeUsed()}}]),a}(),LogicalExpression_1=LogicalExpression,ComputeType=function(){_inherits(a,Type_1);var s=_createSuper(a);function a(e,t,i,n){var r;return _classCallCheck(this,a),(r=s.call(this,"$ComputeType")).isComputeType=!0,r.isAnyType=!0,r.target=e,r.object=t,r.property=i,r.originObject=t,r.originProperty=i,r.keyName=n,r}return _createClass(a,[{key:"hasGenericType",get:function(){return!(!this.object.type().hasGenericType&&!this.property.type().hasGenericType)}},{key:"clone",value:function(e){if(!e||!this.hasGenericType)return this;var t=this.getComputeType();if(t!==this)return t.clone(e);var t=this.object.type().clone(e),i=this.property.type().clone(e);if(i.isGenericType&&i.hasConstraint&&((e=i.inherit.clone(e)).hasGenericType||(i=e)),t.hasGenericType||i.hasGenericType)return this;e=new a(this.target,t,i,this.keyName);return e.originObject=this.object,e.originProperty=this.property,e}},{key:"isPropertyExists",value:function(e){var t=this.target&&this.target.isStack?this.target.getContext():null,t=t&&t.inference,i=this.object.type(),n=this.property.type();return t&&(i=i.hasGenericType?t(i):i,n=n.hasGenericType?t(n):n),!!this.getDescType(i,n,e||this.property)}},{key:"getDescType",value:function(i,e,t){function n(e,t){if(i.isLiteralArrayType||i.isLiteralObjectType||i.isGenericType||i.isTupleType||i.isEnumType||i.isIntersectionType||i.isInstanceofType){e=e?i.attribute(e):null;if(e)return e;if(i.isLiteralObjectType||i.isLiteralArrayType||i.isTupleType)return a(i,t)||i.dynamicAttribute(t)||o;if(i.isInstanceofType)return a(i,t)||i.inherit.dynamicAttribute(t)||o}return o}var r=this,s=function(e,t){var i=null;if(e.isInstanceofType){if((i=e.inherit.getMember(t,"get"))&&"public"!==Utils.getPropertyModifierName(i))return null}else e.isLiteralObjectType&&(i=e.attribute(t));return i?i.type():null},a=function(t,e){if(e.isUnionType||e.isTupleType){var i=e.elements.reduce(function e(t,i){return i.isUnionType||i.isTupleType?i.elements.reduce(e,t):t.concat(i.type())},[]).filter(function(e){return e.isLiteralType}).map(function(e){return s(t,e.value)}).filter(function(e){return!!e});if(i.length)return 1===i.length?i[0]:new UnionType_1(i,r.target)}else if(e.isLiteralType)return s(t,e.value);return null},o=Namespace_1.globals.get("any"),c=e.isUnionType&&t?e.elements.find(function(e){return e.type().check(t)}):e;return(c=c&&c.type())&&c.isLiteralType?n(c.value,c):n(null,c||e)}},{key:"getComputeType",value:function(e){var t=this.object.type(),i=this.property.type();return t.isThisType||t.hasGenericType||i.hasGenericType?this:(t=this.getDescType(t,i,e))?t.type():Namespace_1.globals.get("any")}},{key:"definition",value:function(){return{expre:"(type) ".concat(this.toString())}}},{key:"is",value:function(e,t){if(!(e&&e instanceof Type_1))return!1;function i(e){return Utils.inferTypeValue(e,t.inference)}var n=i(this.object.type()),r=i(this.property.type());return n.isGenericType||r.isGenericType?!(e.isTupleType||e.isLiteralArrayType):i(this.getDescType(n,r)).is(e,t)}},{key:"toString",value:function(e){e={parent:e,type:this};var t=this.object.type(),i=this.property.type();return t.isGenericType||i.isGenericType?"".concat(this.originObject.type().toString(e,!0),"[").concat(this.originProperty.type().toString(e),"]"):t.isThisType?"".concat(t.toString(),"[").concat(i.toString(e),"]"):this.getDescType(t,i).toString(e)}}]),a}(),ComputeType_1=ComputeType,Property=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isProperty=!0,n.hasAssignmentPattern=!1,n.assignValue=null,n._assignItems=new Set,n.useRefItems=new Set,n.isParamDeclarator=!1,n.hasInit=!1,t&&r&&(n.key=n.createTokenStack(e,t.key,i,t,_assertThisInitialized(n)),n.init=n.createTokenStack(e,t.value,i,t,_assertThisInitialized(n)),n.hasInit=t.value&&t.key!==t.value,n.acceptType=n.createTokenStack(e,t.acceptType,i,t,_assertThisInitialized(n)),n.init.isAssignmentPattern&&(n.hasAssignmentPattern=!0,n.init.acceptType=n.acceptType),r.isObjectPattern&&t.key===t.value||(n.assignValue=n.init,n._assignItems.add(n.init)),n._kind=t.kind,n.computed=!!t.computed,r.isObjectPattern&&r&&r.parentStack&&(((e=r.parentStack).isFunctionExpression||e.isTypeFunctionDefinition)&&(n.isParamDeclarator=!0))),n}return _createClass(a,[{key:"addUseRef",value:function(e){this.useRefItems.add(e)}},{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.key&&this.key.freeze(),this.init&&this.init.freeze(),this.acceptType&&this.acceptType.freeze()}},{key:"definition",value:function(e){var t,i;if(this.parentStack.isObjectPattern)return t=this.type(e).toString(),r=this.key.value(),i=this.parentStack.parentStack.parentStack,n="(".concat(this.kind,")"),this.isParamDeclarator&&(n="(parameter)"),{kind:this.kind,comments:i&&i.comments,identifier:r,expre:"".concat(n," ").concat(r,":").concat(t),location:this.key.getLocation(),file:this.compilation.file,context:i};this.parentStack.isObjectExpression&&!this.hasAssignmentPattern&&this.init;var n=this.value(),r=this.type(e).toString();return{kind:"property",comments:this.comments,identifier:n,expre:"(property) ".concat(n,": ").concat(r),location:this.key.getLocation(),file:this.compilation.file,context:this}}},{key:"kind",get:function(){return this.hasAssignmentPattern?this.init.kind:this._kind},set:function(e){this.hasAssignmentPattern?this.init.kind=e:this._kind=e}},{key:"value",value:function(){return this.key.value()}},{key:"reference",value:function(){return this.hasAssignmentPattern?this.init.reference():this.assignValue?this.assignValue.reference():null}},{key:"referenceItems",value:function(){if(this.hasAssignmentPattern)return this.init.referenceItems();var t=[];return this.assignItems.forEach(function(e){t=t.concat(e.referenceItems())}),t}},{key:"assignItems",get:function(){return this.hasAssignmentPattern?this.init.assignItems:this._assignItems}},{key:"assignment",value:function(e){this.parentStack.isObjectPattern&&this.hasAssignmentPattern?this.init.assignment(e):this.assignValue!==e&&(this.checkExpressionType(this.acceptType||this.assignValue,e),this.assignValue=e,this._assignItems.add(e),e&&e.isStack&&this.setRefBeUsed(e.description()))}},{key:"type",value:function(e){return this.acceptType?this.acceptType.type(e):this.assignValue?this.assignValue.type(e):this.getGlobalTypeById("any")}},{key:"description",value:function(){if(void 0!==this.__description)return this.__description;var e,t,i=null;return this.assignValue&&(i=this.assignValue.description())&&(t=this.getParentStack(function(e){return!!(e.isVariableDeclarator||e.isBlockStatement||e.isAssignmentExpression||e.isAssignmentPattern)}))&&this.init&&(t.isAssignmentExpression||t.isVariableDeclarator||t.isAssignmentPattern)&&t.value()===this.init.value()&&(t=t.isVariableDeclarator?t.init:t.right,1<i.assignItems.size&&(0<(t=(e=Array.from(i.assignItems)).lastIndexOf(t))&&(i=e[t-1]))),this.__description=i}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;if(this.acceptType&&this.acceptType.parser(),this.init&&(this.init.parser(),this.init.setRefBeUsed()),"dynamic"!==this.kind){var e=this.value();if(this.parentStack.isObjectPattern){var t=this.scope.define(e),i=this.parentStack.parentStack.init;if(i){if(i.isObjectExpression||i.isArrayExpression){var n=i.attribute(e);n||this.error(1080,e),t&&t.assignment(n)}else{var n=i.type();if(n.isAnyType)return;n&&(n.isLiteralObjectType||n.isLiteralArrayType||n.isGenericType)&&((i=n.attribute(e))&&t&&t.assignment(i))}return!0}}else this.computed&&(n=this.scope.define(e),this.key.isIdentifier&&!n&&this.error(1013,e),this.setRefBeUsed(n))}}},{key:"raw",value:function(){return(this.hasAssignmentPattern?this.init:this).raw()}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.key).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.key).warn.apply(t,[e].concat(n))}}]),a}(),Property_1=Property,keySymbol$f=Symbol("key"),MemberExpression=function(){_inherits(a,Expression_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isMemberExpression=!0,n.object=n.createTokenStack(e,t.object,i,t,_assertThisInitialized(n)),n.property=n.createTokenStack(e,t.property,i,t,_assertThisInitialized(n)),n._accessor=null,n.computed=!!t.computed,n[keySymbol$f]={},n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.object.freeze(),this.property.freeze()}},{key:"reference",value:function(e){var t=this.getDescription();return t!==this&&t instanceof Stack_1?t.reference(e):this}},{key:"referenceItems",value:function(e){var t=this.getDescription();return t!==this&&t instanceof Stack_1?t.referenceItems(e):[this]}},{key:"definition",value:function(e){if(this.parentStack.isCallExpression&&this.parentStack.callee===this)return this.parentStack.definition(e);(e=this.getContext(e)).action="definition";var t=(this.computed?this.property:this).description();if(!t||t.isAnyType)return null;if(t.isType){if(t.isUnionType||t.isLiteralArrayType||t.isTupleType){var i=t.elements.filter(function(e){return e.isStack});if(i&&0<i.length){var n,r=null,s=_createForOfIteratorHelper(i);try{for(s.s();!(n=s.n()).done;){var a=n.value.definition(e);if(!r){r=a;break}}}catch(e){s.e(e)}finally{s.f()}if(r)return r}}if(!Utils.isClassType(t))return{expre:"(property) ".concat(this.property.value(),": ").concat(t.toString())}}i=t?t.definition(e):null;return i&&this.node.loc&&(i.range=this.node.loc),i}},{key:"getContext",value:function(e){return(e=_get(_getPrototypeOf(a.prototype),"getContext",this).call(this,e)).scope="get",e}},{key:"accessor",set:function(e){this._accessor=e}},{key:"getDescription",value:function(){var e,t,o=this,i=this.property.value(),n=this.object.description();if(!n)return null;if(n.isNamespace)return n.get(i)||n.children.get(i);if(this.computed&&(this.property.isIdentifier&&(e=this.property.reference(),t=this.property.description(),e!==this.property||t.isDeclarator&&t instanceof Stack_1||(this.computed=!1)),this.computed))return(n=new ComputeType_1(this,this.object,this.property)).computed=!0,n;var c=function(i,n){if(!(i&&i instanceof Stack_1))return null;var e=i.referenceItems(),r=null;return e.every(function(e){var t=e.type(),t=i!==e?s(t,n,e):null;return(!r||!t||r.type()===t.type())&&!(!(r=t)||t.isAnyType)})?r:null},s=function e(t,i,n){if(!t)return null;if((t=t.type()).isAnyType)return t;if(n&&t===o.getGlobalTypeById("object")){var r=c(n,i);if(r)return r}r=t instanceof Module_1,n=n&&t===n.description();if(!r){if(t instanceof UnionType_1){for(var s=t.elements.length;0<s;){--s;var a=e(t.elements[s],i);if(a)return a}return null}if(t instanceof TupleType_1)return o.compilation.getReference(i,Utils.getOriginType(t),!1,o._accessor);if(t.isClassGenericType&&t.isClassType){for(t=t.types[0];t.isClassGenericType;)t=(t.isClassType?t.types:t.extends)[0];if(t===o.getGlobalTypeById("any"))return t;n=t instanceof Module_1&&t.isClass}else if(t.isLiteralArrayType||t.isLiteralObjectType||t.isGenericType||t.isEnumType){r=t.attribute(i);if(r)return r}t.isModule||(t=Utils.getOriginType(t))}return o.compilation.getReference(i,t,n,o._accessor)};return s(this.object.type(),i,this.object)}},{key:"description",value:function(){var e,t=this.__description;return void 0!==t||(this.__description=t=this.getDescription(),t||(e=this.module,(t=this.getModuleById(this.value())||null)&&Utils.isClassType(t)&&t!==e&&this.compilation.addDependency(t,this.module),this.__description=t)),t}},{key:"getGenericTypes",value:function(e){if(this[keySymbol$f]._relatedGenericTypes)return this[keySymbol$f]._relatedGenericTypes;function t(e){e&&e.forEach(function(e,t){a.set(t,e)})}var i,n,r,s,a=this[keySymbol$f]._relatedGenericTypes=new Map,o=this.object.type(e),e=this.compilation.getStackByModule(this.module);return e&&t(e.getGenericTypes()),o&&(e=null,(s=Utils.getOriginType(o))&&s.isModule&&(e=s.getModuleGenerics(),(s=this.compilation.getStackByModule(s))&&t(s.getGenericTypes()),e&&(o.isTupleType||o.isLiteralArrayType?(i=o.isTupleUnion&&1<o.elements.length?new UnionType_1(o.elements,o.target):0===o.elements.length?this.getGlobalTypeById("any"):1===o.elements.length?o.elements[0].type():o.isLiteralArrayType?(r=new Set,o.elements.map(function(e){e=e.type();r.add(e.isLiteralType?e.inherit:e)}),1<(s=Array.from(r.values())).length?new UnionType_1(s,o):s[0]):new TupleType_1(o.inherit,o.elements.map(function(e){e=e.type();return e.rest?e.elements[0].type():e}),o.target,o.rest,!0),e.forEach(function(e){a.set(e.type(),i)})):e.forEach(function(e){var e=e.type(),t=e.hasConstraint?e:e.assignType;a.set(e,t||new UnknownType_1)}))),o.isInstanceofType?(o.target&&t(o.target.getGenericTypes()),o.generics&&0<o.generics.length&&(s=o.inherit,n=s.isModule&&s.getModuleGenerics()||[],o.generics.forEach(function(e,t){t=n[t];t&&a.set(t,e)}))):o.isClassGenericType&&!o.isClassType&&(o.target&&t(o.target.getGenericTypes()),e&&e.forEach(function(e,t){e=e.type();o.types[t]&&a.set(e,o.types[t].type())}))),a}},{key:"type",value:function(e){var t=this.description();if(t){if(t.isNamespace)return t;e=this.getContext(e);return this.parentStack.isCallExpression?t.type(e):e.apply(t.type(e))}return this.getGlobalTypeById("any")}},{key:"isProtectedAccessible",value:function(e){if(e===this.module)return!0;for(var t=this.module;t=t.extends[0];)if(t===e)return!0;return!1}},{key:"getFirstMemberStack",value:function(){return this.object.isMemberExpression?this.object.getFirstMemberStack():this.object}},{key:"parser",value:function(){if(!1===_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;this.object.parser();var e,t,i=this.object.description(),i=(this.object.setRefBeUsed(i),i&&i.isStack&&this.parentStack&&this.parentStack.isAssignmentExpression&&(i=i.reference())&&i.isObjectExpression&&(t=this.property.value(),i.hasAttribute(t)||((e=new Property_1(this.compilation,this.property.node,this.scope,this.parentNode)).parentStack=this,e.namespace=this.namespace,e.module=this.module,e.key=this.property,e.kind="dynamic",i.attribute(t,e))),this.description());return i&&(i.isStack?i.parser():i.isModule&&i.compilation&&i.compilation.parser()),this.computed&&(this.property.parser(),this.property.setRefBeUsed(),((t=this.property.type()).isTupleType||t.isLiteralObjectType||t.isLiteralArrayType)&&this.property.error(1150,t.toString())),i?(i.isMethodDefinition||i.isPropertyDefinition)&&("public"!==(e=i.modifier?i.modifier.value():"public")&&this.scope.type("top")||"private"===e&&i.module!==this.module||"protected"===e&&!this.isProtectedAccessible(i.module))&&this.property.error(1061,this.raw()):(i=(e=(t=this.object.description())?Utils.getOriginType(t.type()):null)&&e.dynamic,t=this.parentStack&&this.parentStack.isJSXExpressionContainer?this.parentStack.expression:this.parentStack,i||t&&t.isMemberExpression||this.property.error(1060,this.raw())),!0}},{key:"raw",value:function(){return this.computed?"".concat(this.object.raw(),"[").concat(this.property.raw(),"]"):"".concat(this.object.raw(),".").concat(this.property.raw())}},{key:"value",value:function(){return this.computed?"".concat(this.object.value(),"[").concat(this.property.raw(),"]"):"".concat(this.object.value(),".").concat(this.property.value())}}]),a}(),MemberExpression_1=MemberExpression,MetatypeDeclaration=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),n=new BlankScope_1(null),(s=a.call(this,t,i,n,e,r)).isMetatypeDeclaration=!0,s.body=(i.body||[]).map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.body),(this.body||[]).forEach(function(e){return e.freeze()})}},{key:"name",get:function(){return this.node.name}},{key:"description",value:function(){return this}},{key:"getArguments",value:function(){var r=[];return this.body.map(function(e,t){var i,n;e.isAssignmentPattern?(i=e.left.value(),n=e.right.value(),r.push({key:i,value:n,assigned:!0,stack:e})):(i=t,n=e.value(),r.push({key:i,value:n,assigned:!1,stack:e}))}),r}}]),o}(),MetatypeDeclaration_1=MetatypeDeclaration,keySymbol$e=Symbol("key"),MethodDefinition=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){_classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isMethodDefinition=!0,n._metatypes=[],n._annotations=[],n.isMethod=!0,n.static=n.createTokenStack(e,t.static,i,t,_assertThisInitialized(n)),n.key=n.createTokenStack(e,t.key,i,t,_assertThisInitialized(n));r=n.key.value();return"constructor"===r||r===n.module.id?(n.isConstructor=!0,n.callable=!1,t.genericity&&n.key.error(1062)):n.callable=!0,n.expression=n.createTokenStack(e,t.value,i,t,_assertThisInitialized(n)),n.modifier=n.createTokenStack(e,t.modifier,i,t,_assertThisInitialized(n)),n.override=!1,n.isFinal=!1,n.expression.key=n.key,n.scope=n.expression.scope,n.kind=t.kind,n.static||n.expression.scope.define("this",new InstanceofType_1(n.module,_assertThisInitialized(n),null,!0)),n.module.addMember(r,_assertThisInitialized(n)),n.isEnterMethod=!1,n.useRefItems=new Set,n[keySymbol$e]={},n.policy=Constant_1.POLICY_NONE,n}return _createClass(a,[{key:"addUseRef",value:function(e){this.useRefItems.add(e)}},{key:"freeze",value:function(){this.key.freeze(),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.scope),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.static),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this._metatypes),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this._annotations),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.modifier),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.override),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this._annotations),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.useRefItems),this.expression.freeze()}},{key:"definition",value:function(s){var e=this.key.value(),t=((s=s||this.getContext(s)).called=!0,s.display=s.stack===this.key,this.type(s)),i=this.params.map(function(e){var t,i,n,r;return e.isObjectPattern?(t=e.properties.map(function(e){var t=e.key.value(),i=e.type().clone(s.inference),e=e.init;return e&&e.isAssignmentPattern?"".concat(e.left.value(),":").concat(i.toString(s)," = ").concat(e.right.raw()):"".concat(t,":").concat(i.toString(s))}),"{".concat(t.join(","),"}")):e.isArrayPattern?(t=e.elements.map(function(e){if(e.isAssignmentPattern)return t=e.type().clone(s.inference),"".concat(e.left.value(),":").concat(t.toString(s)," = ").concat(e.right.raw());var t=e.value(),e=e.type().clone(s.inference);return"".concat(t,":").concat(e.toString(s))}),"[".concat(t.join(","),"]")):(t=e.value(),i=e.type().clone(s.inference).toString(s),n=e.isRestElement?"...":"",r=e.question?"?":"",e.isAssignmentPattern&&e.right?(e=e.right.value(),"".concat(n).concat(t).concat(r,": ").concat(i,"=").concat(e)):"".concat(n).concat(t).concat(r,": ").concat(i))}),n=this.modifier?this.modifier.value():"public",r=this.module.getName(),a=this.static?"static ":"",o=this.module.getModuleGenerics(),o=(s.scopeGenerics=!0,!o||a&&!this.isConstructor||(r=[r,"<",o.map(function(e){return Utils.inferTypeValue(e.type(),s.inference).toString(s)}).join(", "),">"].join("")),(this.genericity?this.genericity.elements:[]).map(function(e){return Utils.inferTypeValue(e.type(),s.inference).toString(s,!0)})),c=(s.scopeGenerics=!1,this.isConstructor?"constructor":"method"),o=0<o.length?"<".concat(o.join(", "),">"):"";return this.isConstructor||(r="".concat(r,".").concat(e)),{kind:"".concat(c),comments:this.comments,identifier:e,expre:"(".concat(c,") ").concat(a).concat(n," ").concat(r).concat(o,"(").concat(i.join(", "),"): ").concat(Utils.inferTypeValue(t,s.inference).toString(s)),location:this.key.getLocation(),file:this.compilation.file,context:this}}},{key:"metatypes",get:function(){return this._metatypes},set:function(e){var t=this;this._metatypes=e,this.isConstructor&&(this.callable||(this.callable=e.some(function(e){return e.additional=t,"callable"===e.name.toLowerCase()})),this.callable&&(this.module.callable=this))}},{key:"annotations",get:function(){return this._annotations},set:function(e){var t=this;(this._annotations=e).forEach(function(e){switch(e.additional=t,e.name.toLowerCase()){case"override":t.override=!0;break;case"callable":t.callable=!!t.isConstructor,t.callable&&(t.module.callable=t);break;case"main":t.isEnterMethod=!0;break;case"final":t.isFinal=!0}})}},{key:"params",get:function(){return this.expression.params}},{key:"body",get:function(){return this.expression.body}},{key:"genericity",get:function(){return this.expression.genericity}},{key:"question",get:function(){return!!this.key.node.question}},{key:"reference",value:function(e){return this.expression.reference(e)}},{key:"referenceItems",value:function(e){return this.expression.referenceItems(e)}},{key:"description",value:function(){return this}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.key).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.key).warn.apply(t,[e].concat(n))}},{key:"getFunType",value:function(){return this.expression.getFunType()}},{key:"inferReturnType",value:function(e){return this.expression.inferReturnType(e)}},{key:"type",value:function(e){var t=this.expression,i=this.key.value();return"constructor"!==i&&i!==this.module.id||t._returnType?t.type(e):this.module}},{key:"returnType",get:function(){var e=this.expression,t=this.key.value();return"constructor"!==t&&t!==this.module.id||e._returnType?e.returnType:this.module}},{key:"value",value:function(){return this.key.value()}},{key:"parser",value:function(){var e,t,i,n;return!!_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(e=this.metatypes,t=this.annotations,e&&e.forEach(function(e){return e.parser()}),t&&t.forEach(function(e){e.parser()}),e=this.isAccessor?"accessor":"method",t=this.isMethodGetterDefinition?"get":this.isMethodSetterDefinition?"set":null,i=this.module.extends[0],this.override?(n=i&&i.getMember(this.key.value(),t),i&&n?n.isAccessor!==this.isAccessor?this.key.error(1136,this.key.value(),e):this.params.length!==n.params.length&&(this.isAccessor?this.key.error(1089,this.key.value()):1===this.params.length&&this.params[0].isRestElement||this.key.error(1088,this.key.value())):this.key.error(1063,this.key.value(),e),n&&n.isFinal&&this.key.error(1148,this.key.value())):i&&(n=i.getMember(this.key.value(),t))&&"private"!==n.modifier.value()&&this.key.error(1064,this.key.value(),e),this.expression.parser(),!0)}}]),a}(),MethodDefinition_1=MethodDefinition,MethodGetterDefinition=function(){_inherits(o,MethodDefinition_1);var s=_createSuper(o);function o(e,t,i,n,r){return _classCallCheck(this,o),(e=s.call(this,e,t,i,n,r)).isMethodGetterDefinition=!0,e.callable=!1,e.isAccessor=!0,e}return _createClass(o,[{key:"definition",value:function(t){t?t.called=!0:t=this.getContext(t,null,!0);var e=_get(_getPrototypeOf(o.prototype),"type",this).call(this,t),i=(t.called=!1,t.display=t.stack===this.key,this.key.value()),n=this.modifier?this.modifier.value():"public",r=this.module.getName(),s=this.static?"static ":"",a=this.module.getModuleGenerics();return t.scopeGenerics=!0,a&&(r=[r,"<",a.map(function(e){return e.clone(t.inference).toString(t)}).join(", "),">"].join("")),t.scopeGenerics=!1,{kind:"getter",comments:this.comments,identifier:i,expre:"(propery) ".concat(s).concat(n," get ").concat(r,".").concat(i,"():").concat(e.toString()),location:this.key.getLocation(),file:this.compilation.file,context:this}}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(o.prototype),"parser",this).call(this))return!1;0!=this.expression.params.length&&this.error(1065,this.key.value());var e=this.module&&(this.module.isDeclaratorModule||this.module.isInterface);return this.scope.returnItems.length<1&&!e&&this.error(1066,this.key.value()),!0}},{key:"type",value:function(e){return e?e.called=!0:e=this.getContext(e,null,!0),_get(_getPrototypeOf(o.prototype),"type",this).call(this,e)}},{key:"referenceItems",value:function(){return _get(_getPrototypeOf(o.prototype),"referenceItems",this).call(this,!0)}},{key:"reference",value:function(){return _get(_getPrototypeOf(o.prototype),"reference",this).call(this,!0)}},{key:"getFunType",value:function(){return null}}]),o}(),MethodGetterDefinition_1=MethodGetterDefinition,MethodSetterDefinition=function(){_inherits(a,MethodDefinition_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isMethodSetterDefinition=!0,e.callable=!1,e.assignValue=null,e.assignItems=new Set,e.isAccessor=!0,e}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.assignItems)}},{key:"definition",value:function(t){(t=t||this.getContext(t,null,!0)).called=!1,t.display=t.stack===this.key;var e=this.key.value(),i=t.inference,n=this.params.map(function(e){return"".concat(e.value(),":").concat(e.type().clone(i).toString(t))}),r=this.modifier?this.modifier.value():"public",s=this.module.getName(),a=this.static?"static ":"",o=this.module.getModuleGenerics();return t.scopeGenerics=!0,o&&(s=[s,"<",o.map(function(e){return e.clone(t.inference).toString(t)}).join(", "),">"].join("")),t.scopeGenerics=!1,{kind:"setter",comments:this.comments,identifier:e,expre:"(propery) ".concat(a).concat(r," set ").concat(s,".").concat(e,"(").concat(n.join(","),"):void"),location:this.key.getLocation(),file:this.compilation.file,context:this}}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;1!=this.expression.params.length&&this.error(1067,this.key.value());var e=this.expression.params[0],e=e.acceptType?e.acceptType.type():this.getModuleById("any"),t=this.compilation.getReference(this.key.value(),this.module,!!this.static,"get");return t&&e&&!e.check(t)&&this.error(1068,this.key.raw()),!0}},{key:"type",value:function(){return this.getModuleById("void")}},{key:"getFunType",value:function(){return null}},{key:"referenceItems",value:function(){return[]}},{key:"reference",value:function(){return null}},{key:"assignment",value:function(e){var t,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.assignValue!==e&&((i=(i=this.expression.params[0]).acceptType?i.acceptType.type():null)||(i=(t=this.compilation.getReference(this.key.value(),this.module,!!this.static,"get"))?t.type():null),this.checkExpressionType(i,e,n||this),this.assignItems.add(e),(this.assignValue=e)&&e.isStack&&this.setRefBeUsed(e.description()))}}]),a}(),MethodSetterDefinition_1=MethodSetterDefinition,ModifierDeclaration=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isModifierDeclaration=!0,e}return _createClass(a)}(),ModifierDeclaration_1=ModifierDeclaration,keySymbol$d=Symbol("key"),NewExpression=function(){_inherits(d,Expression_1);var a=_createSuper(d);function d(t,i,n,e,r){var s;return _classCallCheck(this,d),(s=a.call(this,t,i,n,e,r)).isNewExpression=!0,s.callee=s.createTokenStack(t,i.callee,n,i,_assertThisInitialized(s)),s.arguments=i.arguments.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s.genericity=null,i.genericity&&(s.genericity=i.genericity.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))})),s[keySymbol$d]={},s}return _createClass(d,[{key:"freeze",value:function(){_get(_getPrototypeOf(d.prototype),"freeze",this).call(this),_get(_getPrototypeOf(d.prototype),"freeze",this).call(this,this.arguments),_get(_getPrototypeOf(d.prototype),"freeze",this).call(this,this.genericity),this.callee.freeze(),this.arguments.forEach(function(e){return e.freeze()}),(this.genericity||[]).forEach(function(e){return e.freeze()})}},{key:"definition",value:function(t){var e=this.description();if(e){var i=(t=this.getContext(t)).apply(e.type());if(i.methodConstructor)return i.methodConstructor.definition(t);var n,r,s,a=this.compilation.getStackByModule(i);if(a)return s=n=i.getName(),(r=i.getModuleGenerics())&&(s=[n,"<",r.map(function(e){return t.inference(e,!0)}).join(", "),">"].join("")),{kind:"constructor",comments:e.comments,identifier:a.id.value(),expre:"(constructor) ".concat(i.toString(t),"(): ").concat(s),location:a.id.getLocation(),file:a.file,context:a}}return null}},{key:"getContext",value:function(e){e=_get(_getPrototypeOf(d.prototype),"getContext",this).call(this,e);return e.scope="new",e.task.push(function(e){return e=(e=e.isClassType?e.types[0].inherit:e).isClassGenericType?e.inherit:e}),e}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"description",value:function(){var e=this.callee.description();return e?(Utils.isTypeModule(e)&&this.compilation.addDependency(e,this.module),e.isDeclarator&&e instanceof Stack_1?e.description():e):null}},{key:"type",value:function(t){var e,i=this[keySymbol$d]._type;return i||((i=this.description())?(i.isClassType&&(i.types[0],_readOnlyError("description")),i.isClassGenericType&&(i.inherit,_readOnlyError("description")),t=this.getContext(t),Utils.isTypeModule(e=i)&&(i=i.getConstructMethod())&&(e=i.type({called:!0})),i=t.apply(e.type()),Utils.isTypeModule(i)?(e=i.getModuleGenerics()||[],this[keySymbol$d]._type=new InstanceofType_1(i,this,e.map(function(e){return t.inference(e)}))):this[keySymbol$d]._type=i):this.getGlobalTypeById("never"))}},{key:"getGenericTypes",value:function(){var i=this;if(this[keySymbol$d]._relatedGenericTypes)return this[keySymbol$d]._relatedGenericTypes;var n=this[keySymbol$d]._relatedGenericTypes=new Map,e=this.description().type(),r=((e=e.isClassType?e.types[0]:e).isClassGenericType&&(e=e.inherit),!Utils.isTypeModule(e)||(u=e.getConstructMethod())&&(e=u.type({called:!0})),Utils.getOriginType(e));if(!r||!r.isModule)return null;var s,a,o,t,c,l,u=this.compilation.getStackByModule(r),e=(u&&(e=u.getGenericTypes())&&e.forEach(function(e,t){n.set(t,e)}),r.getModuleGenerics());return this.genericity?(s=this.genericity,e.forEach(function(e,t){e=e.type();s[t]&&n.set(e,s[t].type())})):(e=(e=r.getConstructMethod())&&e.params||[],a=new WeakSet,o=this.arguments.length-1,t=this.arguments[o],c=t&&t.isSpreadElement?t:null,l=c&&c.type(),e&&e.forEach(function(e,t){i.arguments[t],c&&o<=t&&(l.isTupleType&&!l.prefix||l.isLiteralArrayType)&&l.elements[t-o],"Map"===r.id&&console.log(e.type().toString(),i.arguments[t].type().toString()),i.tryAssignGenericTypeValue(e,i.arguments[t],n,a)})),n}},{key:"parser",value:function(){var n=this;if(!1===_get(_getPrototypeOf(d.prototype),"parser",this).call(this))return!1;this.callee.parser(),this.callee.setRefBeUsed(),this.arguments.forEach(function(e){e.parser(),e.setRefBeUsed()});var e=this.description();if(!e)return!0;e=e.type();if(e.isAnyType)return!0;if(!(e=(e=e.isClassType?e.types[0]:e).isClassGenericType?e.inherit:e).isModule||!e.isClass)return this.callee.error(1069,this.callee.value()),!0;e.abstract&&this.callee.error(1070,this.callee.value());var r,s,a,o,c,l,u,p,t,i,h=this.getContext(),f=e.getConstructMethod(!0),e=this.compilation.getStackByModule(e),y=e&&e.genericity?e.genericity.elements:[];return this.genericity&&(e=this.genericity[this.genericity.length-1],y.length<1&&e.error(1004,0,this.genericity.length),(t=y.filter(function(e){return!e.isGenericTypeAssignmentDeclaration})).length>this.genericity.length&&(t.length===y.length?e.error(1004,t.length,this.genericity.length):e.error(1005,t.length,y.length,this.genericity.length)),this.genericity.forEach(function(e,t){e.parser();t=y[t]&&y[t].type();t&&t.hasConstraint&&!t.check(e,h)&&e.error(1003,n.getTypeDisplayName(e.type(),h),n.getTypeDisplayName(t.inherit,h))})),f&&(r=f.params||[],e=(s=r).length,a=t=!1,0<e&&(o=r[e-1].isRestElement?r[e-1]:null,c=this.arguments.filter(function(e,t){return e.isSpreadElement?(a=!0,n.arguments[n.arguments.length-1]!==e&&e.error(1084),!1):(r[t]&&r[t]!==o&&(i=(i=s[t])&&i.type(),t=r[t],n.checkArgumentItemType(e,t,i,h)),!0);var i}),a&&(l=this.arguments.length-1,u=restType?e-1:1e3,(f=(p=this.arguments[l]).type()).isTupleType&&!f.prefix||f.isLiteralArrayType?f.elements.forEach(function(e,t){var i,t=l+t;t<u&&(i=(i=s[t])&&i.type(),t=r[t],n.checkArgumentItemType(e.type(),t,i,h,p)),c.push(e)}):p.error(1154)),o&&(t=!0,i=o.type(),f=c.slice(e-1),i.checkItems(f,f=[],h)||f.forEach(function(e){(e.isStack?e:n.arguments[n.arguments.length-1]).error(1002,n.getTypeDisplayName(e.type()),n.getTypeDisplayName(i))})),r.every(function(e,t){return!!(e.isAssignmentPattern||e.isRestElement||e.question)||!!c[t]})||this.callee.error(1e3,r.length,c.length)),!t&&this.arguments.length>e&&this.callee.error(1e3,r.length,this.arguments.length)),!0}}]),d}(),NewExpression_1=NewExpression,keySymbol$c=Symbol("key"),ObjectExpression=function(){_inherits(o,Expression_1);var a=_createSuper(o);function o(i,n,r,e,t){var s;return _classCallCheck(this,o),(s=a.call(this,i,n,r,e,t)).isObjectExpression=!0,s.attributes=new Map,s.hasChildComputed=!1,s.properties=n.properties.map(function(e){var e=s.createTokenStack(i,e,r,n,_assertThisInitialized(s)),t=e.value();return s.attributes.has(t)?e.error(1045,t):s.attributes.set(e.value(),e),s.hasChildComputed=s.hasChildComputed||e.computed,e}),s[keySymbol$c]={},s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.properties),(this.properties||[]).forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){var e=this.parentStack.isProperty&&this.parentStack.parentStack.isObjectExpression?this.parentStack:this;return{kind:"object",comments:e.comments,identifier:e.value(),expre:this.type().toString(),location:e.getLocation(),file:e.compilation.file,context:e}}},{key:"attribute",value:function(e,t){return void 0!==t?(this.attributes.set(e,t),t):this.attributes.get(e)||null}},{key:"hasAttribute",value:function(e){return this.attributes.has(e)}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"description",value:function(){return this}},{key:"type",value:function(){return this[keySymbol$c]._type||(this[keySymbol$c]._type=new LiteralObjectType_1(this.getGlobalTypeById("object"),this))}},{key:"parser",value:function(){this.properties.forEach(function(e){e.parser()})}},{key:"value",value:function(){return"{".concat(this.properties.map(function(e){return e.value()}).join(", "),"}")}}]),o}(),ObjectExpression_1=ObjectExpression,ObjectPattern=function(){_inherits(c,Stack_1);var t=_createSuper(c);function c(n,r,s,e,a){var o;return _classCallCheck(this,c),(o=t.call(this,n,r,s,e,a)).isObjectPattern=!0,o.properties=r.properties.map(function(e){var t,i,e=o.createTokenStack(n,e,s,r,_assertThisInitialized(o));return!e.isProperty||e.init&&e.init.isAssignmentPattern||(t="var"===a.parentStack.kind?"function":"block",i=e.key.value(),s.isDefine(i,t)&&o.error(1007,i),s.define(i,e)),e}),r.acceptType&&o.compilation.error(r.acceptType,1151),o}return _createClass(c,[{key:"freeze",value:function(){_get(_getPrototypeOf(c.prototype),"freeze",this).call(this),_get(_getPrototypeOf(c.prototype),"freeze",this).call(this,this.properties),(this.properties||[]).forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"setKind",value:function(t){this.properties.forEach(function(e){e.kind=t})}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(c.prototype),"parser",this).call(this))return!1;var e,t,i=this.parentStack.init;return i?(e=i.type(),((t=this.getGlobalTypeById("Object"))&&!t.check(e)||e.isNullableType)&&i.error(1074,i.raw())):(t=this.parentStack&&this.parentStack.parentStack)&&(t.isMethodDefinition||t.isFunctionExpression)||i.error(1081),this.properties.forEach(function(e){return e.parser()}),!0}},{key:"value",value:function(){return this.properties.map(function(e){return e.value()}).join(",")}}]),c}(),ObjectPattern_1=ObjectPattern,PackageDeclaration=function(){_inherits(p,Stack_1);var i=_createSuper(p);function p(n,r,s,e,t){_classCallCheck(this,p),(a=i.call(this,n,r,s,e,t)).isPackageDeclaration=!0,a._metatypes=[],a._annotations=[],a.id=a.createTokenStack(n,r.id,s,r,_assertThisInitialized(a)),a.namespace=n.namespace=Namespace_1.create(a.id?a.id.value():null),a.compilation.namespaceSets.add(a.namespace);var a,o=[],c=[],l=[],u=(a.body=[],t.externals||[]);return r.body.forEach(function(e,t){var i,e=a.createTokenStack(n,e,s,r,_assertThisInitialized(a));e.isMetatypeDeclaration?o.push(e):e.isAnnotationDeclaration?(i=a.interceptAnnotation(e))&&c.push(i):e.isImportDeclaration?(l.push(e),a.body.push(e)):(e.metatypes=o.splice(0,o.length),e.annotations=c.splice(0,c.length),e.isClassDeclaration||e.isDeclaratorDeclaration||e.isEnumDeclaration||e.isInterfaceDeclaration?(0<u.length&&u[0].error(1091),e.imports=l.splice(0,l.length),a.body.push(e)):e.isDeclaratorVariable||e.isDeclaratorFunction||e.isDeclaratorTypeAlias?(0<u.length&&u[0].error(1091),a.body.push(e)):u.push(e))}),t.externals=l.concat(u),a}return _createClass(p,[{key:"metatypes",get:function(){return this._metatypes},set:function(e){var t=this;e.forEach(function(e){e.additional=t}),this._metatypes=e}},{key:"annotations",get:function(){return this._annotations},set:function(e){var t=this;e.some(function(e){e.additional=t}),this._annotations=e}},{key:"freeze",value:function(){_get(_getPrototypeOf(p.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(p.prototype),"freeze",this).call(this,this.id),_get(_getPrototypeOf(p.prototype),"freeze",this).call(this,this.body),this.body.forEach(function(e){return e.freeze()})}},{key:"createCompleted",value:function(){this.body.forEach(function(e){e.createCompleted()})}},{key:"checkDepend",value:function(t,e){var i=this;return e.extends.concat(e.implements).some(function(e){return e===t||i.checkDepend(t,e)})}},{key:"definition",value:function(){return null}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(p.prototype),"parser",this).call(this)&&(this.metatypes.forEach(function(e){e.parser()}),this.annotations.forEach(function(e){e.parser()}),this.body.forEach(function(e){e.parser()}),!0)}}]),p}(),PackageDeclaration_1=PackageDeclaration,ParenthesizedExpression=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isParenthesizedExpression=!0,n.expression=n.createTokenStack(e,t.expression,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.expression.freeze()}},{key:"definition",value:function(e){return this.expression.definition(e)}},{key:"reference",value:function(){return this.expression.reference()}},{key:"referenceItems",value:function(){return this.expression.referenceItems()}},{key:"type",value:function(e){return this.expression.type(e)}},{key:"description",value:function(){return this.expression.description()}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.expression?(this.expression.setRefBeUsed(),this.expression.parser()):this.error(1079),!0)}},{key:"value",value:function(){return this.expression.value()}},{key:"raw",value:function(){return this.expression.raw()}}]),a}(),ParenthesizedExpression_1=ParenthesizedExpression,Program=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){_classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isProgram=!0,e.externals=[],e.namespace=Namespace_1.dataset,e.compilation.namespaceSets.add(e.namespace),e.body=[],e.isJSXProgram=!1;i=t.body[0];return i&&"ExpressionStatement"===i.type&&"JSXElement"===i.expression.type?(e.compilation.JSX=!0,e.isJSXProgram=!0,e.createJsx(t.body)):e.create(t.body),e}return _createClass(a,[{key:"createJsx",value:function(e){var i=this,t=this.compilation.originId,t=t?t.split("."):null,n=null;t?(n=t.pop(),this.namespace=Namespace_1.create(t.join("."))):(n=this.compiler.getFileClassName(this.file),this.namespace=Namespace_1.create(this.compiler.getFileNamespace(this.file))),this.module=this.compilation.createModule(this.namespace,n),this.module.isClass=!0,this.module.isLocalModule=!0,this.module.jsxDeclaredSlots=new Map,this.scope=new ClassScope_1(this.scope),this.compilation.addModuleStack(this.module,this),e.forEach(function(e){var t;"ExpressionStatement"===e.type?(t=i.createTokenStack(i.compilation,e.expression,i.scope,i.node,i))&&t.jsxElement&&i.body.push(t):i.compilation.error(e,1110)}),1!=this.body.length&&this.error(1123)}},{key:"create",value:function(e){var i=this,n=[],r=[],s=[];e.forEach(function(e){var t,e=i.createTokenStack(i.compilation,e,i.scope,i.node,i);e&&(e.isMetatypeDeclaration?r.push(e):e.isAnnotationDeclaration?(t=i.interceptAnnotation(e))&&n.push(t):e.isImportDeclaration?s.push(e):e.isPackageDeclaration||e.isClassDeclaration||e.isDeclaratorDeclaration||e.isEnumDeclaration||e.isInterfaceDeclaration||e.isDeclaratorVariable||e.isDeclaratorFunction||e.isDeclaratorTypeAlias?(e.annotations=n.splice(0,n.length),e.metatypes=r.splice(0,r.length),e.imports=s.splice(0,s.length),0<e.imports.length&&!(e.isClassDeclaration||e.isEnumDeclaration||e.isInterfaceDeclaration)&&e.imports.forEach(function(e){return e.error(1094)}),i.body.push(e)):(s.splice(0,s.length).forEach(function(e){return i.externals.push(e)}),i.externals.push(e)))}),this.annotations=n.splice(0,n.length),this.annotations.forEach(function(e){e.additional=i}),this.metatypes=r.splice(0,r.length),this.metatypes.forEach(function(e){e.additional=i})}},{key:"createCompleted",value:function(){var i=this;this._createCompletedFlag||(this._createCompletedFlag=!0,this.body.forEach(function(e){e.createCompleted()}),this.externals.forEach(function(e){var t;!e.isImportDeclaration||(t=i.compilation.getModuleById(e.value()))&&t.isModule||e.error(1026,e.value())}))}},{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.scope),_get(_getPrototypeOf(a.prototype),"freeze",this).call(this,this.body),this.body.forEach(function(e){return e.freeze()}),this.externals.forEach(function(e){return e.freeze()})}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.annotations&&this.annotations.forEach(function(e){return e.parser()}),this.metatypes&&this.metatypes.forEach(function(e){return e.parser()}),this.body.forEach(function(e){e.parser()}),this.externals.forEach(function(e){e.isImportDeclaration||e.parser()}),!0)}}]),a}(),Program_1=Program,PropertyDefinition=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isPropertyDefinition=!0,s._metatypes=[],s._annotations=[],s.kind=i.kind,s.isReadonly="const"===s.kind,s.modifier=s.createTokenStack(t,i.modifier,n,i,_assertThisInitialized(s)),s.static=s.createTokenStack(t,i.static,n,i,_assertThisInitialized(s)),s.declarations=i.declarations.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s.isFinal=!1,s.isProperty=!0,s.declarations[0].dynamic?s.module.dynamic=!0:s.module.addMember(s.declarations[0].id.value(),_assertThisInitialized(s)),s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.declarations),this.modifier&&this.modifier.freeze(),this.static&&this.static.freeze(),this.declarations.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(e){var t=this.value(),i=this.modifier?this.modifier.value():"public",n=this.static?"static ":"",e=this.declarations[0].definition(e);return{kind:"property",comments:this.comments,identifier:t,expre:"(property) ".concat(n).concat(i," ").concat(e.expre),location:this.declarations[0].getLocation(),file:this.compilation.file,context:this}}},{key:"metatypes",get:function(){return this._metatypes},set:function(e){var t=this;e.forEach(function(e){e.additional=t}),this._metatypes=e}},{key:"annotations",get:function(){return this._annotations},set:function(e){var t=this;e.forEach(function(e){e.additional=t}),this.isFinal=e.some(function(e){return"final"===e.name.toLowerCase()}),this._annotations=e}},{key:"init",get:function(){return this.declarations[0].init}},{key:"dynamic",get:function(){return!!this.declarations[0].dynamic}},{key:"question",get:function(){return!!this.declarations[0].id.node.question}},{key:"id",get:function(){return this.declarations[0].id}},{key:"acceptType",get:function(){return this.declarations[0].acceptType}},{key:"assignItems",get:function(){return this.declarations[0].assignItems}},{key:"useRefItems",get:function(){return this.declarations[0].useRefItems}},{key:"addUseRef",value:function(e){this.useRefItems.add(e)}},{key:"assignment",value:function(e){this.declarations[0].assignment(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)}},{key:"reference",value:function(){return this.declarations[0].reference()}},{key:"referenceItems",value:function(){return this.declarations[0].referenceItems()}},{key:"description",value:function(){return this.declarations[0].description()}},{key:"type",value:function(e){return this.declarations[0].type(e)}},{key:"parser",value:function(){var t,e,i=this;return!!_get(_getPrototypeOf(o.prototype),"parser",this).call(this)&&(this._annotations&&this._annotations.forEach(function(e){return e.parser()}),this._metatypes&&this._metatypes.forEach(function(e){return e.parser()}),this.declarations[0].parser(),this.dynamic?(t=this.acceptType?this.acceptType.type():this.getGlobalTypeById("string"),["string","number"].some(function(e){return t.check(i.getGlobalTypeById(e))})?this.module.dynamicProperties.set(Utils.getOriginType(t),this.init.type()):this.acceptType.error(1139,this.id.value())):(e=this.module&&this.module.extends[0])&&"private"!==(this.modifier?this.modifier.value():"public")&&((e=e.getMember(this.id.value()))&&e.modifier&&"private"!==e.modifier.value()&&(e.isPropertyDefinition||this.id.error(1082,this.value())),e&&e.isFinal&&this.id.error(1149,this.id.value())),!0)}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.declarations[0]).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.declarations[0]).warn.apply(t,[e].concat(n))}},{key:"value",value:function(){return this.declarations[0].value()}},{key:"raw",value:function(){return this.declarations[0].raw()}}]),o}(),PropertyDefinition_1=PropertyDefinition,RestElement=function(){_inherits(a,Declarator_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t.argument,i,n,r)).isRestElement=!0,i.define(e.value(),_assertThisInitialized(e)),e}return _createClass(a,[{key:"definition",value:function(){var e=this.type().toString(),t=this.value(),i=this.parentStack.isFunctionExpression?"(parameter)":this.kind;return{kind:i,comments:this.comments,identifier:t,expre:"".concat(i," ...").concat(t,":").concat(e),location:this.getLocation(),file:this.compilation.file,context:this}}},{key:"type",value:function(e){return this._type||((e=this.acceptType?this.acceptType.type(e):this.getGlobalTypeById("any")).isTupleType?this._type=e:this._type=new TupleType_1(this.getModuleById("Array"),e,this,!0))}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.acceptType&&(this.acceptType.parser(),this.acceptType.type().isTupleType||this.error(1071)),!0)}}]),a}(),RestElement_1=RestElement,ReturnStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){_classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isReturnStatement=!0,n.argument=n.createTokenStack(e,t.argument,i,t,_assertThisInitialized(n));r=i.getScopeByType("function");return n.returnIndex=r.returnItems.length,n.argument&&r.returnItems.push(_assertThisInitialized(n)),n.fnScope=r,n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.argument&&this.argument.freeze()}},{key:"definition",value:function(){return null}},{key:"reference",value:function(){return this.argument?this.argument.reference():null}},{key:"referenceItems",value:function(){return this.argument?this.argument.referenceItems():[]}},{key:"description",value:function(){return this.argument?this.argument.description():null}},{key:"type",value:function(e){return this.argument?this.argument.type(e):this.getGlobalTypeById("void")}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;if(this.argument){this.argument.parser(),this.argument.setRefBeUsed();var e=this.getParentStack(function(e){return!!e.isFunctionExpression});if(!e||!e.isFunctionExpression)return this.error(1072);if(e.async)return;if(this.argument){var t=this.argument.type();if(t&&t.isNullableType)return;t=e&&e.returnType;t&&this.checkExpressionType(t,this.argument)}}return!0}},{key:"value",value:function(){return this.argument?this.argument.value():""}},{key:"raw",value:function(){return this.argument?this.argument.raw():""}}]),a}(),ReturnStatement_1=ReturnStatement,SequenceExpression=function(){_inherits(o,Expression_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isSequenceExpression=!0,s.expressions=i.expressions.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.expressions),(this.expressions||[]).forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return 0<this.expressions.length?this.expressions[this.expressions.length-1]:this}},{key:"reference",value:function(){var e=this.description();return e!==this?e.reference():this}},{key:"referenceItems",value:function(){var e=this.description();return e!==this?e.referenceItems():[this]}},{key:"type",value:function(e){return 0<this.expressions.length&&this.expressions[this.expressions.length-1].type(e)}},{key:"parser",value:function(){this.expressions.forEach(function(e){e.parser(),e.setRefBeUsed()})}}]),o}(),SequenceExpression_1=SequenceExpression,SpreadElement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isSpreadElement=!0,n.argument=n.createTokenStack(e,t.argument,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.argument.freeze()}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return this.argument.description()}},{key:"reference",value:function(){return this.argument.reference()}},{key:"referenceItems",value:function(){return this.argument.referenceItems()}},{key:"key",value:function(){return this.argument.key()}},{key:"type",value:function(e){return this.argument.type(e)}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;this.argument.parser(),this.argument.setRefBeUsed();var e,t,i=this.type();return this.parentStack.isArrayExpression?(e=this.getGlobalTypeById("array"),t=this.getGlobalTypeById("Iterator"),e.is(i)||i.is(t)||this.error(1073,this.argument.value())):this.parentStack.isObjectExpression&&!this.getGlobalTypeById("object").is(i)&&this.error(1074,this.argument.value()),!0}},{key:"value",value:function(){return this.argument.value()}},{key:"raw",value:function(){return this.argument.raw()}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.argument).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){var t;(t=this.argument).error.apply(t,[code].concat(_toConsumableArray(args)))}}]),a}(),SpreadElement_1=SpreadElement,SuperExpression=function(){_inherits(a,Expression_1);var s=_createSuper(a);function a(e,t,i,n,r){_classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isSuperExpression=!0;t=i.getScopeByType("function");return t.isMethod&&t.isConstructor&&!t.hasSuper&&(t.firstSuperIndex=r.childrenStack.length,t.hasSuper=!0),e}return _createClass(a,[{key:"definition",value:function(e){if(this.parentStack.isCallExpression)return this.parentStack.definition(e);var t=this.module.extends[0];return t&&t.definition(e)}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"description",value:function(){var e;return this.parentStack.isMemberExpression?this:(e=this.module.extends[0])&&e.getConstructMethod()||{params:[],callable:!0,isConstructor:!0,stack:this,description:function(){return this},type:function(){return e}}}},{key:"getGenericTypes",value:function(){if(void 0!==this.__relatedGenericTypes)return this.__relatedGenericTypes;var i,n,e=this.module.extends[0];return this.__relatedGenericTypes=null,e&&(e=e.getModuleGenerics(),i=new Map,e&&(n=this.compilation.getStackByModule(this.module).inherit.assignGenerics)&&e.forEach(function(e,t){t=n[t];t&&i.set(e.type(),t.type())}),this.__relatedGenericTypes=i),this.__relatedGenericTypes}},{key:"type",value:function(){var e=this.module.extends[0];return e||this.getGlobalTypeById("never")}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;var e=this.getParentStack(function(e){return!!e.isFunctionExpression});return e&&e.parentStack.isMethodDefinition&&!e.parentStack.static||this.error(1076),this.module&&this.module.extends[0]||this.error(1075),!0}},{key:"value",value:function(){return"super"}},{key:"raw",value:function(){return"super"}}]),a}(),SuperExpression_1=SuperExpression,SwitchCase=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isSwitchCase=!0,s.condition=s.createTokenStack(t,i.test,n,i,_assertThisInitialized(s)),s.consequent=i.consequent.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.consequent),this.condition.freeze(),this.consequent.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"parser",value:function(){this.condition.parser(),this.condition.setRefBeUsed(),this.consequent.forEach(function(e){return e.parser()})}}]),o}(),SwitchCase_1=SwitchCase,SwitchStatement=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isSwitchStatement=!0,s.condition=s.createTokenStack(t,i.discriminant,n,i,_assertThisInitialized(s)),n=new BlockScope_1(n),s.cases=i.cases.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.cases),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.scope),this.condition.freeze(),this.cases.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"parser",value:function(){this.condition.parser(),this.condition.setRefBeUsed(),this.cases.forEach(function(e){return e.parser()})}}]),o}(),SwitchStatement_1=SwitchStatement,TemplateElement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isTemplateElement=!0,e}return _createClass(a,[{key:"definition",value:function(){return null}},{key:"reference",value:function(){return this}},{key:"description",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(){return this.getGlobalTypeById("string")}},{key:"value",value:function(){return this.node.value.cooked}},{key:"raw",value:function(){return this.node.value.raw}}]),a}(),TemplateElement_1=TemplateElement,TemplateLiteral=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).expressions=i.expressions.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s.quasis=i.quasis.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s.isTemplateLiteral=!0,s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.quasis),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.expressions),this.quasis.forEach(function(e){return e.freeze()}),this.expressions.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"reference",value:function(){return this}},{key:"description",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(){return this.getModuleById("string")}},{key:"value",value:function(){return this.node.raw}},{key:"raw",value:function(){return this.node.raw}},{key:"parser",value:function(){this.expressions.forEach(function(e){e.parser(),e.setRefBeUsed()})}}]),o}(),TemplateLiteral_1=TemplateLiteral,ThisExpression=function(){_inherits(a,Expression_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isThisExpression=!0,e}return _createClass(a,[{key:"definition",value:function(){var e=this.value();return{kind:"this",identifier:e,expre:"this: this",location:this.getLocation(),file:this.compilation.file,context:this}}},{key:"reference",value:function(){return this}},{key:"description",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(){return this.scope.define(this.value())}},{key:"value",value:function(){return"this"}},{key:"raw",value:function(){return"this"}},{key:"parser",value:function(){this.type()||this.error(1013,this.raw())}}]),a}(),ThisExpression_1=ThisExpression,ThrowStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isThrowStatement=!0,n.argument=n.createTokenStack(e,t.argument,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.argument.freeze()}},{key:"definition",value:function(){return null}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.argument).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.argument).warn.apply(t,[e].concat(n))}},{key:"reference",value:function(){return null}},{key:"referenceItems",value:function(){return[]}},{key:"description",value:function(){return null}},{key:"parser",value:function(){this.argument.parser()}},{key:"value",value:function(){return this.argument.value()}},{key:"raw",value:function(){return this.argument.raw()}}]),a}(),ThrowStatement_1=ThrowStatement,TryStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isTryStatement=!0,n.param=new Declarator_1(e,t.handler.param,i,t,_assertThisInitialized(n)),n.handler=n.createTokenStack(e,t.handler.body,i,t,_assertThisInitialized(n)),n.block=n.createTokenStack(e,t.block,i,t,_assertThisInitialized(n)),i.define(n.param.value(),n.param),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.param.freeze(),this.handler.freeze(),this.block.freeze()}},{key:"definition",value:function(){return null}},{key:"parser",value:function(){this.param.parser(),this.handler.parser(),this.block.parser()}}]),a}(),TryStatement_1=TryStatement,TypeAssertExpression=function(){_inherits(a,Expression_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isTypeAssertExpression=!0,n.left=n.createTokenStack(e,t.left,i,t,_assertThisInitialized(n)),n.right=n.createTokenStack(e,t.right,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.left.freeze(),this.right.freeze()}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return this}},{key:"reference",value:function(){return this.left.reference()}},{key:"referenceItems",value:function(){return this.left.referenceItems()}},{key:"type",value:function(e){return this.right.type(e)}},{key:"parser",value:function(){this.left.parser(),this.right.parser()}}]),a}(),TypeAssertExpression_1=TypeAssertExpression,keySymbol$b=Symbol("key"),TypeComputeDefinition=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isTypeComputeDefinition=!0,n.object=n.createTokenStack(e,t.object,i,t,_assertThisInitialized(n)),n.property=n.createTokenStack(e,t.property,i,t,_assertThisInitialized(n)),n[keySymbol$b]={},n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.object.freeze(),this.property.freeze()}},{key:"definition",value:function(){var e=this.type();return{kind:this.kind,comments:this.comments,expre:"(type) ".concat(e.toString()),location:(this.prefix||this).getLocation(),file:this.compilation.file,context:this}}},{key:"description",value:function(){return this}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(e){return this[keySymbol$b]._type||(this[keySymbol$b]._type=new ComputeType_1(this,this.object.type(),this.property)),this[keySymbol$b]._type.type()}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.object.parser(),this.property.parser(),!0)}}]),a}(),TypeComputeDefinition_1=TypeComputeDefinition,keySymbol$a=Symbol("key"),TypeDefinition=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isTypeDefinition=!0,n.valueType=n.createTokenStack(e,t.value,i,t,_assertThisInitialized(n)),n.isThisType="this"===n.valueType.value(),n[keySymbol$a]=_assertThisInitialized(n),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.valueType.freeze()}},{key:"definition",value:function(e){var t=this.type(),i=this.valueType.value(),n=this.parentStack;if(n.isTypeTupleDefinition||n.isTypeTupleRestDefinition||n.isTypeTupleUnionDefinition||n.isTypeGenericDefinition)return n.definition(e);if(!t)return null;n=this.valueType.description();return{kind:this.kind,comments:this.comments,identifier:i,expre:"(type) ".concat(t.toString()),location:n.getLocation(),file:n.file,context:n}}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.valueType).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.valueType).warn.apply(t,[e].concat(n))}},{key:"description",value:function(){return this}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(e){var t;if(!(t=this[keySymbol$a]._type)){var i=this.valueType.value();if(this.valueType.isLiteral)((t=this.valueType.type()).target=this)[keySymbol$a]._type=t;else{if(this.isThisType)t=new InstanceofType_1(this.module,this,null,!0);else{if(t=this.scope.define(i),this.checkCircular(t))return this.getGlobalTypeById("never");t=t&&(t.isGenericTypeDeclaration||t.isGenericTypeAssignmentDeclaration||t.isTypeStatement||t.isEnumDeclaration&&t.isExpressionDeclare)?t.type():null}t=t||this.getModuleById(i),this[keySymbol$a]._type=t}}return t}},{key:"checkCircular",value:function(t){var i=this;return void 0!==this.checkedCircular||(this.checkedCircular=!1,t&&this.getParentStack(function(e){return!(e.isTypeGenericDefinition||e.isGenericTypeDeclaration||e.isTypeDefinition||e.isTypeStatement)||(e===t&&(i.checkedCircular=!0,i.valueType.error(1141,i.value())),!1)})),this.checkedCircular}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;var e,t=this.valueType.description();return!t&&this.isThisType&&(t=this.type()),this.checkCircular(t)||(t?this.parentStack.isTypeGenericDefinition||this.parentStack.isDeclaratorTypeAlias||((t=t.type())&&t instanceof Type_1?(t.isModule&&(e=this.compilation.getStackByModule(t))&&e.genericity&&e.genericity.isGenericDeclaration&&0<(e=e.genericity.elements.filter(function(e){return!e.isGenericTypeAssignmentDeclaration}).length)&&this.valueType.error(1030,t.toString(),e),this.module&&(t=Utils.getOriginType(t),Utils.isTypeModule(t)&&this.compilation.addDependency(t,this.module))):this.valueType.error(1083,this.value())):this.valueType.error(1083,this.valueType.value())),!0}},{key:"value",value:function(){return this.valueType.value()}},{key:"raw",value:function(){return this.valueType.raw()}}]),a}(),TypeDefinition_1=TypeDefinition,keySymbol$9=Symbol("key"),TypeFunctionDefinition=function(){_inherits(l,Stack_1);var c=_createSuper(l);function l(i,n,r,e,t){_classCallCheck(this,l),(s=c.call(this,i,n,r,e,t)).scope=r=new FunctionScope_1(r),s.isTypeFunctionDefinition=!0,s._returnType=s.createTokenStack(i,n.value,r,n,_assertThisInitialized(s));var s,a=null,o=null;return s.params=n.params.map(function(e){var t;return"Identifier"==e.type?(t=new Declarator_1(i,e,r,n,_assertThisInitialized(s)),a&&a.error(1050,a.value()),r.define(t.value(),t),t):((t=s.createTokenStack(i,e,r,n,_assertThisInitialized(s))).isRestElement&&(o=t),a=t)}),o&&s.params[s.params.length-1]!==o&&o.error(1051,o.value()),s[keySymbol$9]={},s}return _createClass(l,[{key:"freeze",value:function(){_get(_getPrototypeOf(l.prototype),"freeze",this).call(this),_get(_getPrototypeOf(l.prototype),"freeze",this).call(this,this.params),this.returnType&&this.returnType.freeze(),this.params.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(e){return null}},{key:"description",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(){return this.getFunType()}},{key:"returnType",get:function(){return this._type||(this._type=this._returnType?this.normalization(this._returnType.type()):this.getGlobalTypeById("void"))}},{key:"normalization",value:function(e){if(e&&e.isUnionType){if(e.elements.some(function(e){return e.type().isAnyType}))return this.getGlobalTypeById("any");var t=e.elements.filter(function(e){return!e.type().isNullableType});if(1===t.length)return e.elements[0].type();if(!t.length)return e.elements[0];if(t.length!==e.elements.length)return new UnionType(t,e.target)}return e}},{key:"getReturnedType",value:function(){return this.returnType}},{key:"getFunType",value:function(){return this[keySymbol$9]._funType||(this[keySymbol$9]._funType=new FunctionType_1(this.getGlobalTypeById("Function"),this))}},{key:"parser",value:function(){return!!_get(_getPrototypeOf(l.prototype),"parser",this).call(this)&&(this.params.forEach(function(e){return e.parser()}),this._returnType&&(this._returnType.parser(),this._returnType.type()||this.returnType.error(1083,this._returnType.value())),!0)}}]),l}(),TypeFunctionDefinition_1=TypeFunctionDefinition,ClassGenericType=function(){_inherits(s,Type_1);var r=_createSuper(s);function s(e,t,i,n){return _classCallCheck(this,s),(t=r.call(this,"$ClassGenericType",t)).isClassGenericType=!0,t.isClassType=!!i,t.types=e,t.target=n,t.isThisType=!(!n||!n.isThisType),t.hasGenericType=e.some(function(e){return e&&!(!e.isGenericType&&!e.hasGenericType)}),t}return _createClass(s,[{key:"getGenericTypes",value:function(){return this.target.getGenericTypes()}},{key:"clone",value:function(t){return t?new s(this.types.map(function(e){return e.clone(t)}),this.inherit,this.isClassType,this.target):this}},{key:"is",value:function(i,n){if(!(i&&i instanceof Type_1))return!1;if(!this.isNeedCheckType(i))return!0;if(this.isClassType&&(i.isInstanceofType||!i.isClassType&&Utils.isWrapType(i)||i.isInterface))return!1;var e=i;if(i.isClassGenericType)e=(i.isClassType?i.types[0]:i).inherit;else if(i.isInstanceofType){if(e=i.inherit,!i.target||!i.target.isNewExpression||!this.inherit.is(e))return!1;var r=Utils.isClassType(e)&&e.getModuleGenerics()||[],s=i.target.getGenericTypes();return this.types.every(function(e,t){var i=r[t];return!!i&&((t=s&&s.get(r[t]))?e.type().is(t,n):i.assignType?e.type().is(i.assignType,n):e.type().is(i,n))})}return this.isClassType?(e.isEnumType||e.isModule&&(e.isClass||e.isEnum))&&this.types[0].type().is(e):this.inherit===e?!i.isClassGenericType||this.types.every(function(e,t){return e===i.types[t]}):this.inherit.type().is(i,n)}},{key:"toString",value:function(t){var e=this.types.map(function(e){return e.toString(t)});return this.target?"".concat(this.target.value(),"<").concat(e.join(", "),">"):this.extends[0].toString(t)}}]),s}(),ClassGenericType_1=ClassGenericType,keySymbol$8=Symbol("key"),TypeGenericDefinition=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isTypeGenericDefinition=!0,s.valueType=s.createTokenStack(t,i.value,n,i,_assertThisInitialized(s)),s.elements=i.typeElements.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s.isThisType=s.valueType&&"this"===s.valueType.value(),s[keySymbol$8]={},s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.elements),this.valueType.freeze(),this.elements.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){var e=this.type(),t=this.valueType.value();return e?{kind:this.kind,comments:this.comments,identifier:t,expre:"(type) ".concat(e.toString(!0)),location:this.valueType.getLocation(),file:this.compilation.file,context:this}:null}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.valueType).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.valueType).warn.apply(t,[e].concat(n))}},{key:"description",value:function(){return this}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(e){var t,i,n;return(t=this[keySymbol$8]._type)||(i=this.valueType.value(),(i=this.isThisType?this.module:this.getModuleById(i)||this.scope.define(i))&&(t=i.type())&&(n=t===(i=this.getGlobalTypeById("Class"))||t.extends&&t.extends[0]===i,this[keySymbol$8]._type=t=new ClassGenericType_1(this.elements.map(function(e){return e.type()}),n?i:t,n,this))),t||this.getGlobalTypeById("never")}},{key:"getGenericTypes",value:function(){if(this[keySymbol$8]._relatedGenericTypes)return this[keySymbol$8]._relatedGenericTypes;var e=this.type(),t=e&&e.extends[0];if(!t||!t.isModule)return null;var t=t.getModuleGenerics(),i=this[keySymbol$8]._relatedGenericTypes=new Map,n=e.types;return t&&t.forEach(function(e,t){e=e.type();n[t]?i.set(e,n[t].type()):e.assignType&&i.set(e,e.assignType)}),i}},{key:"parser",value:function(){var i=this;if(!_get(_getPrototypeOf(o.prototype),"parser",this).call(this))return!1;var n,e,t=this.value(),t=this.isThisType?this.module:this.getModuleById(t)||this.scope.define(t);return t?(e=Utils.getOriginType(t),e=this.compilation.getStackByModule(e),((e=(n=e&&e.genericity&&e.genericity.elements||[]).filter(function(e){return!e.isGenericTypeAssignmentDeclaration})).length>this.elements.length||this.elements.length>n.length)&&(e.length===n.length?this.valueType.error(1030,t.toString(),e.length):this.valueType.error(1031,t.toString(),e.length,n.length)),this.getGlobalTypeById("Class"),this.elements.forEach(function(e,t){e.parser(!1);t=n[t]&&n[t].type();t&&!t.isGenericType&&i.checkExpressionType(t,e)})):this.valueType.error(1083,this.value()),!0}},{key:"value",value:function(){return this.valueType.value()}},{key:"raw",value:function(){return this.valueType.raw()}}]),o}(),TypeGenericDefinition_1=TypeGenericDefinition,IntersectionType=function(){_inherits(s,Type_1);var r=_createSuper(s);function s(e,t,i){var n;return _classCallCheck(this,s),(n=r.call(this,"Intersection")).isIntersectionType=!0,n.target=e,n.left=t,n.right=i,n.hasGenericType=t.type().hasGenericType||i.type().hasGenericType,n}return _createClass(s,[{key:"clone",value:function(e){return e&&this.hasGenericType?new s(this.target,this.left.clone(e),this.right.clone(e)):this}},{key:"attribute",value:function(t){function e(e){if(e.isLiteralArrayType||e.isLiteralObjectType||e.isGenericType||e.isEnumType)return e.attribute(t);if(e.isModule){e=e.getMember(t,"get");if(e&&"public"===Utils.getPropertyModifierName(e))return e}return null}return this.left.isIntersectionType?e(this.right.type())||this.left.attribute(t):e(this.right.type())||e(this.left.type())}},{key:"attributes",get:function(){return this.getProperties()}},{key:"getProperties",value:function(i){i=i||new Map,this.left.isIntersectionType&&this.left.getProperties(i);function e(e){e.isLiteralObjectType||e.isEnumType?e.attributes.forEach(function(e,t){i.set(t,e)}):e.isModule&&e.getProperties(i)}return e(this.left.type()),e(this.right.type()),i}},{key:"getTypeKeys",value:function(){return Array.from(this.getProperties().keys())}},{key:"is",value:function(e,t){if(!(e&&e instanceof Type_1))return!1;if(!this.isNeedCheckType(e))return!0;function i(e){return Utils.inferTypeValue(e,t.inference)}var n=this.left,r=this.right;return i(n.type()).check(e,t)&&i(r.type()).check(e,t)}},{key:"toString",value:function(e){var t=this.target.left.type(),i=this.target.right.type();return this.target.parentStack.isTypeIntersectionDefinition?"".concat(t.toString(e)," & ").concat(i.toString(e)):"(".concat(t.toString(e)," & ").concat(i.toString(e),")")}}]),s}(),IntersectionType_1=IntersectionType,keySymbol$7=Symbol("key"),TypeIntersectionDefinition=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isTypeIntersectionDefinition=!0,n.left=n.createTokenStack(e,t.left,i,t,_assertThisInitialized(n)),n.right=n.createTokenStack(e,t.right,i,t,_assertThisInitialized(n)),n[keySymbol$7]={},n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.left.freeze(),this.right.freeze()}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(e){return this[keySymbol$7]._type||(this[keySymbol$7]._type=new IntersectionType_1(this,this.left.type(e),this.right.type(e))),this[keySymbol$7]._type.type(e)}},{key:"parser",value:function(){this.left.parser(),this.right.parser()}},{key:"value",value:function(){return this.parentStack.isTypeIntersectionDefinition||!this.parentStack.isTypeUnionDefinition?"".concat(this.left.value()," & ").concat(this.right.value()):"(".concat(this.left.value()," & ").concat(this.right.value(),")")}},{key:"raw",value:function(){return this.value()}}]),a}(),TypeIntersectionDefinition_1=TypeIntersectionDefinition,KeyofType=function(){_inherits(n,UnionType_1);var i=_createSuper(n);function n(e,t){return _classCallCheck(this,n),(e=i.call(this,[],e)).isKeyofType=!0,e.referenceType=t,e.hasGenericType=!!t.isGenericType,e.elements=e.getTypeKeys(t),e}return _createClass(n,[{key:"clone",value:function(e){if(!e||!this.hasGenericType)return this;e=this.referenceType.type().clone(e);return e!==this.referenceType?new n(this.target,e):this}},{key:"getTypeKeys",value:function(e){var i=this;if((e=e||this.referenceType).isGenericType)return[];var n=new Set;if(e){var r=function(e,t){n.add(new LiteralType_1(i.target.getGlobalTypeById(t),i.target,e))};switch(!0){case e.isLiteralObjectType:case e.isEnumType:e.attributes.forEach(function(e,t){r(t,"string")});break;case e.isLiteralArrayType:case e.isTupleUnion:e.elements.forEach(function(e,t){r(t,"number")});break;case e.isIntersectionType:case e.isModule:case e.isInstanceofType:e.getTypeKeys().forEach(function(e){r(e,"string")})}}return Array.from(n.values())}},{key:"is",value:function(t,n){if(!(t&&t instanceof Type_1))return!1;if(!this.isNeedCheckType(t))return!0;t.isAliasType&&(e=t.inherit)&&e.isUnionType&&(t=e);var e,r=this.getTypeKeys((e=this.referenceType,n&&n.inference?n.inference(e):e));return!!r.length&&(t.isUnionType?t.elements.every(function(e){var i=e.type();return r.some(function(e){var t=e.type();return i.isLiteralType?!!t.isLiteralType&&i.value===t.value:i.is(e.type(),n)})}):r.some(function(e){return e.type().is(t,n)}))}},{key:"toString",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this.referenceType.type();if(e.hasGenericType)return e.isGenericType&&e.hasConstraint&&!e.inherit.hasGenericType?"keyof ".concat(e.inherit.toString(t)):"keyof ".concat(e.toString(t));e=this.getTypeKeys(e);return e.length?e.map(function(e){return e.type().toString(t)}).join(" | "):"never"}}]),n}(),KeyofType_1=KeyofType,keySymbol$6=Symbol("key"),TypeKeyofDefinition=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isTypeKeyofDefinition=!0,n.valueType=n.createTokenStack(e,t.value,i,t,_assertThisInitialized(n)),n[keySymbol$6]={},n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.valueType.freeze()}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return this.valueType.valueType.description()}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(){if(!this[keySymbol$6]._type){var e;if(!(e=this.valueType.type()))return this.getGlobalTypeById("never");this[keySymbol$6]._type=new KeyofType_1(this,e)}return this[keySymbol$6]._type}},{key:"parser",value:function(){var e,t;this.valueType.parser(),this.valueType.isTypeTypeofDefinition||((t=(e=(this.valueType.isTypeDefinition?this.valueType:this).valueType).description())&&(t.isTypeDefinition||t.isGenericTypeDeclaration||t.isTypeStatement||t.isModule)||e.error(1083,e.value()))}},{key:"value",value:function(){return this.valueType.value()}},{key:"raw",value:function(){return this.valueType.value()}}]),a}(),TypeKeyofDefinition_1=TypeKeyofDefinition,keySymbol$5=Symbol("key"),TypeObjectDefinition=function(){_inherits(o,Expression_1);var a=_createSuper(o);function o(i,n,r,e,t){var s;return _classCallCheck(this,o),(s=a.call(this,i,n,r,e,t)).isTypeObjectDefinition=!0,s.attributes=new Map,s.dynamicProperties=new Map,s.properties=n.properties.map(function(e){var t,e=s.createTokenStack(i,e,r,n,_assertThisInitialized(s));return e.dynamic||(t=e.value(),s.attributes.has(t)?e.error(1045,t):s.attributes.set(e.value(),e)),e}),s[keySymbol$5]={},s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.attributes),this.properties.forEach(function(e){return e.freeze()})}},{key:"attribute",value:function(e){return this.attributes.get(e)||null}},{key:"hasAttribute",value:function(e,t){return this.attributes.has(e)}},{key:"dynamicAttribute",value:function(e){var t=this.dynamicProperties;if(t){var i,n=_createForOfIteratorHelper(t);try{for(n.s();!(i=n.n()).done;){var r=_slicedToArray(i.value,2),s=r[0],a=r[1];if(s.check(e))return a}}catch(e){n.e(e)}finally{n.f()}}return null}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return this}},{key:"type",value:function(e){return this[keySymbol$5]._type||(this[keySymbol$5]._type=new LiteralObjectType_1(this.getGlobalTypeById("object"),this))}},{key:"parser",value:function(){var t=this;this.properties.forEach(function(e){e.parser(),e.dynamic&&t.dynamicProperties.set(e.acceptType.type(),e.init.type())})}},{key:"value",value:function(){return _get(_getPrototypeOf(o.prototype),"raw",this).call(this)}}]),o}(),TypeObjectDefinition_1=TypeObjectDefinition,TypeObjectPropertyDefinition=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isTypeObjectPropertyDefinition=!0,n.key=n.createTokenStack(e,t.key,i,t,_assertThisInitialized(n)),n.key.acceptType=n.createTokenStack(e,t.key.acceptType,i,t,_assertThisInitialized(n)),n.dynamic=!!t.key.computed,n.init=n.createTokenStack(e,t.value,i,t,_assertThisInitialized(n)),n.question=!!t.key.question,n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.key.freeze(),this.init.freeze()}},{key:"acceptType",get:function(){return this.key.acceptType?this.key.acceptType.type():this.getGlobalTypeById("string")}},{key:"definition",value:function(){var e=this.question?"?":"",t=this.key.value();return this.dynamic&&(t="[".concat(t,":").concat(this.acceptType.toString(),"]")),{kind:"type",comments:this.parentStack.comments,identifier:this.key.value(),expre:"(property) ".concat(t).concat(e,":").concat(this.type().toString()),location:this.key.getLocation(),file:this.compilation.file,context:this}}},{key:"value",value:function(){return this.key.value()}},{key:"description",value:function(){return this}},{key:"type",value:function(e){return this.init.type(e)}},{key:"parser",value:function(){var t,i=this;this.dynamic&&(this.key.acceptType&&this.key.acceptType.parser(),t=this.key.acceptType?this.key.acceptType.type():this.getGlobalTypeById("string"),["string","number"].some(function(e){return t.check(i.getGlobalTypeById(e))})||this.key.error(1139,this.key.value())),this.init&&this.init.parser()}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.key).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.key).warn.apply(t,[e].concat(n))}}]),a}(),TypeObjectPropertyDefinition_1=TypeObjectPropertyDefinition,keySymbol$4=Symbol("key"),TypeStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isTypeStatement=!0,n.id=n.createTokenStack(e,t.id,i,t,_assertThisInitialized(n)),n.init=n.createTokenStack(e,t.init,i,t,_assertThisInitialized(n)),n.scope.isDefine(n.id.value())||n.getTypeById(n.id.value())?n.id.error(1078,n.id.value()):n.scope.define(n.id.value(),_assertThisInitialized(n)),n[keySymbol$4]={},n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.id.freeze(),this.init.freeze()}},{key:"type",value:function(e){var t=this;return this[keySymbol$4]._type||((e=this.init.type(e).clone(function(e){return e})).toString=function(){return t.value()},this[keySymbol$4]._type=e),this[keySymbol$4]._type}},{key:"definition",value:function(e){var e=this.init.type(e).toString(),t=this.id.value(),e="type ".concat(t," = ").concat(e);return{kind:this.kind,comments:this.comments,identifier:t,expre:e,location:this.id.getLocation(),file:this.compilation.file}}},{key:"parser",value:function(){return!1!==_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.init.parser(),!0)}},{key:"value",value:function(){return this.id.value()}},{key:"raw",value:function(){return this.id.raw()}}]),a}(),TypeStatement_1=TypeStatement,TypeTransformExpression=function(){_inherits(a,Expression_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isTypeTransformExpression=!0,n.typeExpression=n.createTokenStack(e,t.expression,i,t,_assertThisInitialized(n)),n.referExpression=n.createTokenStack(e,t.value,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.ktypeExpressioney.freeze(),this.referExpression.freeze()}},{key:"definition",value:function(e){return this.referExpression.definition(e)}},{key:"description",value:function(){return this.referExpression.description()}},{key:"reference",value:function(){return this.referExpression.reference()}},{key:"referenceItems",value:function(){return this.referExpression.referenceItems()}},{key:"type",value:function(e){return this.typeExpression.type(e)}},{key:"parser",value:function(){this.typeExpression.parser(),this.referExpression.parser(),this.referExpression.setRefBeUsed()}}]),a}(),TypeTransformExpression_1=TypeTransformExpression,keySymbol$3=Symbol("key"),TypeTupleDefinition=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isTypeTupleDefinition=!0,s.prefix=s.createTokenStack(t,i.prefix,n,i,_assertThisInitialized(s)),s.elements=(i.elements||[]).map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s[keySymbol$3]={},s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.elements),this.prefix&&this.prefix.freeze(),this.elements.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){var e=this.type();return{kind:this.kind,comments:this.comments,expre:"(type) ".concat(e.toString()),location:(this.prefix||this).getLocation(),file:this.compilation.file,context:this}}},{key:"description",value:function(){return this}},{key:"reference",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(e){var t;return this[keySymbol$3]._type||(0<(t=this.prefix?[this.prefix]:this.elements).length?this[keySymbol$3]._type=new TupleType_1(this.getGlobalTypeById("Array"),t,this):this[keySymbol$3]._type=this.getGlobalTypeById("array")),this[keySymbol$3]._type}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(o.prototype),"parser",this).call(this))return!1;this.prefix&&0<this.elements.length&&this.error(1086,this.prefix.raw()),this.prefix&&this.prefix.parser(),this.elements.forEach(function(e){return e.parser()});var e=this.elements.find(function(e){return e.restElement});return e&&e!==this.elements[this.elements.length-1]&&this.error(1077),!0}}]),o}(),TypeTupleDefinition_1=TypeTupleDefinition,keySymbol$2=Symbol("key"),TypeTupleRestDefinition=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isTypeTupleRestDefinition=!0,n.valueType=n.createTokenStack(e,t.value,i,t,_assertThisInitialized(n)),n[keySymbol$2]={},n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.valueType.freeze()}},{key:"definition",value:function(e){var t=this.type();if(t.isModule)return t.definition(e);e=this.valueType.value();return{kind:this.kind,comments:this.comments,identifier:e,expre:"(type) ".concat(t.toString()),location:this.valueType.getLocation(),file:this.compilation.file,context:this}}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.valueType).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.valueType).warn.apply(t,[e].concat(n))}},{key:"description",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(){return this[keySymbol$2]._type||(this[keySymbol$2]._type=new TupleType_1(this.getGlobalTypeById("array"),this.valueType.type(),this,!0)),this[keySymbol$2]._type}},{key:"parser",value:function(){this.valueType.parser()}},{key:"value",value:function(){return this.valueType.value()}},{key:"raw",value:function(){return"..."+this.valueType.raw()}}]),a}(),TypeTupleRestDefinition_1=TypeTupleRestDefinition,TypeTupleUnionDefinition=function(){_inherits(a,TypeTupleDefinition_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(e=s.call(this,e,t,i,n,r)).isTypeTupleUnionDefinition=!0,e}return _createClass(a,[{key:"value",value:function(){return this.raw()}},{key:"raw",value:function(){var e=this.elements.map(function(e){return e.raw()});return"(".concat(e.join(" | "),")[]")}}]),a}(),TypeTupleUnionDefinition_1=TypeTupleUnionDefinition,keySymbol$1=Symbol("key"),TypeTypeofDefinition=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isTypeTypeofDefinition=!0,n.expression=n.createTokenStack(e,t.value,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.expression.freeze()}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(e){var t;return this[keySymbol$1]||(t=this.expression.type(e),this[keySymbol$1]=t.clone(function(e){return e}),this[keySymbol$1].toString=function(e){return e?"typeof ".concat(t.toString(e)):t.toString()}),this[keySymbol$1]}},{key:"parser",value:function(){this.expression.parser();var e=this.expression.description();(!e||e.isTypeDefinition||e.isGenericTypeDeclaration||e.isTypeStatement)&&this.expression.error(1083,this.expression.value())}},{key:"value",value:function(){return this.expression.value()}},{key:"raw",value:function(){return this.expression.value()}}]),a}(),TypeTypeofDefinition_1=TypeTypeofDefinition,keySymbol=Symbol("key"),TypeUnionDefinition=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;return _classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isTypeUnionDefinition=!0,s.elements=i.elements.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s[keySymbol]={},s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.elements),this.elements.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return this}},{key:"referenceItems",value:function(){return[this]}},{key:"type",value:function(e){return this[keySymbol]._type||(this[keySymbol]._type=new UnionType_1(this.elements,this)),this[keySymbol]._type}},{key:"parser",value:function(){this.elements.forEach(function(e){return e.parser()})}},{key:"value",value:function(){var e=this.elements.map(function(e){return e.value()});return"".concat(e.join("|"))}},{key:"raw",value:function(){return this.value()}}]),o}(),TypeUnionDefinition_1=TypeUnionDefinition,UnaryExpression=function(){_inherits(a,Expression_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isUnaryExpression=!0,n.argument=n.createTokenStack(e,t.argument,i,t,_assertThisInitialized(n)),n.operator=t.operator,n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.argument.freeze()}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return this}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;this.argument.parser(),this.argument.setRefBeUsed();var e,t=this.node.operator.charCodeAt(0);return 45!==t&&43!==t||(t=this.getGlobalTypeById("Number"),!(e=this.argument.type())||e.isAnyType||t.is(e)||this.error(1087,this.argument.raw()),e)}},{key:"value",value:function(){return _get(_getPrototypeOf(a.prototype),"raw",this).call(this)}},{key:"type",value:function(e){var t,i=this.node.operator,n=i.charCodeAt(0);return 33===n?this.getGlobalTypeById("boolean"):45===n||43===n?(n=this.getGlobalTypeById("Number"),(t=this.argument.type(e)).isAnyType||!n.is(t)?this.getGlobalTypeById("int"):t):"typeof"===i?this.getGlobalTypeById("string"):this.argument.type(e)}}]),a}(),UnaryExpression_1=UnaryExpression,UpdateExpression=function(){_inherits(a,Expression_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isUpdateExpression=!0,n.argument=n.createTokenStack(e,t.argument,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.argument.freeze()}},{key:"definition",value:function(){return null}},{key:"description",value:function(){return this}},{key:"parser",value:function(){if(!_get(_getPrototypeOf(a.prototype),"parser",this).call(this))return!1;this.argument.parser(),this.argument.setRefBeUsed();var e=this.argument.type(),t=this.getGlobalTypeById("Number");return!e||e.isAnyType||t.is(e)||this.error(1087,this.argument.raw()),!0}},{key:"type",value:function(e){var t,i=this.getGlobalTypeById("Number");return(t=this.argument.type(e)).isAnyType||!i.is(t)?this.getGlobalTypeById("int"):this.argument.type(e)}}]),a}(),UpdateExpression_1=UpdateExpression,VariableDeclaration=function(){_inherits(o,Stack_1);var a=_createSuper(o);function o(t,i,n,e,r){var s;switch(_classCallCheck(this,o),(s=a.call(this,t,i,n,e,r)).isVariableDeclaration=!0,s.kind=i.kind,s.declarations=i.declarations.map(function(e){return s.createTokenStack(t,e,n,i,_assertThisInitialized(s))}),s.flag=!1,e&&e.type){case"ForStatement":case"ForInStatement":case"ForOfStatement":s.flag=!0}return s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),_get(_getPrototypeOf(o.prototype),"freeze",this).call(this,this.declarations),this.declarations.forEach(function(e){return e.freeze()})}},{key:"definition",value:function(){return null}},{key:"reference",value:function(){return this.declarations[0].reference()}},{key:"referenceItems",value:function(){return this.declarations[0].referenceItems()}},{key:"value",value:function(){return this.declarations[0].value()}},{key:"raw",value:function(){return this.declarations[0].raw()}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.declarations[0]).warn.apply(t,[e].concat(n))}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.declarations[0]).error.apply(t,[e].concat(n))}},{key:"parser",value:function(){this.declarations.forEach(function(e){return e.parser()})}}]),o}(),VariableDeclaration_1=VariableDeclaration,VariableDeclarator=function(){_inherits(o,Declarator_1);var a=_createSuper(o);function o(e,t,i,n,r){var s;return _classCallCheck(this,o),(s=a.call(this,e,t,i,n,r)).isVariableDeclarator=!0,s.kind=n.kind,s.id=s.createTokenStack(e,t.id,i,t,_assertThisInitialized(s)),s.acceptType=s.createTokenStack(e,t.id.acceptType,i,t,_assertThisInitialized(s)),s.init=s.createTokenStack(e,t.init,i,t,_assertThisInitialized(s)),s.dynamic=!!t.dynamic,s.isPattern=!1,r&&!r.isDeclaratorProperty&&(s.id.isIdentifier?(s.assignItems.add(s.init),s.assignValue=s.init,r.isDeclaratorVariable||(n="var"===s.kind?"function":"block",e=s.id.value(),i.isDefine(e,n)&&s.error(1007,s.value()),i.define(e,_assertThisInitialized(s)))):(s.id.isObjectPattern||s.id.isArrayPattern)&&(s.isPattern=!0,s.id.setKind(s.kind))),s}return _createClass(o,[{key:"freeze",value:function(){_get(_getPrototypeOf(o.prototype),"freeze",this).call(this),this.id.freeze(),this.acceptType&&this.acceptType.freeze(),this.init&&this.init.freeze()}},{key:"type",value:function(e){e=_get(_getPrototypeOf(o.prototype),"type",this).call(this,e);return this.parentStack.flag&&this.parentStack.parentStack.isForInStatement&&e===this.getGlobalTypeById("any")?this.getGlobalTypeById("string"):e}},{key:"definition",value:function(e){var t=e&&e.called,e=e&&e.inference,t=this.type(t).clone(e).toString(),e=this.id.value(),i=this.parentStack.isPropertyDefinition?"".concat(this.module.id,".").concat(e):e,i="".concat(this.kind," ").concat(i,":").concat(t);return{kind:this.kind,comments:this.parentStack.comments,identifier:e,expre:i,location:this.id.getLocation(),file:this.compilation.file,context:this.parentStack}}},{key:"parser",value:function(){return!1!==_get(_getPrototypeOf(o.prototype),"parser",this).call(this)&&((this.id.isObjectPattern||this.id.isArrayPattern)&&this.id.parser(),this.acceptType&&this.acceptType.parser(),this.init&&(this.init.parser(),this.init.setRefBeUsed()),this.dynamic?this.id.parser():((e=this.init&&this.init.description())&&e.isDeclarator&&e!==this&&e.parser(),this.module&&this.module.id===this.value()&&this.id.error(1008,this.id.value()),this.init&&(this.checkExpressionType(this.acceptType,this.init),e=this.init.description(),this===e&&this.error(1010,this.init.value()))),!0);var e}},{key:"value",value:function(){return this.id.value()}},{key:"raw",value:function(){return this.id.raw()}},{key:"error",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.id).error.apply(t,[e].concat(n))}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.id).warn.apply(t,[e].concat(n))}}]),o}(),VariableDeclarator_1=VariableDeclarator,WhenStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isWhenStatement=!0,n.condition=n.createTokenStack(e,t.test,i,t,_assertThisInitialized(n)),n.consequent=n.createTokenStack(e,t.consequent,i,t,_assertThisInitialized(n)),n.alternate=n.createTokenStack(e,t.alternate,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.condition.freeze(),this.consequent.freeze(),this.alternate.freeze()}},{key:"definition",value:function(){return null}},{key:"parser",value:function(){this.consequent.parser(),this.consequent.setRefBeUsed(),this.alternate&&this.alternate.parser()}}]),a}(),WhenStatement_1=WhenStatement,WhileStatement=function(){_inherits(a,Stack_1);var s=_createSuper(a);function a(e,t,i,n,r){return _classCallCheck(this,a),(n=s.call(this,e,t,i,n,r)).isWhileStatement=!0,n.condition=n.createTokenStack(e,t.test,i,t,_assertThisInitialized(n)),n.body=n.createTokenStack(e,t.body,i,t,_assertThisInitialized(n)),n}return _createClass(a,[{key:"definition",value:function(){return null}},{key:"freeze",value:function(){_get(_getPrototypeOf(a.prototype),"freeze",this).call(this),this.condition.freeze(),this.body.freeze()}},{key:"parser",value:function(){return!1!==_get(_getPrototypeOf(a.prototype),"parser",this).call(this)&&(this.condition?(this.condition.parser(),this.condition.setRefBeUsed(),this.condition.description().isLiteral&&!this.body.body.some(function(e){return e.isReturnStatement||e.isBreakStatement})&&this.condition.warn(1042),this.body&&this.body.parser(),!0):this.error(1041))}}]),a}(),WhileStatement_1=WhileStatement,tokens={},create=function(e,t,i,n,r){if(!t)return null;switch(t.type){case"MethodDefinition":return"get"===t.kind?new tokens.MethodGetterDefinition(e,t,i,n,r):new("set"===t.kind?tokens.MethodSetterDefinition:tokens.MethodDefinition)(e,t,i,n,r);case"Super":return new tokens.SuperExpression(e,t,i,n,r);default:var s=tokens[t.type];if(s)return new s(e,t,i,n,r);throw new Error("Unrecognized token '".concat(t.type,"'"))}};for(name in tokens.AnnotationDeclaration=AnnotationDeclaration_1,tokens.AnnotationExpression=AnnotationExpression_1,tokens.ArrayExpression=ArrayExpression_1,tokens.ArrayPattern=ArrayPattern_1,tokens.ArrowFunctionExpression=ArrowFunctionExpression_1,tokens.AssignmentExpression=AssignmentExpression_1,tokens.AssignmentPattern=AssignmentPattern_1,tokens.AwaitExpression=AwaitExpression_1,tokens.BinaryExpression=BinaryExpression_1,tokens.BlockStatement=BlockStatement_1,tokens.BreakStatement=BreakStatement_1,tokens.CallExpression=CallExpression_1,tokens.ClassDeclaration=ClassDeclaration_1,tokens.ConditionalExpression=ConditionalExpression_1,tokens.ContinueStatement=ContinueStatement_1,tokens.Declarator=Declarator_1,tokens.DeclaratorDeclaration=DeclaratorDeclaration_1,tokens.DeclaratorFunction=DeclaratorFunction_1,tokens.DeclaratorTypeAlias=DeclaratorTypeAlias_1,tokens.DeclaratorVariable=DeclaratorVariable_1,tokens.DoWhileStatement=DoWhileStatement_1,tokens.EmptyStatement=EmptyStatement_1,tokens.EnumDeclaration=EnumDeclaration_1,tokens.EnumProperty=EnumProperty_1,tokens.Expression=Expression_1,tokens.ExpressionStatement=ExpressionStatement_1,tokens.ForInStatement=ForInStatement_1,tokens.ForOfStatement=ForOfStatement_1,tokens.ForStatement=ForStatement_1,tokens.FunctionDeclaration=FunctionDeclaration_1,tokens.FunctionExpression=FunctionExpression_1,tokens.GenericDeclaration=GenericDeclaration_1,tokens.GenericTypeAssignmentDeclaration=GenericTypeAssignmentDeclaration_1,tokens.GenericTypeDeclaration=GenericTypeDeclaration_1,tokens.Identifier=Identifier_1,tokens.IfStatement=IfStatement_1,tokens.ImportDeclaration=ImportDeclaration_1,tokens.InterfaceDeclaration=InterfaceDeclaration_1,tokens.JSXAttribute=JSXAttribute_1,tokens.JSXCdata=JSXCdata_1,tokens.JSXClosingElement=JSXClosingElement_1,tokens.JSXClosingFragment=JSXClosingFragment_1,tokens.JSXElement=JSXElement_1,tokens.JSXEmptyExpression=JSXEmptyExpression_1,tokens.JSXExpressionContainer=JSXExpressionContainer_1,tokens.JSXFragment=JSXFragment_1,tokens.JSXIdentifier=JSXIdentifier_1,tokens.JSXMemberExpression=JSXMemberExpression_1,tokens.JSXNamespacedName=JSXNamespacedName_1,tokens.JSXOpeningElement=JSXOpeningElement_1,tokens.JSXOpeningFragment=JSXOpeningFragment_1,tokens.JSXScript=JSXScript_1,tokens.JSXSpreadAttribute=JSXSpreadAttribute_1,tokens.JSXStyle=JSXStyle_1,tokens.JSXText=JSXText_1,tokens.LabeledStatement=LabeledStatement_1,tokens.Literal=Literal_1,tokens.LogicalExpression=LogicalExpression_1,tokens.MemberExpression=MemberExpression_1,tokens.MetatypeDeclaration=MetatypeDeclaration_1,tokens.MethodDefinition=MethodDefinition_1,tokens.MethodGetterDefinition=MethodGetterDefinition_1,tokens.MethodSetterDefinition=MethodSetterDefinition_1,tokens.ModifierDeclaration=ModifierDeclaration_1,tokens.NewExpression=NewExpression_1,tokens.ObjectExpression=ObjectExpression_1,tokens.ObjectPattern=ObjectPattern_1,tokens.PackageDeclaration=PackageDeclaration_1,tokens.ParenthesizedExpression=ParenthesizedExpression_1,tokens.Program=Program_1,tokens.Property=Property_1,tokens.PropertyDefinition=PropertyDefinition_1,tokens.RestElement=RestElement_1,tokens.ReturnStatement=ReturnStatement_1,tokens.SequenceExpression=SequenceExpression_1,tokens.SpreadElement=SpreadElement_1,tokens.SuperExpression=SuperExpression_1,tokens.SwitchCase=SwitchCase_1,tokens.SwitchStatement=SwitchStatement_1,tokens.TemplateElement=TemplateElement_1,tokens.TemplateLiteral=TemplateLiteral_1,tokens.ThisExpression=ThisExpression_1,tokens.ThrowStatement=ThrowStatement_1,tokens.TryStatement=TryStatement_1,tokens.TypeAssertExpression=TypeAssertExpression_1,tokens.TypeComputeDefinition=TypeComputeDefinition_1,tokens.TypeDefinition=TypeDefinition_1,tokens.TypeFunctionDefinition=TypeFunctionDefinition_1,tokens.TypeGenericDefinition=TypeGenericDefinition_1,tokens.TypeIntersectionDefinition=TypeIntersectionDefinition_1,tokens.TypeKeyofDefinition=TypeKeyofDefinition_1,tokens.TypeObjectDefinition=TypeObjectDefinition_1,tokens.TypeObjectPropertyDefinition=TypeObjectPropertyDefinition_1,tokens.TypeStatement=TypeStatement_1,tokens.TypeTransformExpression=TypeTransformExpression_1,tokens.TypeTupleDefinition=TypeTupleDefinition_1,tokens.TypeTupleRestDefinition=TypeTupleRestDefinition_1,tokens.TypeTupleUnionDefinition=TypeTupleUnionDefinition_1,tokens.TypeTypeofDefinition=TypeTypeofDefinition_1,tokens.TypeUnionDefinition=TypeUnionDefinition_1,tokens.UnaryExpression=UnaryExpression_1,tokens.UpdateExpression=UpdateExpression_1,tokens.VariableDeclaration=VariableDeclaration_1,tokens.VariableDeclarator=VariableDeclarator_1,tokens.WhenStatement=WhenStatement_1,tokens.WhileStatement=WhileStatement_1,tokens)tokens[name].prototype.toString=function(e){return function(){return e}}(name);Stack_1.create=create;var tokens_1={tokens:tokens,create:create},moduleStacks=new Map,symbolKey=Symbol("key"),Compilation=function(){_inherits(r,EventDispatcher_1);var n=_createSuper(r);function r(e,t){var i;return _classCallCheck(this,r),(i=n.call(this)).compiler=e,i.modules=new Map,i.stacks=new Map,i.namespace=Namespace_1.dataset,i.namespaceSets=new Set,i.children=[],i.parent=null,i.scope=new TopScope_1(null),i.stack=null,i.ast=null,i.isDescriptionType=!1,i.isMain=!1,i.errors=[],i.mtime=null,i.file=t,i.owner=null,i.dependencies=new Set,i.assets=new Map,i.requires=new Map,i.originId=null,i.originFile=null,i.source="",i.JSX=!1,i.internalDeclared=new Map,i[symbolKey]={policy:Constant_1.POLICY_NONE,completed:{}},i}return _createClass(r,[{key:"completed",value:function(e,t){return void 0!==t&&(this[symbolKey].completed[e]=t),!!this[symbolKey].completed[e]}},{key:"policy",get:function(){return this[symbolKey].policy}},{key:"setPolicy",value:function(t,e){(r.POLICY_ALL&t)===t&&(e?e.policy=t:(this[symbolKey].policy=t,this.modules.forEach(function(e){e.policy=t})))}},{key:"isPolicy",value:function(e,t){t=(t||this).policy;return(t&e)===t}},{key:"isServerPolicy",value:function(e){e=(e||this).policy;return e===Constant_1.POLICY_ALL||(e&Constant_1.POLICY_SERVER)===e}},{key:"setServerPolicy",value:function(e){this.setPolicy(Constant_1.POLICY_SERVER,e)}},{key:"isClientPolicy",value:function(e){return(e||this).policy!==Constant_1.POLICY_SERVER}},{key:"setClientPolicy",value:function(e){this.setPolicy(Constant_1.POLICY_CLIENT,e)}},{key:"addStack",value:function(e){0<e.node.start&&this.stacks.set(e.node.start,e)}},{key:"addDependency",value:function(e,t){e&&e!==this&&(t?t.isModule&&t.addDepend(e):(e.used=!0,this.dependencies.add(e)))}},{key:"addAsset",value:function(e,t,i,n,r){return!this.assets.has(e)&&(this.assets.set(e,{file:t,resolve:e,content:i,type:n,assign:r}),!0)}},{key:"addRequire",value:function(e,t,i,n,r,s){return!this.requires.has(t)&&(this.requires.set(t,{key:e,name:t,from:i,resolve:n,extract:r,stack:s}),!0)}},{key:"getDependencies",value:function(e){if(e)return e.isModule?Array.from(e.dependencies.values()):[];var t=new Set;return this.dependencies.forEach(function(e){return t.add(e)}),Array.from(t.values())}},{key:"getStackByAt",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=this.stacks.get(e);if(!n){var r=0;for(t<0&&(t=0===i?this.stacks.size/2:this.stacks.size);!n&&r<t;)r++,0===i?n=this.stacks.get(e-r)||this.stacks.get(e+r):i<0?n=this.stacks.get(e-r):0<i&&(n=this.stacks.get(e+r))}return n}},{key:"addModuleStack",value:function(e,t){moduleStacks.set(e,t)}},{key:"getStackByModule",value:function(e){return moduleStacks.get(e)}},{key:"error",value:function(e,t){for(var i=this.getRangeByNode(e),n=arguments.length,r=new Array(2<n?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];var a=Diagnostic_1.getMessage(this.compiler.options.lang,t,r),a=new Diagnostic_1(this.file,a,i,0,e,t);this.compiler.options.debug&&(e instanceof Error&&console.log(e),Utils.debug("[Error] "+a.toString())),this.compiler.options.diagnose&&(this.errors.push(a),this.compiler.errors.push(a))}},{key:"warn",value:function(e,t){for(var i=this.getRangeByNode(e),n=arguments.length,r=new Array(2<n?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];var a=Diagnostic_1.getMessage(this.compiler.options.lang,t,r),a=new Diagnostic_1(this.file,a,i,1,e,t);this.compiler.options.debug&&Utils.debug("[Warn] "+a.toString()),this.compiler.options.diagnose&&(this.errors.push(a),this.compiler.errors.push(a))}},{key:"getReference",value:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return t&&t instanceof Module_1?i?t.getMethod(e,n):t.getMember(e,n):t instanceof Namespace_1?t.get(e):t?null:this.getModuleById(e)}},{key:"getRangeByNode",value:function(e){if(e.loc)return e.loc.start&&e.loc.end?new Range_1(e.loc.start,e.loc.end):new Range_1(e.loc,Object.assign({},e.loc,{column:e.loc.column+(e.raisedAt-e.pos)}));var t=this.source.substr(0,e.start+1),i=t.split(/\r\n/),n=0<i.length?i[i.length-1]:t,t=e.start-(t.length-n.length),n={line:i.length,column:t},t=this.source.substr(e.start,e.end+1),r=t.split(/\r\n/),s=0<r.length?r[r.length-1]:t,e=e.end-(t.length-s.length),t={line:r.length+i.length,column:e};return new Range_1(n,t)}},{key:"getTypeById",value:function(e){return(this.modules.has(e)?this.modules:this.internalDeclared.has(e)?this.internalDeclared:Namespace_1.globals).get(e)}},{key:"getGlobalTypeById",value:function(e){return Namespace_1.globals.get(e)}},{key:"createChildCompilation",value:function(e,t,i){t=this.compiler.createCompilation(e,t,3<arguments.length&&void 0!==arguments[3]&&arguments[3],e);return t?(t.stack||(t.originId=i,t.parent=this,t.createStack(),this.children.push(t)),t):null}},{key:"getModuleById",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.modules.has(e))return this.modules.get(e);if(this.internalDeclared.has(e))return this.internalDeclared.get(e);var i=null,n=this.createChildCompilation(e.replace(/\./g,"/"),this.file&&path__default.default.dirname(this.file),e);return n&&(t&&(n.parser(),n.checker()),i=n.modules.get(e)),i||Namespace_1.globals.get(e)}},{key:"getAllModulesByPolicy",value:function(r){var t=this,s=[];return this.modules.forEach(function(e){t.isPolicy(r,e)&&s.push(e)}),this.children.forEach(function(e){var t,i=_createForOfIteratorHelper(e.getModulesByPolicy(r));try{for(i.s();!(t=i.n()).done;){var n=t.value;s.push(n)}}catch(e){i.e(e)}finally{i.f()}}),s}},{key:"getModulesByPolicy",value:function(i){var t=this,n=[];return this.modules.forEach(function(e){t.isPolicy(i,e)&&n.push(e)}),this.children.forEach(function(t){t.modules.forEach(function(e){t.isPolicy(i,e)&&n.push(e)})}),n}},{key:"getServerCompilations",value:function(){function t(e){r.has(e)||(r.add(e),n.push(e))}var i=this,n=[],r=new WeakSet;return this.modules.forEach(function(e){i.isServerPolicy(e)&&t(e.compilation)}),this.children.forEach(function(e){e.getServerCompilations().forEach(function(e){t(e)})}),n}},{key:"getClientCompilations",value:function(){function t(e){r.has(e)||(r.add(e),n.push(e))}var i=this,n=[],r=new WeakSet;return this.modules.forEach(function(e){i.isClientPolicy(e)&&t(e.compilation)}),this.children.forEach(function(e){e.getClientCompilations().forEach(function(e){t(e)})}),n}},{key:"readSibling",value:function(){var e,t,i,n=this,r=0<arguments.length&&void 0!==arguments[0]&&arguments[0],s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",a=this.file&&path__default.default.dirname(this.file);return a?(e=(Utils.readdir(path__default.default.join(a,s.replace(".","/")),!0)||[]).map(function(e){var t=fs__default.default.statSync(e),t=!!t&&t.isDirectory();return{name:path__default.default.basename(e,n.compiler.suffix),folder:t,filename:e}}),r?(t=new Set,Array.from(this.modules.values()).forEach(function(e){t.add(e.namespace)}),i=[],t.forEach(function(t){e.forEach(function(e){e.name=t.getChain().concat(e.name).join("."),i.push(e)})}),i):e):[]}},{key:"parseAst",value:function(e){try{return Parser_1.Parser.parse(e,this.compiler.options.parser)}catch(e){this.error(e,1085,e.message)}}},{key:"createAst",value:function(e){if(!this.ast)try{this.mtime=this.file?fs__default.default.statSync(this.file).mtimeMs:null,this.source=(e||fs__default.default.readFileSync(this.file)).toString(),this.ast=this.parseAst(this.source)}catch(e){this.error(e,1085,e.message)}return this.ast}},{key:"createModule",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=t,r=null;return e=e||this.namespace,!i&&e.has(t)?r=e.get(t):e!==Namespace_1.dataset&&(n=e.getChain().concat(n).join(".")),(r=r||(i?this.internalDeclared:this.modules).get(n))||(r=new Module_1(this),this.compiler.dispatcher("onCreatedModule",r)),r.file=this.file,r.namespace=e,r.policy=this.policy,r.id=t,i?this.internalDeclared.set(n,r):(e&&e.set(t,r),this.modules.set(n,r)),r}},{key:"createStack",value:function(e,t){return this.stack||this.ast===(t=t||this.createAst(e))||(e=this.stack=tokens_1.create(this,t,this.scope,null))&&e.createCompleted(),this.stack}},{key:"isValid",value:function(e){if(!this.ast)return!1;if(void 0===e&&this.file){if(fs__default.default.statSync(this.file).mtimeMs===this.mtime)return!0}else if(e&&e===this.source)return!0;return!1}},{key:"clear",value:function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.modules.forEach(function(e){e.assets.clear(),e.requires.clear(),e.dependencies.clear(),e.imports.clear(),e.importAlias.clear(),moduleStacks.delete(e),e.namespace.del(e.id)}),this.namespaceSets.forEach(function(i){i.modules.forEach(function(e,t){e.compilation===n&&i.del(t)})}),this.errors.forEach(function(e){e=n.compiler.errors.indexOf(e);0<=e&&n.compiler.errors.splice(e,1)}),this.namespaceSets.clear(),this.assets.clear(),this.requires.clear(),this.modules.clear(),this.stacks.clear(),this.dependencies.clear(),this.internalDeclared.clear(),e?(delete this.scope,delete this.errors,delete this.namespaceSets,delete this.assets,delete this.requires,delete this.modules,delete this.stacks,delete this.dependencies,delete this.internalDeclared,delete this[symbolKey],delete this.stack,delete this.ast):((e=this[symbolKey]).completed={},e.policy=Constant_1.POLICY_NONE,this.changed=!!this.ast,this.errors=[],this.stack=null,this.ast=null,this.hasParsed=!1,this.hasChecked=!1,this.hasFreezed=!1,this.scope=new TopScope_1(null)),!0}},{key:"parser",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.hasParsed||(this.hasParsed=!0,this.createStack(e),this.stack&&(this.compiler.dispatcher("onParseStart",{compilation:this}),this.children.forEach(function(e){return e.parser()}),this.dispatcher("onBeforeParser"),this.stack.parser(),this.dispatcher("onAfterParser"),this.compiler.dispatcher("onParseDone",{compilation:this})))}},{key:"checker",value:function(){this.hasChecked||(this.hasChecked=!0,this.stack&&(this.children.forEach(function(e){return e.checker()}),this.stack.checker()))}},{key:"freeze",value:function(){this.hasFreezed||(this.hasFreezed=!0,this.stack&&this.compiler.options.freeze&&(this.stack.freeze(),this.children.forEach(function(e){return e.freeze()})))}},{key:"batch",value:function(e,t){var i=this,n=e.length,r=[];e.forEach(function(e){process.nextTick(function(e){i.build(e,function(e){n--,e&&r.push(e),n<1&&t&&"function"==typeof t&&t(0<r.length?r:null,i)},!0)},e)})}},{key:"build",value:function(t,i){var n=this,e=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(this.completed(t.name))return"function"==typeof i?i(null,this):void 0;function r(e){n.compiler.dispatcher("onBuildDone",{error:e,plugin:t,compilation:s}),i&&"function"==typeof i&&(e&&e instanceof Error?i({plugin:t,error:e},n):i(null,n))}var s=this;try{this.parser(),this.stack?(this.freeze(),this.compiler.dispatcher("onBuildStart",{plugin:t,compilation:s}),!0===e?t.start(this,r):t.build(this,r)):r(new Error("Parser error."))}catch(e){r(e)}}}]),r}(),Compilation_1=Compilation,cwd=process.cwd(),dirname=__dirname,compilations=new Map,pluginInterfaces=[{name:"name",type:["string"],isStatic:!0},{name:"platform",type:["string"],isStatic:!0},{name:"version",type:["string","number"],isStatic:!0},{name:"config",type:["function"]},{name:"getStack",type:["function"],option:!0},{name:"getPolyfill",type:["function"],option:!0},{name:"start",type:["function"]},{name:"build",type:["function"]}],plugins=new Map,hasSetTheme=!1,setTheme=function(){hasSetTheme||(hasSetTheme=!0,require("colors").setTheme({silly:"rainbow",input:"grey",verbose:"cyan",info:"green",data:"blue",help:"cyan",warn:"yellow",debug:"magenta",error:"red",bgBlue:"bgBlue"}))},Compiler=function(){_inherits(c,EventDispatcher_1);var i=_createSuper(c);function c(e){var t;return _classCallCheck(this,c),e=(t=i.call(this)).parseOptions(e),t.options=e,t.compilations=compilations,t.suffix=t.options.suffix,t.main=[],t.regexpSuffix=/\.[a-zA-Z]+$/,t.workspace=e.workspace,t.filesystem=new Map,t.grammar=new Map,t.errors=[],t.utils=Utils,t.diagnostic=Diagnostic_1,t.loadedDescribeFiles=new Set,e.service||setTheme(),t}return _createClass(c,[{key:"callUtils",value:function(e){for(var e=Utils[e],t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return!!e&&e.apply(Utils,i)}},{key:"defaultOptions",value:function(){return{throwError:!1,debug:!0,diagnose:!1,workspace:"./",service:!1,enableStackMap:!1,lang:1,suffix:".es",builder:[],types:[],cwd:cwd,env:"production",freeze:!1,annotations:["Provider","Callable","Runtime","Syntax","Env","Router","Post","Get","Del","Put","Option","Deprecated","Define","Internal","Alias","Override","Dynamic","Embed","SkinClass","Abstract","WebComponent","HostComponent","Require","Required","Import","Main","Reference","DOMAttribute","Injector","Define"],jsx:{componentClass:"web.components.Component",skinClass:"web.components.Skin",slot:{scopeName:"scope",scopeValue:"scope"},xmlns:{sections:{"@directives":["if","elseif","else","for","each","show"],"@events":["*"],"@natives":["*"],"@slots":["*"],"@binding":["*"]},context:["for","each"],default:{on:"@events",slot:"@slots",directive:"@directives",bind:"@binding",native:"@natives"}}},excludeDescribeFile:[],require:{},commandLineEntrance:!1,loadGlobalDescribeFile:!0,scanTypings:!0,autoLoadDescribeFile:!0,describePattern:/(\.d\.es)$/,describeDirname:"types",resolvePaths:[],configFileName:"es.config.js",globalTypes:[],parser:{locations:!1,preserveParens:!0,ecmaVersion:11,reserved:["global"]}}}},{key:"parseOptions",value:function(e){var t=this.defaultOptions(),i=(e=lodash.merge(t,e||{})).cwd||i;return e.globalTypes.push(path__default.default.resolve(dirname,"../globals")),path__default.default.isAbsolute(i)||Utils.error("options.cwd is not absolute path."),e.configFileName&&(t=this.loadConfigFile(i,e.configFileName),e=lodash.merge(e,t||{})),e.output?e.output=this.pathAbsolute(e.output):e.output=path__default.default.resolve(i,"build"),e.workspace=path__default.default.isAbsolute(e.workspace)?e.workspace:path__default.default.resolve(i,e.workspace),fs__default.default.existsSync(e.workspace)||Utils.error("options.workspace is not exists."),e.builder=(e.builder||[]).map(function(t){if(!t)return null;try{var e=path__default.default.isAbsolute(t)?t:require.resolve(t,{paths:[i]});return require(e)}catch(e){Utils.error("Cannot find module '".concat(t,"'. try 'npm install ").concat(t,"'"))}}).filter(function(e){return!!e}),e}},{key:"getOutputFileSystem",value:function(e){if(!this.options.service){e="".concat(e,"-output");if(this.filesystem.has(e))return this.filesystem.get(e);var t=new(require("memory-fs"));return this.filesystem.set(e,t),t}}},{key:"getInputFileSystem",value:function(){if(!this.options.service){if(this.filesystem.has("input"))return this.filesystem.get("input");var e=new(require("memory-fs"));return this.filesystem.set("input",e),e}}},{key:"resolve",value:function(e,t){var i=64===e.charCodeAt(0);if(i&&(e=e.substr(1)),i)return this.getFileAbsolute(e,t);function n(e,t){try{return require.resolve(e,t)}catch(e){}return null}return this.getFileAbsolute(e,t)||n(e)||n(e,{paths:[t].concat(this.options.cwd,this.options.resolvePaths)})}},{key:"normalizeModuleFile",value:function(e,t,i,n){var r=this.normalizePath(e.file);if(e.require)return r;var s=[];return(t=1<e.compilation.modules.size&&!t?e.getName():t)?(t&&s.push("id=".concat(t)),i&&s.push("type=".concat(i)),n&&s.push("file=".concat(n)),"".concat(r,"?").concat(s.join("&"))):r}},{key:"normalizePath",value:function(e){return"\\"===path__default.default.sep?e.replace(/\\/g,"/"):e}},{key:"getFileAbsolute",value:function(e,t){if("string"!=typeof e)return null;if((!(2<arguments.length&&void 0!==arguments[2])||arguments[2])&&!this.regexpSuffix.test(e)&&(e+=this.suffix),path__default.default.isAbsolute(e))e=path__default.default.resolve(e);else{if(t){for(var i=t.replace(/\\/g,"/").split("/"),n=t;n&&!fs__default.default.existsSync(path__default.default.join(n,e))&&i.pop();)n=i.join("/");return n&&(e=path__default.default.join(n,e)),fs__default.default.existsSync(e)?e:null}e=path__default.default.resolve(this.workspace,e)}return fs__default.default.existsSync(e)?e:null}},{key:"getRelativeWorkspace",value:function(e){return e&&(e=path__default.default.resolve(e)).includes(this.workspace)?path__default.default.relative(this.workspace,e):""}},{key:"getFileNamespace",value:function(e){if(path__default.default.isAbsolute(e))return e=this.getRelativeWorkspace(e),path__default.default.dirname(e).split(/[\\\/]+/).filter(function(e){return!!e}).join(".");throw new Error("Invalid file '".concat(e,"'"))}},{key:"getFileClassName",value:function(e){return path__default.default.basename(e,this.suffix)}},{key:"pathAbsolute",value:function(e){return path__default.default.isAbsolute(e)?path__default.default.resolve(e):path__default.default.resolve(cwd,e)}},{key:"removeCompilation",value:function(e){var e=(e=this.getFileAbsolute(e))&&e.toLowerCase(),t=this.compilations.get(e);return!!t&&(t.clear(!0),this.compilations.delete(e))}},{key:"getCompilation",value:function(e,t){t=(e=this.getFileAbsolute(e,t))&&e.toLowerCase();return t&&this.compilations.has(t)?this.compilations.get(t):null}},{key:"hasCompilation",value:function(e,t){t=(e=this.getFileAbsolute(e,t))&&e.toLowerCase();return this.compilations.has(t)}},{key:"createCompilation",value:function(e,t,i){var n=e;if(e=this.getFileAbsolute(e,t)){t=e.toLowerCase();if(this.compilations.has(t))return this.compilations.get(t);this.compilations.set(t,null);var r=new Compilation_1(this,e);return r.originFile=n,this.compilations.set(t,r),!i&&this.options.autoLoadDescribeFile&&this.autoLoadDescribeFiles(path__default.default.dirname(e)),this.dispatcher("onCreatedCompilation",r),r}return null}},{key:"autoLoadDescribeFiles",value:function(e){var t,i;e&&this.globalPath!==e&&(i=this.loadedDescribeFiles,e=this.pathAbsolute(e),i.has(e)||(i.add(e),this.autoLoadDescribeFiles(path__default.default.dirname(e)),t=this.options.describePattern,0<(i=Utils.readdir(e,!0).filter(function(e){return t.test(e)})).length&&this.loadTypes(i)))}},{key:"scanTypings",value:function(e){e=(e=Array.isArray(e)?e:[e]).filter(function(e){return"string"==typeof e});var t=this.options.describePattern,i=[],r=function(e,t){try{var i;!fs__default.default.existsSync(e)||(i=require(e).typings)&&n(path__default.default.join(t,i),!0)}catch(e){}},s=function(e){return!!(e&&t.test(e)&&fs__default.default.statSync(e).isFile())&&(i.push(e),!0)},n=function t(e,i){!s(e)&&i&&(Utils.readdir(e,!0)||[]).forEach(function(e){t(e)})};return e.forEach(function e(t,i){var n=Utils.readdir(t,!0);n&&(n.forEach(function(e){i?r(path__default.default.join(e,"package.json"),e):s(e)}),i||(e(path__default.default.join(t,"node_modules"),!0),r(path__default.default.join(t,"package.json"),t)))}),i}},{key:"initialize",value:function(){var e,t=this;c.globalTypeInitialized||(c.globalTypeInitialized=!0,(e=this.options.globalTypes)&&this.options.loadGlobalDescribeFile&&Array.isArray(e)&&e.forEach(function(e){e=Utils.readdir(e,!0);e&&t.loadTypes(e,!0)}),this.options.scanTypings&&this.loadTypes(this.scanTypings(process.cwd())),Array.isArray(this.options.types)&&0<this.options.types.length&&this.loadTypes(this.options.types),this.dispatcher("initialized"))}},{key:"loadConfigFile",value:function(t,e){t=path__default.default.join(t,e);if(fs__default.default.existsSync(t))try{var i=require(t),n="function"===i?i(this):i;return"[object Object]"!==Object.prototype.toString.call(n)&&(n={},console.error("config file export data type can only is object. in '".concat(t,"'"))),n}catch(e){console.error("".concat(e.message," in '").concat(t,"'"))}}},{key:"loadTypes",value:function(e){var t,i=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,s=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(c.globalTypeInitialized||this.initialize(),"string"==typeof e&&(e=[e]),!Array.isArray(e))throw t=Diagnostic_1.getMessage(this.options.lang,1095,[e]),new Error(t);var a=Array.isArray(this.options.excludeDescribeFile)?this.options.excludeDescribeFile:[],o=[];e.forEach(function(e){a.includes(e)||((e=i.createCompilation(e,null,s)).stack||e.createStack(),e.isDescriptionType=!0,e.isGlobalsDescriptionType=n,e.owner=r,o.push(e))}),o.forEach(function(e){e.parser()})}},{key:"checkPlugin",value:function(e){var t="function"==typeof e,i=t?e.prototype:Object.getPrototypeOf(e),n=t?e:i.constructor;if(!i)throw new Error("Invalid plugin.");t=pluginInterfaces.find(function(e){var t=(e.isStatic?n:i)[e.name];if(t||!0===e.option)return!e.type.includes(_typeof(t));throw new Error("Plugin interface '".concat(e.name,"' not implemented."))});if(t)throw new Error("Plugin interface '".concat(t.name,"' implemented members type not compatible. must is \"").concat(t.type.join(","),'"'))}},{key:"getPlugin",value:function(e){if(!e)return null;var t=_typeof(e),i="string"===t?e:e.name;if(plugins.has(i)||"string"===t)return plugins.get(i);this.checkPlugin(e);i="function"==typeof e?new e(this):e,t="function"===t?e:Object.getPrototypeOf(e).constructor;return plugins.set(t.name,i),this.dispatcher("pluginInstantiated",{plugin:e,instance:i}),i}},{key:"start",value:function(e,t){var i=this,n=(this.initialize(),this.options.file),n=this.createCompilation(n);n&&(this.main.push(n),n.isMain=!0,n.batch([].concat(e).map(function(e){return i.getPlugin(e)}),t))}},{key:"build",value:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],e=(this.initialize(),Namespace_1.globals.has(e)?Namespace_1.globals.get(e).compilation:this.createCompilation(e));return e&&e.stack&&n&&(e.isValid()||e.clear()),!!e&&(e.parent||e.isDescriptionType||this.main.indexOf(e)<0&&this.main.push(e),e.isMain=!0,e.build(this.getPlugin(t),i),!0)}}],[{key:"getCompilations",value:function(){return compilations}}]),c}(),Compiler_1=(Compiler.start=function(e){var t=new Compiler(e);t.start(t.options.builder,function(e){e?(Array.isArray(e)?e:[e]).forEach(function(e){e=e.error||e;e instanceof Error&&Utils.error(e.message),console.error(e)}):Utils.info("build success. output: ".concat(t.options.output.replace(/\\/g,"/")))})},Compiler),defaultOptions={service:!0,debug:!0,autoLoadDescribeFile:!1,parser:{locations:!0},diagnose:!0},CompletionItemKind={Text:0,Method:1,Function:2,Constructor:3,Field:4,Variable:5,Class:6,Interface:7,Module:8,Property:9,Unit:10,Value:11,Enum:12,Keyword:13,Snippet:14,Color:15,Reference:17,File:16,Folder:18,EnumMember:19,Constant:20,Struct:21,Event:22,Operator:23,TypeParameter:24,User:25,Issue:26},MODULE_PROPERTY_ALL=15,MODULE_PROPERTY_ACCESSOR=1,MODULE_PROPERTY_VAR=2,MODULE_PROPERTY_METHOD=4,MODULE_PROPERTY_CONST=8,Service=function(){function i(e){_classCallCheck(this,i),(e=e?Object.assign({},defaultOptions,e):Object.assign({},defaultOptions)).globalTypes=[path__default.default.join(__dirname,"types")];var t=(this._options=e).cwd,e=new Compiler_1(e),t=e.scanTypings(t);t&&e.loadTypes(t),this._types=t,this._compiler=e}function e(e){return t.apply(this,arguments)}var t;return _createClass(i,[{key:"options",get:function(){return this._options},set:function(e){e&&"object"===_typeof(e)&&(this._options=Object.assign(this._options,e),this._compiler&&Object.assign(this._compiler.options,this._options))}},{key:"compiler",get:function(){return this._compiler}},{key:"onDidChangeWorkspace",value:function(e){var t=this.compiler,i=t.scanTypings(e);this._types.forEach(function(e){i.includes(e)||t.removeCompilation(e)}),this._types=i,t.loadTypes(i)}},{key:"getCompilation",value:function(e){return this.compiler.createCompilation(e)}},{key:"parser",value:function(e){e=this.getCompilation(e);return e.parser(),e}},{key:"comments",value:function(e){return e&&e.comments&&e.comments.forEach(function(e){"Block"==e.type&&(e.value=e.value.split(/\r\n/g).map(function(e){return e.replace(/^(\s+|\t+)?\*?/g,"")}).filter(function(e){return!!e}).join("\r\n"))}),e}},{key:"getStackByAt",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:20,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return this.parser(e).getStackByAt(t,i,n)}},{key:"getProgramStackByLine",value:function(e,t){e=this.getContainStackByAt(e,t);return e||null}},{key:"getStackSpreadItems",value:function(e){var t=[];if(!e)return t;switch(!0){case e.isFunctionExpression:case e.isArrowFunctionExpression:case e.isFunctionDeclaration:case e.isMethodDefinition:return[].concat(e.params,e.returnType,e.body);case e.isPackageDeclaration:return e.childStackItems.concat(e.id);case e.isClassDeclaration:case e.isDeclaratorDeclaration:case e.isInterfaceDeclaration:return e.childStackItems.concat(e.id,e.inherit,e.genericity,e.annotations,e.implements);case e.isProgram:return e.childStackItems;case e.isAnnotationDeclaration:case e.isAnnotationExpression:return e.body;case e.isEnumDeclaration:return[e.key,e.inherit].concat(e.imports,e.annotations,e.properties);case e.isPropertyDefinition:case e.isVariableDeclaration:return e.declarations.concat(e.annotations);case e.isAssignmentExpression:case e.isLogicalExpression:return[e.left,e.right];case e.isAssignmentPattern:return[e.left,e.acceptType,e.right];case e.isVariableDeclarator:case e.isDeclarator:case e.isParamDeclarator:return[e.id,e.acceptType,e.init];case e.isArrayExpression:return e.elements;case e.isObjectExpression:return e.properties;case e.isProperty:return[e.key,e.acceptType,e.init];case e.isBinaryExpression:return[e.left,e.right];case e.isAwaitExpression:case e.isReturnStatement:case e.isThrowStatement:return[e.argument];case e.isObjectPattern:return e.properties;case e.isExpressionStatement:case e.isParenthesizedExpression:return[e.expression];case e.isSequenceExpression:return e.expressions;case e.isMemberExpression:case e.isTypeComputeDefinition:return[e.object,e.property];case e.isImportDeclaration:return[e.specifiers];case e.isNewExpression:case e.isCallExpression:return[e.callee].concat(e.genericity,e.arguments);case e.isTypeFunctionDefinition:return e.params.concat(e.returnType);case e.isGenericDeclaration:case e.isTypeUnionDefinition:return e.elements;case e.isGenericTypeDeclaration:return[e.valueType,e.extends];case e.isGenericTypeAssignmentDeclaration:case e.isTypeAssertExpression:case e.isTypeIntersectionDefinition:return[e.left,e.right];case e.isTypeGenericDefinition:return[e.valueType].concat(e.elements);case e.isTypeKeyofDefinition:case e.isTypeTupleRestDefinition:case e.isTypeDefinition:return[e.valueType];case e.isTypeObjectDefinition:return e.properties;case e.isTypeObjectPropertyDefinition:return[e.key,e.init];case e.isTypeStatement:return[e.id,e.init];case e.isTypeTypeofDefinition:return[e.expression];case e.isTypeTransformExpression:return[e.typeExpression,e.referExpression];case e.isTypeTupleDefinition:return e.elements;case e.isIfStatement:case e.isWhenStatement:return[e.consequent,e.alternate];case e.isJSXElement:return[e.openingElement].concat(e.children);case e.isJSXScript:return[e.openingElement].concat(e.imports,e.body);case e.isJSXStyle:return[e.openingElement];case e.isJSXAttribute:return[e.name,e.value];case e.isJSXExpressionContainer:return[e.expression];case e.isJSXOpeningElement:return e.attributes||[];case e.isBlockStatement:return e.body;case e.isSwitchStatement:return[e.condition].concat(e.cases);case e.isSwitchCase:return e.condition&&t.push(e.condition),e.consequent&&t.push(e.consequent),t}return t}},{key:"getContainStackByAt",value:function(e,t){var i=e&&e.node;if(i&&i.start<=t&&i.end>=t){for(var n=e.childrenStack,r=n&&n.length;0<r;){var s=n[--r],s=s?this.getContainStackByAt(s,t):null;if(s)return s}return e}return null}},{key:"getCanInsertExpression",value:function(e){switch(!0){case e.isCallExpression:return e;case e.isBinaryExpression:return e.right;case e.isAwaitExpression:return e.argument;case e.isVariableDeclaration:var t=e.declarations[e.declarations.length-1];return t&&t.init}for(var i=e.parentStack;i;){if(i.isCallExpression)return 0<=i.arguments.indexOf(e)?e:i;if(!i.isMemberExpression)return e;if(i.property!==e)return i.object!==e?i:e;var n=i.description();if(n&&n.isMethodGetterDefinition||n.isPropertyDefinition)return i;i=i.parentStack}return e}},{key:"getGlobalRefs",value:function(e){var n=[];return Namespace_1.dataset.modules.forEach(function(e,t){var i=CompletionItemKind.Field;switch(!0){case e.isDeclaratorFunction:i=CompletionItemKind.Function;break;case e.isInterface:i=CompletionItemKind.Interface;break;case e.isClass:i=CompletionItemKind.Class;break;case e.isAliasType:case e.isAnyType:case e.isNullableType:case e.isVoidType:return;case e.isDeclaratorVariable:i="const"===e.kind?CompletionItemKind.Constant:CompletionItemKind.Variable}n.push({text:t,kind:i})}),n}},{key:"getAllModuleRefs",value:function(e,t){var i=this,n=t||[];return(e=e||Namespace_1.dataset).modules.forEach(function(e,t){var i=0;switch(!0){case e.isInterface:i=CompletionItemKind.Interface;break;case e.isClass:i=CompletionItemKind.Class;break;case e.isEnum:i=CompletionItemKind.Enum}i&&n.push({text:e.namespace.getChain().concat(e.id).join("."),kind:i,stack:e.compilation.getStackByModule(e)})}),e.children.forEach(function(e){i.getAllModuleRefs(e,n)}),n}},{key:"getAllNamespaceRefs",value:(t=function(e){var t=[];return(e=e||Namespace_1.dataset).children.forEach(function(e){t.push({text:e.fullName,kind:CompletionItemKind.Folder}),t=t.concat(getAllNamespaceRefs(e))}),t},e.toString=function(){return t.toString()},e)},{key:"getModuleProperties",value:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:7,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:MODULE_PROPERTY_ALL,a=[],r=null===r?new Set:r;if(!e||!e.isModule)return a;function o(e){if(e)for(var t in e){t=e[t];((l[t.modifier?t.modifier.value():"public"]||0)|n)===n&&(t.isAccessor?c(t.get||t.set,CompletionItemKind.Property,MODULE_PROPERTY_ACCESSOR):t.isPropertyDefinition?c(t,CompletionItemKind.Property,"const"===t.kind?MODULE_PROPERTY_CONST:MODULE_PROPERTY_VAR):c(t,CompletionItemKind.Method,MODULE_PROPERTY_METHOD))}}var c=function(e,t,i){var n;e&&(s&i)===i&&(i=e.value(),r.has(n=i+t)||(r.add(n),n=e.isPropertyDefinition&&e.init&&e.init.isLiteral?e.init.value():null,a.push({text:i,kind:t,stack:e,defaultValue:n})))},l={public:4,protected:2,private:1};return i?e.isClass&&(o(e.methods),a=a.concat(this.getModuleProperties(e.compilation.getGlobalTypeById("Class"),!1,1^n,r,s))):(o(e.members),e.inherit&&(a=a.concat(this.getModuleProperties(e.inherit,i,1^n,r,s))),e.isDeclaratorModule&&e.implements.forEach(function(e){a=a.concat(t.getModuleProperties(e,i,1^n,r,s))})),a}},{key:"getModuleImportRefs",value:function(n,i){var r=[];return n.modules.forEach(function(e,t){i&&i!==e||e.imports.forEach(function(e,t){var i=CompletionItemKind.Reference;e.isClass?i=CompletionItemKind.Class:e.isInterface?i=CompletionItemKind.Interface:e.isEnum&&(i=CompletionItemKind.Enum),r.push({text:e.getName(),kind:i,stack:n.getStackByModule(e)})})}),r}},{key:"getLocalScopeRefs",value:function(e){if(!e||!e.isStack)return[];var i=e.scope,t=i&&i.getKeys(["block","function"]).map(function(e){var t=i.define(e);return{text:e,kind:t&&t.isStack&&"const"===t.kind?CompletionItemKind.Constant:CompletionItemKind.Variable,stack:t&&t.isStack?t:null}});return e.module&&e.module.inherit&&((e=e.getParentStack(function(e){return!!e.isBlockStatement})).isBlockStatement&&e.parentStack.isFunctionExpression&&e.parentStack.parentStack.isMethodDefinition&&e.parentStack.parentStack.static),t}},{key:"getDotCompletionItems",value:function(e,t,i){i=e=(e=this.getProgramStackByLine(e.stack,i))&&e.parentStack&&e.parentStack.isMemberExpression?e.parentStack.object===e?e.parentStack.object:e.parentStack:e;if(i){var n=i.module,r=null,s=null,a=(i.isStack&&(r=i.description(),(s=i.type())&&s.isGenericType&&s.hasConstraint&&(s=s.inherit)),function(e){if(e.isModule&&(e.isClass||e.isEnum)){for(var t=n.inherit;t&&e!==t;)t=t.inherit;return n===e?7:t===e?6:4}return 4});switch(!0){case s.isLiteralObjectType:return Array.from(s.properties.keys()).map(function(e){return{text:e,kind:CompletionItemKind.Property}}).concat(this.getModuleProperties(Utils.getOriginType(s),!1,4));case s.isModule:case s.isClassGenericType:return s.isInterface?this.getModuleProperties(s,!1,4):s.isClassType?(o=a(s.types[0]),this.getModuleProperties(s.types[0],!0,o)):(c=a(o=Utils.getOriginType(s)),this.getModuleProperties(o,r===s,c));case s.isNamespace:return Array.from(s.children.values()).map(function(e){return{text:e.identifier,kind:CompletionItemKind.Folder}}).concat(Array.from(s.modules.values()).map(function(e){return{text:e.id,kind:CompletionItemKind.Module}}));default:var o=Utils.getOriginType(s),c=a(o);return this.getModuleProperties(o,!1,c)}}}},{key:"inPosition",value:function(e,t){return e.node.start<t&&e.node.end>t}},{key:"isWebComponent",value:function(e){for(;e&&e.isModule;){var t=e.compilation.getStackByModule(e);if(t&&t.annotations&&Array.isArray(t.annotations)&&t.annotations.some(function(e){return"webcomponent"===e.name.toLowerCase()}))return!0;e=e.inherit}return!1}},{key:"searchingUncloseTag",value:function(e,t){for(var i=e.getText(),n=[],r=[],s=t,a="",o=!1;0<s;){s--;var c=i.charCodeAt(s);if(34===c||39===c||96===c){for(var l=0;92===i.charCodeAt(s-1);)s--,l++;if(l%2!=0){o=!o;continue}}if(!o){if(62===c){var u={tag:60,pos:s,single:!1,close:!1};n.push(u),47===i.charCodeAt(s-1)&&(s--,u.close=!0,u.single=!0)}else if(0<n.length)if(47===c&&60===i.charCodeAt(s-1)){u=n[n.length-1];u.close=!0,u.start=s,u.name=a,s--}else if(n[n.length-1].tag===c){var p=n.pop();if(!p.single){var h=n.pop();if(p.start=s+1,p.name=a,!h||!h.close||a!==h.name){r.push(p);break}}}a=65<=c&&c<=90||97<=c&&c<=122||58===c||46===c?i[s]+a:""}}return r}},{key:"getAttrDirectivesItems",value:function(e){var t,e=e?e.jsxRootElement.xmlns:[],i=this.compiler.options,n={};for(t in e.forEach(function(e){var t=e.name.value(),e=e.value.value();n[e]=t}),i.jsx.xmlns.default){var r=i.jsx.xmlns.default[t];n[r]||(n[r]=t)}var s=[];for(r in n){var a=i.jsx.xmlns.sections[r];a&&!function(){var i=n[r];a.forEach(function(e){"*"==e&&(e="name");var t="".concat(i,":").concat(e,'=""');"for"===e?t="".concat(i,":").concat(e,'="(item,key) in data"'):"each"===e&&(t="".concat(i,":").concat(e,'="item of data"')),s.push({text:"".concat(i,":").concat(e),insertText:t,kind:CompletionItemKind.Struct})})}()}return s}},{key:"getSpaceCompletionItems",value:function(e,t,i){var n,e=this.getProgramStackByLine(e.stack,i);if(!e)return[];if((e=(e=(e=(e.isJSXExpressionContainer||e.isLiteral&&e.parentStack&&e.parentStack.isJSXAttribute)&&!this.inPosition(e,i)?e.parentStack.parentStack:e).isJSXIdentifier&&e.parentStack.isJSXNamespacedName?e.parentStack.parentStack:e).isJSXAttribute&&e.parentStack.isJSXOpeningElement&&!this.inPosition(e,i)?e.parentStack:e).isPackageDeclaration||e.isProgram){if(/^(import)\s/.test(t))return this.getAllModuleRefs()}else{if(e.isJSXOpeningElement&&e.parentStack.isJSXElement&&e.parentStack.isComponent)return i=(e=e.parentStack).getSubClassDescription(),n=new Set,(e.openingElement.attributes||[]).forEach(function(e){e.isMemberProperty&&(e.name.isJSXNamespacedName?n.add(e.name.name.value()):n.add(e.name.value()))}),t=this.getAttrDirectivesItems(e.jsxElement),(i=this.getModuleProperties(i,!1,4,n,MODULE_PROPERTY_VAR|MODULE_PROPERTY_ACCESSOR)).forEach(function(e){var t;e.defaultValue?e.insertText="".concat(e.text,' = "').concat(e.defaultValue,'"'):(e.insertText="".concat(e.text,' = ""'),t=e.insertText.length-1,e.selection={startAt:t,endAt:void 0})}),t.concat(i);if(e.isJSXAttribute){if(e.isAttributeXmlns)return Object.keys(this.compiler.options.jsx.xmlns.sections).map(function(e){return{text:e,kind:CompletionItemKind.Struct}}).concat(this.getAllNamespaceRefs())}else if(e.parentStack&&e.parentStack.isJSXAttribute){if(e.parentStack.isAttributeXmlns)return Object.keys(this.compiler.options.jsx.xmlns.sections).map(function(e){return{text:e,kind:CompletionItemKind.Struct}}).concat(this.getAllNamespaceRefs());if(e.parentStack.value===e&&e.parentStack.jsxElement.isComponent){t=e.parentStack.jsxElement.getSubClassDescription(),i=e.parentStack.getAttributeDescription(t);if(i){e=i.type();if(e.isUnionType)return e.elements.map(function(e){return{text:e.type().toString().replace(/[\'\"]+/g,""),kind:CompletionItemKind.Text,replace:{posAt:-1}}});if(e.isLiteralType)return[{text:e.toString().replace(/[\'\"]+/g,""),kind:CompletionItemKind.Text,replace:{posAt:-1}}]}}}}return[]}},{key:"getStartTagCompletionItems",value:function(r,e,t){var n=this,t=this.getProgramStackByLine(r.stack,t);if(!t||!t.module||!this.isWebComponent(t.module))return[];for(var s=this.getModuleImportRefs(r).filter(function(e){n.isWebComponent(e.stack.module)}),i=t.jsxElement,a=t;!i&&a.parentStack;)i=(a=a.parentStack).jsxElement;var o,c,l,u=new Map,p={},t=i?i.jsxRootElement.xmlns:[];return t&&0<t.length&&(o=function(e,t){var i=u.get(e);i||u.set(e,i=new Set),i.add(t)},c=function t(i,e){e instanceof Namespace_1?(e.modules.forEach(function(e){n.isWebComponent(e)&&o(i,e)}),e.children.forEach(function(e){t(i,e)})):e.isModule&&n.isWebComponent(e)&&o(i,e)},l=r.compiler.options.jsx.xmlns.sections,t.forEach(function(e){var t=e.name.value(),e=e.value.value(),i=("@directives"!==e||(i=l[e])&&(p[t]=e,i.forEach(function(e){o(t,e)})),Namespace_1.fetch(e));i&&c(t,i)})),u.forEach(function(e,n){e.forEach(function(e){var t,i;"@directives"===p[n]?(i="","if"===(t=e)||"elseif"===t||"show"===t?i="".concat(n,":").concat(t,' condition=""></').concat(n,":").concat(t,">"):"else"===t?i="".concat(n,":").concat(t,"></").concat(n,":").concat(t,">"):"for"!==t&&"each"!==t&&"each"!==t||(i="".concat(n,":").concat(t,' name="" item="item" key="key"></').concat(n,":").concat(t,">")),i&&s.push({text:t,kind:CompletionItemKind.Struct,insertText:i})):s.push({text:e.getName(),kind:CompletionItemKind.Class,insertText:"".concat(n,":").concat(e.id,"></").concat(n,":").concat(e.id,">"),stack:r.getStackByModule(e)})})}),s}},{key:"getCloseTagCompletionItems",value:function(e,t,i,n){return this.searchingUncloseTag(n,i).map(function(e){return{text:e.name,kind:CompletionItemKind.Snippet,insertText:"".concat(e.name,">")}})}},{key:"getCompletionItems",value:function(e,t,i,n,r){try{var s=this.parser(e);if(n){if(" "==n)return this.getSpaceCompletionItems(s,t,i);if("@"==n)return this.compiler.options.annotations.map(function(e){return{text:e,kind:CompletionItemKind.Keyword}});if("."==n)return this.getDotCompletionItems(s,t,i);if(60===n.charCodeAt(0))return this.getStartTagCompletionItems(s,t,i);if(62!==n.charCodeAt(0))if(47===n.charCodeAt(0)){if(60===t.substr(-2).charCodeAt(0))return this.getCloseTagCompletionItems(s,t,i,r)}else n.charCodeAt(0)}else{var a=this.getProgramStackByLine(s.stack,i);if(a)return a.isPackageDeclaration?["import","class","interface","implements","public","enum"].map(function(e){return{text:e,kind:CompletionItemKind.Keyword}}):a.isClassDeclaration||a.isInterfaceDeclaration?["public","protected","private","static","implements","extends"].map(function(e){return{text:e,kind:CompletionItemKind.Keyword}}):this.getModuleImportRefs(s,a.module).concat(this.getGlobalRefs(s),this.getLocalScopeRefs(a))}}catch(e){this.options.debug&&console.log(e)}return[]}},{key:"completion",value:function(e,t,i,n,r,s,a){return this.getCompletionItems(e,t,i-(s?s.length:0),s,a)}},{key:"check",value:function(e,t){var i=[];try{var n,r=this.compiler.createCompilation(e);if(r)return i=r.errors,r.isValid(t)||(n=r.parseAst(t))&&(r.clear(),r.createStack(null,n),r.ast=n,r.source=t,r.parser()),r.errors}catch(e){}return i}},{key:"hover",value:function(e,t,i,n,r){try{var s,a=this.parser(e),o=this.getProgramStackByLine(a.stack,t);if(o)return(s=o.definition())&&this.comments(s),s}catch(e){this.options.debug&&console.log(e)}return null}},{key:"definition",value:function(e,t,i,n,r){try{var s,a=this.parser(e),o=this.getProgramStackByLine(a.stack,t);if(o)return(s=o.definition())&&!s.location?null:s}catch(e){this.options.debug&&console.log(e)}return null}},{key:"clear",value:function(){console.log("service stop...")}}]),i}(),service=Service,getOptions=function(){return{autoLoadDescribeFile:!1!==vscode__default.default.workspace.getConfiguration("EaseScript").get("LoadTypeFile"),cwd:vscode__default.default.workspace.workspaceFolders.map(function(e){return path__default.default.resolve(vscode__default.default.workspace.asRelativePath(e.uri,!0))})[0]}},activate=function(e){var o=new service(getOptions()),i=vscode__default.default.languages.createDiagnosticCollection("easescript");function n(e){var t;"easescript"===e.languageId&&(t=o.check(e.fileName,e.getText()))&&(0<(t=t.map(function(e){var t=e.range;return new vscode__default.default.Diagnostic(new vscode__default.default.Range(new vscode__default.default.Position(t.start.line-1,t.start.column),new vscode__default.default.Position(t.end.line-1,t.end.column)),"".concat(e.message," (").concat(e.code,")"),e.kind)})).length?i.set(e.uri,t):i.clear())}vscode__default.default.window.activeTextEditor&&n(vscode__default.default.window.activeTextEditor.document),e.subscriptions.push(vscode__default.default.window.onDidChangeActiveTextEditor(function(e){e&&n(e.document)}));var r=null;vscode__default.default.workspace.onDidChangeTextDocument(function(e){var t,i;vscode__default.default.window.activeTextEditor&&e.document===vscode__default.default.window.activeTextEditor.document&&(r&&clearTimeout(r),0<e.contentChanges.length&&(r=setTimeout(function(e){n(e),r=null},100,e.document),t=e.contentChanges[0].text,e=e.contentChanges[0].range,0<=(i=t.indexOf("><"))?vscode__default.default.window.activeTextEditor.selection=new vscode__default.default.Selection(new vscode__default.default.Position(e.start.line,e.start.character+ ++i),new vscode__default.default.Position(e.start.line,e.start.character+i)):/^(\w+)\s=\s\"\"$/.test(t)&&(vscode__default.default.window.activeTextEditor.selection=new vscode__default.default.Selection(new vscode__default.default.Position(e.start.line,e.start.character+(t.length-1)),new vscode__default.default.Position(e.start.line,e.start.character+(t.length-1))))))}),vscode__default.default.workspace.onDidChangeWorkspaceFolders(function(e){e=e.workspaceFolders.map(function(e){return path__default.default.resolve(vscode__default.default.workspace.asRelativePath(e.uri,!0))});o.onDidChangeWorkspace(e)}),e.subscriptions.push(vscode__default.default.languages.registerHoverProvider("easescript",{provideHover:function(e,t,i){var n=e.fileName,t=e.getWordRangeAtPosition(t),r=e.offsetAt(t.start),e=e.getText(t),t=o.hover(n,r,e);return t?((n=new vscode__default.default.MarkdownString).appendCodeblock(t.expre),t.comments&&(n.appendMarkdown("***"),n.appendCodeblock(t.comments.map(function(e){return e.value}).join("  "))),r=null,t.range&&(r=new vscode__default.default.Range(new vscode__default.default.Position(t.range.start.line-1,t.range.start.column),new vscode__default.default.Position(t.range.end.line-1,t.range.end.column))),new vscode__default.default.Hover(n,r)):null}})),e.subscriptions.push(vscode__default.default.languages.registerDefinitionProvider("easescript",{provideDefinition:function(e,t,i){var n=e.fileName,t=e.getWordRangeAtPosition(t),r=e.offsetAt(t.start),e=e.getText(t),t=o.definition(n,r,e);if(t&&t.location&&t.file)return n=t.location,new vscode__default.default.Location(vscode__default.default.Uri.file(t.file),new vscode__default.default.Position(n.start.line-1,n.start.column))}})),e.subscriptions.push(vscode__default.default.languages.registerCompletionItemProvider("easescript",{provideCompletionItems:function(e,i,t,n){var r=e.offsetAt(i),s=e.fileName,a=e.lineAt(i).text.replace(/^[\s\t]+/,"");return(o.completion(s,a,r,i.line,i.character,n.triggerCharacter,e)||[]).map(function(e){var t=new vscode__default.default.CompletionItem(e.text,e.kind);return t.stack=e.stack,e.insertText&&(t.insertText=e.insertText),e.replace&&(t.range=new vscode__default.default.Range(new vscode__default.default.Position(i.line,i.character+e.replace.posAt),new vscode__default.default.Position(i.line,i.character+e.replace.posAt))),t})},resolveCompletionItem:function(e,t){var i;return e.stack&&(i=e.stack.definition())&&(e.detail=i.expre),e}},"."," ","@","\n","<",">","/"))},deactivate=function(){collection&&collection.clear(),provider&&provider.clear(),provider=null},extension={activate:activate,deactivate:deactivate};exports.activate=activate,exports.deactivate=deactivate,exports.default=extension;